/*!CK:2202533463!*//*1418630806,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["chIH3"]); }

__d("MComposerWaterfallEvent",[],function(a,b,c,d,e,f){e.exports={COMPOSER_CANCEL:"composer_cancel",COMPOSER_CANCEL_INTENT:"intent_composer_cancel",COMPOSER_ENTRY:"composer_entry",COMPOSER_NOT_RENDERED:"composer_not_renderer",COMPOSER_POST:"composer_post",COMPOSER_POST_CANCEL:"composer_post_cancel",COMPOSER_POST_FAILURE:"composer_post_failure",COMPOSER_POST_FAILURE_FATAL:"composer_post_fatal_failure",COMPOSER_POST_FAILURE_GIVEUP:"composer_post_giveup_failure",COMPOSER_POST_SUCCESS:"composer_post_success",COMPOSER_WRITTEN:"composer_written",ALBUM_ADD:"add_album",ALBUM_CANCEL:"cancel_album",ALBUM_INTENT:"intent_album",ALBUM_REMOVE:"remove_album",FRIEND_TAG_ADD:"add_friend_tag",FRIEND_TAG_CANCEL:"cancel_friend_tag",FRIEND_TAG_INTENT:"intent_friend_tag",FRIEND_TAG_REMOVE:"remove_friend_tag",FRIEND_TAG_SEARCH:"search_friend_tag",FRIEND_SHOW_MORE:"show_more_friend_tag",LOCATION_ADD:"add_location",LOCATION_CANCEL:"cancel_location",LOCATION_INTENT:"intent_location",LOCATION_REMOVE:"remove_location",LOCATION_SCROLL:"scroll_location",LOCATION_SEARCH:"search_location",MINUTIAE_ADD:"add_minutiae",MINUTIAE_CANCEL:"cancel_minutiae",MINUTIAE_CHANGE_ICON:"change_icon_minutiae",MINUTIAE_CHANGE_ICON_CANCEL:"change_icon_cancel_minutiae",MINUTIAE_CHANGE_ICON_INTENT:"change_icon_intent_minutiae",MINUTIAE_INTENT:"intent_minutiae",MINUTIAE_REMOVE:"remove_minutiae",MINUTIAE_SCROLL:"scroll_minutiae",MINUTIAE_SEARCH:"search_minutiae",MINUTIAE_TYPE_CLICK:"type_click_minutiae",MINUTIAE_SEE_MORE:"see_more_minutiae",MINUTIAE_CHAIN_SKIP:"skip_chain_minutiae",MINUTIAE_CHAIN_SUGGEST:"suggest_chain_minutiae",MINUTIAE_ICONPICKER_QUERY:"minutiae_iconpicker_query",MINUTIAE_ICONPICKER_BOOTSTRAP:"minutiae_iconpicker_bootstrap",MINUTIAE_ICONPICKER_SELECT:"minutiae_iconpicker_select",MEDIA_INTENT:"intent_media",MEDIA_CANCEL:"cancel_media",PHOTO_ADD:"add_photo",PHOTO_ADD_FAILURE:"add_photo_failure",PHOTO_ADD_SUCCESS:"add_photo_success",PHOTO_REMOVE:"remove_photo",PRIVACY_ADD:"add_privacy",PRIVACY_CANCEL:"cancel_privacy",PRIVACY_INTENT:"intent_privacy",PRIVACY_SCROLL:"scroll_privacy",PRIVACY_SEE_ALL_LISTS:"see_all_lists_privacy",SELECT_FRIEND_TIMELINE_INTENT:"intent_select_friend_timeline",SELECT_FRIEND_TIMELINE_ADD:"add_select_friend_timeline",SELECT_FRIEND_TIMELINE_CANCEL:"cancel_select_friend_timeline",SERVER_POST_BEGIN:"server_composer_post_begin",SERVER_POST_FAILURE:"server_composer_post_failure",SERVER_POST_SUCCESS:"server_composer_post_succeeded",POST_POST_WITH_TAG_BEGIN:"post_post_with_tag_begin",POST_POST_WITH_TAG_FAILURE:"post_post_with_tag_failure",POST_POST_WITH_TAG_SUCCESS:"post_post_with_tag_success",TARGET_SELECTOR_INTENT:"intent_target_selector",TARGET_SELECTOR_CANCEL:"cancel_target_selector",VIDEO_ADD:"add_video",VIDEO_ADD_FAILURE:"add_video_failure",VIDEO_ADD_SUCCESS:"add_video_success",VIDEO_REMOVE:"remove_video"};},null);
__d("MCompositionPrivacyFields",[],function(a,b,c,d,e,f){e.exports={PRIVACY_FBID:"PRIVACY_FBID",CLOSE_DIALOG:"CLOSE_DIALOG",ALREADY_SAVED_STICKY:"ALREADY_SAVED_STICKY",NEVER_SAVE_STICKY:"NEVER_SAVE_STICKY"};},null);
__d("PrivacyRemindersLoggingTypes",[],function(a,b,c,d,e,f){e.exports={ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"};},null);
__d("TrackingNodeTypes",[],function(a,b,c,d,e,f){e.exports={HEADLINE:1,USER_NAME:2,ACTOR_PHOTO:3,ACTION_LINKS:4,LIKE_LINK:5,UNLIKE_LINK:6,PARTICIPANT:7,PRONOUN:8,ROBOTEXT:9,TITLE:10,MEDIA_GENERIC:11,PHOTO:12,VIDEO:13,MUSIC:14,ATTACHMENT:15,NAME_LIST:16,SHARE_LINK:17,USER_MESSAGE:18,SUBTITLE:19,DESCRIPTION:20,SOURCE:21,BLINGBOX:22,OTHER:23,VIEW_ALL_COMMENTS:24,COMMENT:25,COMMENT_LINK:26,SMALL_ACTOR_PHOTO:27,SUBSTORY:28,XBUTTON:29,HIDE_LINK:30,REPORT_SPAM_LINK:31,HIDE_ALL_LINK:32,BAD_AGGREGATION_LINK:33,ADD_COMMENT_BOX:34,APP_CALL_TO_ACTION:35,UFI:36,OG_LEFT_SLIDE_PAGER:37,OG_RIGHT_SLIDE_PAGER:38,EXP_CALL_TO_ACTION:39,LARGE_MEDIA_ATTACHMENT:40,FAN_PAGE:42,UNFAN_PAGE:43,SEE_MORE:44,COLLECTION_ROBOTEXT_LINK:45,COLLECTION_ACTION_LINK:46,COLLECTION_TICKER_LINK:47,SPONSORED_LINK:49,PAGE_LINK:50,SOCIAL_CONTEXT:51,SOCIAL_ACTOR_PHOTO:52,OFFERS_CLAIM:53,OFFERS_CLICK:54,DROPDOWN_BUTTON:55,EVENT_VIEW:56,EVENT_RSVP:57,ADS_SHIMMED_LINK:58,COLLECTION_ADD_BUTTON:59,EVENT_INVITE_FRIENDS:60,RHC_AD:61,AD_CREATIVE_TITLE:62,AD_CREATIVE_BODY:63,AD_CREATIVE_IMAGE:64,AD_SOCIAL_SENTENCE:65,APP_NAME:66,GROUP_JOIN:67,PAGE_COVER_PHOTO:68,PAGE_PROFILE_PIC:69,AD_IDENTITY:70,UNHIDE_LINK:71,TRENDING_TOPIC_LINK:72,RELATED_SHARE_ARTICLE:73,OFFERS_USE_NOW:74,RELATED_SHARE_VIDEO:75,RHC_CARD:76,RHC_CARD_HIDE:77,RHC_SIMPLIFICATION:78,RHC_SIMPLIFICATION_HIDE:79,TOPIC_PIVOT_HEADER:80,ADD_FRIEND_BUTTON:81,SNOWLIFT:82,SNOWLIFT_MESSAGE:83,OFFERS_RESEND:84,RHC_LINK_OPEN:85,GENERIC_CALL_TO_ACTION_BUTTON:86,AD_LOGOUT:87,RHC_PHOTO_SLIDER:88,RHC_COMMENT_BUTTON:89,HASHTAG:90,NOTE:91,RELATED_SHARE_ARTICLE_HIDE:92,RELATED_SHARE_VIDEO_HIDE:93,NEKO_PREVIEW:94,OG_COMPOSER_OBJECT:95,INSTALL_ACTION:96,SPONSORED_CONTEXT:97,DIGITAL_GOOD:98,STORY_FOOTER:99,STORY_LOCATION:100,ADD_PHOTO_ACTION:101,ACTION_ICON:102,EGO_FEED_UNIT:103,PLACE_STAR_SURVEY:104,REVIEW_MENU:105,SAVE_ACTION:106,PHOTO_GALLERY:107,SUB_ATTACHMENT:108,FEEDBACK_SECTION:109,ALBUM:110,ALBUM_COLLAGE:111,AVATAR_LIST:112,STORY_LIST:113,MEDIA_CONTROLS:114,ZERO_UPSELL_BUY:115,ZERO_UPSELL_FEED_UNIT:116,RATING:117,PERMALINK_COMMENT:118,LIKE_COUNT:119,RETRY_BUTTON:120,TIMELINE_GIFTS:121,NEARBY_FRIENDS_LIST:122,PRESENCE_UNIT:123,EVENT_INVITE_SENT:124,ATTACHMENT_TITLE:125,HSCROLL_PAGER:126,STORY_MESSAGE:127,STATUS_LINK:128,ADD_MEDIA_LINK:129,ADD_QUESTION_LINK:130,START_Q_AND_A_LINK:131,UPLOAD_FILE_LINK:132,START_CONVERSATION_LINK:133,ATTACH_LIFE_EVENT_LINK:134,ATTACH_PLACE_LINK:135,COVER_PHOTO_EDIT_LINK:136,SHOW_LIKES:137,ROTATE_LEFT_BUTTON:138,ROTATE_RIGHT_BUTTON:139,TAG_LINK:140,CLOSE_BUTTON:141,PAGER_NEXT:142,PAGER_PREVIOUS:143,FULLSCREEN_BUTTON:144,ACTIONS:145,CURATION_MENU:146,PROFILE_PIC_EDIT_LINK:147,VIEW_ALL_SHARES:148,THUMBNAIL_LINK:149,EDIT_HISTORY:150,ADD_TO_THREAD:151,SIDEBAR:152,HOME_SIDENAV:153,BUDDYLIST_NUB:154,TITLEBAR:155,SEND_BUTTON:156,CONVERSATION:157,CHAT_FLYOUT:158,INPUT:159,EMOTICONS:160,VIDEOCHAT:161,TYPEAHEAD:162,OPTIONS_MENU:163,BOOST_POST_BUTTON:164,TOGGLE_BUTTON:165,CHAT_SIDEBAR_FOOTER:166,GRIPPER:167,BOOKMARK_ITEM:168,BOOKMARKS_SECTION:169,BOOKMARKS_NAV:170,RHC:171,RHC_HEADER:172,SIDE_ADS:173,BUDDY_LIST:174,SHOW_ADS_FEED:184,VIDEO_IN_PLAY_CALL_TO_ACTION_BUTTON:185,VIDEO_ENDSCREEN_CALL_TO_ACTION_BUTTON:186,INLINE_PHOTO_PIVOTS_HIDE:187,VIDEO_CALL_TO_ACTION_ENDSCREEN_REPLAY:188,APP_ATTACHMENT:189,ACTIVITY_LINK:190,SAVE_BUTTON:191,SEE_MORE_PHOTO_PAGE_POST_BUTTON:192,BUY_VIRTUAL_GOOD:193,SAVE_SECONDARY_MENU:194,MPP_INSIGHTS:195,WAP_FOOTER:196,GROUP_CANCEL:197,GROUP_LEAVE:198,MESSAGE_LINK:199,VIDEO_SPONSORSHIP_LABEL:200,MULTI_ATTACHMENT_PAGER_NEXT:201,MULTI_ATTACHMENT_PAGER_PREV:202,UNUSED:-1};},null);
__d("XAdsPreferencesFeedbackControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/ads\/preferences\/feeedback\/",{ad_id:{type:"Int",required:true},favorite:{type:"Enum",required:true}});},null);
__d("MAdsPrefsFeedback",["cx","CSS","DOM","MRequest","XAdsPreferencesFeedbackControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k){function l(n,o){var p=o?'ad_useful':'ad_neutral',q=new k().setInt('ad_id',n).setEnum('favorite',p).getURI(),r=new j(q);r.send();}var m={toggle:function(n,o,p,q){h.conditionClass(n,"_232h",true);n.addEventListener('webkitAnimationEnd',function(r){h.conditionClass(r.target,"_232h",false);i.replace(r.target,o);},true);l(p,q);}};e.exports=m;},null);
__d("MReactTypeaheadView",["React"],function(a,b,c,d,e,f,g){'use strict';var h=g.createClass({displayName:"MReactTypeaheadView",render:function(){var i=this.props.Renderer;return (g.createElement(i,{data:this.props.data,query:this.props.query,waiting:this.props.waiting,loaderMarkup:this.props.loaderMarkup,onTouchStart:this.props.onTouchStart,onClickItem:this.props.onClickItem,simpleSearch:this.props.simpleSearch,excludedEntries:this.props.excludedEntries}));}});e.exports=h;},null);
__d("MRecentSearchesUpdater",["Stratcom"],function(a,b,c,d,e,f,g){var h='search-recent-queries';function i(j){"use strict";j.listen('change',this.changeQuery.bind(this));j.listen('select',this.addRecentSearchWithSelection.bind(this));j.listen('show',this.changeResults.bind(this));j.listen('query',this.addRecentSearchWithQuery.bind(this));j.listen('refreshRecent',this.refreshRecent.bind(this));}i.prototype.refreshRecent=function(){"use strict";g.invoke('refreshRecent',h,{});};i.prototype.changeQuery=function(j){"use strict";this.currentQuery=j;};i.prototype.changeResults=function(j){"use strict";if(j.show){this.results=j.show.slice();}else this.results=j.slice();};i.prototype.addRecentSearchWithQuery=function(){"use strict";g.invoke('addRecentQuery',h,{query:this.currentQuery});};i.prototype.addRecentSearchWithSelection=function(j){"use strict";var k=j&&(j.rel||j.getAttribute('rel'));if(!k){this.addRecentSearchWithQuery();return;}for(var l=0;l<this.results.length;l++)if(this.results[l].id===k)g.invoke('addRecentSearch',h,{result:this.results[l]});};e.exports=i;},null);
__d("MSearchConst",[],function(a,b,c,d,e,f){e.exports={refid:46,feed_search:'feed',news_search:'news',video_search:'video',content_search:'content',msite_news_null_state:'mnns',msite_news_non_gs_null_state:'mnngns',event_click:'click',event_impression:'imp'};},null);
__d("MSearchTypeaheadLogger",["setTimeoutAcrossTransitions","DataStore","DOM","MTouchClick","MRequest","Stratcom","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p){"use strict";this.typeahead=o;this.uri=p;this.initialize();this.emptyQueryResults=[];o.listen('change',function(r){this.startSession(r);if(this.sessionInProgress())this.data.query=r;}.bind(this));o.listen('keypressed',function(r){this.keypressed+=1;}.bind(this));o.listen('select',function(r){var s=r&&(r.rel||r.getAttribute('rel'));this.data.click_event=Date.now();if(s){this.data.selected_id=s;}else this.data.selected_search=1;if(this.results&&this.results.length&&this.data.query&&this.data.query.length)l.invoke('m:search-typeahead:select',null,{node:r,results:this.results.slice(),query:this.data.query.slice()});this.logToServer();}.bind(this));o.listen('show',function(r){this.startSession(this.typeahead.getValue());if(this.sessionInProgress())if(r.show){this.results=r.show.slice();if(!this.typeahead.getValue())this.emptyQueryResults=this.results;}else{this.data.candidate_results=r.slice();if(!this.typeahead.getValue())this.emptyQueryResults=this.data.candidate_results;}}.bind(this));o.listen('query',function(r,s){this.data.selected_search=1;this.data.selected_type=s;this.logToServer();}.bind(this));var q=j.hasTouchEvents()?'touchend':'click';l.listen(q,'search-activator',function(){this.startSession('',{force:true});}.bind(this));l.listen(q,'graph-search-activator',function(){this.startSession('',{force:true});}.bind(this));o.listen('scroll',function(event){this.data.scrolled=1;}.bind(this));}n.prototype.blur=function(o){"use strict";this.blurInProgress=true;g(function(){this.data.abandonment_reason=o;this.logToServer();}.bind(this),0);};n.prototype.startSession=function(o,p){"use strict";p=p||{};if(this.sessionID==null&&(o||p.force)){this.data={};this.keypressed=-1;this.sessionID=Math.random().toString();this.data.query=o;this.data.session_start=Date.now();l.invoke('m-typeahead-logger:new-session-id',null,{sessionID:this.sessionID});}};n.prototype.sessionInProgress=function(){"use strict";if(this.sessionID!==null&&!this.blurInProgress)return true;return false;};n.prototype.logToServer=function(){"use strict";if(this.sessionID){this.data.sid=this.sessionID;this.data.count_keys_pressed=this.keypressed;this.data.typeahead_type=this.typeahead.getTypeaheadType&&this.typeahead.getTypeaheadType();this.data.candidate_results=this.data.candidate_results||[];if(this.data.candidate_results.length===0)for(var o=0;o<this.results.length;o++){var p=this.results[o];if(p.rel>0){var q={id:p.rel};q.type=p.type;q.renderType=p.renderType;try{var s=i.find(p,'a','typeahead-result');if(h.get(s).bootstrap)q.bootstrap=1;}catch(r){}this.data.candidate_results.push(q);}}if(!this.data.query&&(!this.data.candidate_results||this.data.candidate_results.length===0))this.data.candidate_results=this.emptyQueryResults;var t=new k(this.uri);t.setMethod('POST').setData({stats:JSON.stringify(this.data)}).send();}this.initialize();};n.prototype.initialize=function(){"use strict";this.data={};this.sessionID=null;this.keypressed=-1;this.results=[];this.blurInProgress=false;};m(n.prototype,{typeahead:null,data:null,sessionID:null,results:null,uri:null,blurInProgress:null});e.exports=n;},null);
__d("MSearchTypeaheadPerfLogger",["BanzaiScuba","CurrentUser","performanceNow"],function(a,b,c,d,e,f,g,h,i){function j(k,l,m){"use strict";this._searchType=l.type;this._sampleRate=l.sample_rate;this._siteType=l.site;this._cacheEnable=m?1:0;this.init(k);this.initEvents();this._reset();}j.prototype.init=function(k){"use strict";this._data=k.getDatasource();this._typeahead=k;if(this._typeahead.props&&this._typeahead.props.vertical)this._vertical=this._typeahead.props.vertical;};j.prototype.initEvents=function(){"use strict";this._data.listen('initial_render',this.initialRender.bind(this));this._data.listen('after_complete',this.complete.bind(this));this._data.listen('req_dispatch',this.remoteRequestDispatch.bind(this));this._data.listen('req_sent',this.remoteRequestSent.bind(this));this._data.listen('req_recv',this.remoteRequestReceived.bind(this));this._typeahead.listen('update',this.queryStart.bind(this));this._typeahead.listen('render_start',this.renderStart.bind(this));this._typeahead.listen('rendered',this.rendered.bind(this));};j.prototype._reset=function(){"use strict";this._startTime=null;this._intialRenderTime=null;this._remoteRequestDispatchTime=null;this._remoteRequestSentTime=null;this._remoteRequestReceivedTime=null;this._renderStart=null;this._rendered=null;this._endTime=null;this._cacheOnly=1;this._resultLength=0;this._originQuery=null;this._query=null;};j.prototype.initialRender=function(){"use strict";this._intialRenderTime=Date.now();};j.prototype.complete=function(){"use strict";this._endTime=Date.now();this._query=this._typeahead.getValue();this.logToScuba();this._reset();};j.prototype.queryStart=function(k){"use strict";this._reset();this._originQuery=k;this._startTime=Date.now();};j.prototype.renderStart=function(){"use strict";this._renderStart=i();};j.prototype.rendered=function(){"use strict";this._rendered=i()-this._renderStart;};j.prototype.remoteRequestDispatch=function(k){"use strict";this._remoteRequestDispatchTime=Date.now();this._sid=k;};j.prototype.remoteRequestSent=function(){"use strict";this._remoteRequestSentTime=Date.now();};j.prototype.remoteRequestReceived=function(k){"use strict";this._remoteRequestReceivedTime=Date.now();this._resultLength=k;this._cacheOnly=0;};j.prototype.logToScuba=function(){"use strict";if(this._startTime===null)return;if(this._originQuery!==this._query)return;var k=new g('mobile_search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{mtouchGKs:true}});k.addInteger('sample_rate',this._sampleRate);k.addNormal('typeahead_type',this._searchType);k.addNormal('site',this._siteType);if(this._vertical){k.addNormal('vertical',this._vertical);k.addNormal('search_mode',this._typeahead.state.searchMode);}k.addNormal('session_id',this._sid);k.addNormal('user_id',h.getID());k.addNormal('query',this._query);k.addInteger('cache_keypress_render',Math.max(this._intialRenderTime-this._startTime,0));if(this._rendered)k.addInteger('rendered',this._rendered);if(this._cacheOnly===0){k.addInteger('remote_keypress_query_dispatch',Math.max(this._remoteRequestDispatchTime-this._startTime,0));k.addInteger('remote_keypress_query_start',Math.max(this._remoteRequestSentTime-this._startTime,0));k.addInteger('remote_keypress_query_end',Math.max(this._remoteRequestReceivedTime-this._startTime,0));k.addInteger('remote_keypress_render',Math.max(this._endTime-this._startTime,0));k.addInteger('remote_render',Math.max(this._endTime-this._remoteRequestReceivedTime,0));k.addInteger('time_js_async',Math.max(this._remoteRequestReceivedTime-this._remoteRequestSentTime,0));}k.addInteger('end_to_end',Math.max(this._endTime-this._startTime,0));k.addInteger('num_result',this._resultLength);k.addNormal('is_cache_only',this._cacheOnly);k.addNormal('is_cache_enable',this._cacheEnable);k.post();};e.exports=j;},null);
__d("MTypeaheadNullstateSource",["URI","Stratcom","MTypeaheadTouchSource"],function(a,b,c,d,e,f,g,h,i){var j='graph-search-entry-point',k='search-recent-queries';for(var l in i)if(i.hasOwnProperty(l))n[l]=i[l];var m=i===null?null:i.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=i;function n(o,p){"use strict";i.call(this,o,p);h.listen('setCurrentProfileID',j,function(event){if(event.getData().profileID!==this.profileID){this.profileID=event.getData().profileID;this.refresh();}}.bind(this));h.listen('addRecentSearch',k,function(event){var q=event.getData().result;if(q)this.addRecentResult(q);}.bind(this));h.listen('addRecentQuery',k,function(event){var q=event.getData().query;if(q){var r=this.makeRecentResultWithQuery(q);this.addRecentResult(r);}}.bind(this));h.listen('refreshRecent',k,function(){this.refresh();}.bind(this));h.listen('searchRefreshNullstate',null,function(){return this.refresh();}.bind(this));}n.prototype.makeRecentResultWithQuery=function(o){"use strict";return {display:o,name:o,id:o,uri:'/search/?query='+o};};n.prototype.addRecentResult=function(o){"use strict";o.isRecentSearch=true;var p=[],q=0;o.idx=q;p.push(o);for(var r in this._raw)if(r!=o.id){q++;this._raw[r].idx=q;p.push(this._raw[r]);}this._raw=p;};n.prototype.refresh=function(){"use strict";this._raw={};this.sendRequest();};n.prototype.getAuxiliaryData=function(){"use strict";return {profile_id:this.profileID?this.profileID:null,disable_single_state:this.singleStateDisabled?true:false};};n.prototype.ondata=function(o){"use strict";m.ondata.call(this,o.nullstate);};n.prototype.matchResults=function(o){"use strict";var p=[];if(o==='')p=Object.keys(this._raw);this.sortHits(o,p);var q=this.renderNodes(o,p);this.invoke('resultsready',q);this.invoke('complete');};n.prototype.setCurrentProfileID=function(o){"use strict";this.profileID=o;};n.prototype.setForceDisableSingleState=function(o){"use strict";this.singleStateDisabled=o;};n.prototype.sortHits=function(o,p){"use strict";p.sort(this.sortingFunction.bind(this));};n.prototype.sortingFunction=function(o,p){"use strict";var q=this._raw[o],r=isNaN(q.idx)?Number.MAX_VALUE:q.idx,s=this._raw[p],t=isNaN(s.idx)?Number.MAX_VALUE:s.idx;return r-t;};n.prototype.getTransformer=function(){"use strict";return function(o){if(o.type==='trending'){var p=new g('/search/news');p.setQueryData({query:o.name,topicID:o.id,isTrending:true});return {id:o.name,display:o.name,name:o.name,uri:p.toString(),topicID:o.id,trendingQueryID:o.trendingQueryID,subtext:o.articleTitle,type:o.type,photo:o.articleImageURI,actionTime:0,isTrending:true,isNullStateSuggestion:true};}if(o.type==='keyword'||o.type==='grammar'){p=new g(o.path||o.uri);if(o.subscribed_search===true)p.addQueryData({isTrending:true});return {cost:o.cost,idx:o.idx,display:o.text,name:o.text,type:'keyword',id:o.uid,uri:p.toString(),actionTime:o.action_time,isRelatedSearch:o.related_search,isRecentSearch:o.recent_search,isSuggestedSearch:o.suggested_search,isSubscribedSearch:o.subscribed_search,subtext:o.subtext,logInfo:o.logInfo,isNullStateSuggestion:true};}return {actionTime:o.action_time,name:o.text,uri:o.path||o.uri,id:o.uid||o.id,display:o.name||o.text,photo:o.photo,category:o.category,cost:o.cost,idx:o.idx,tokens:o.tokens,type:o.type[0].toUpperCase()+o.type.slice(1),verticalType:o.vertical_type,subtext:o.subtext,isRecentSearch:o.recent_search,isSubscribedSearch:o.subscribed_search,logInfo:o.logInfo,isNullStateSuggestion:true};};};e.exports=n;},null);
__d("MReactTypeahead",["DOM","EventEmitter","MPageController","Parent","React","Stratcom","URI","Vector","MReactTypeaheadView","MRecentSearchesUpdater","MSearchConst","MSearchTypeaheadLogger","MSearchTypeaheadPerfLogger","MTypeaheadNullstateSource","MTypeaheadOnDemandSource","MTypeaheadTouchSource","MTypeaheadTouchSourceWithSuggestions","TypeaheadCompositeSource","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';var z=k.PropTypes,aa=10,ba=k.createClass({displayName:"MReactTypeahead",_datasource:null,_datasourceListeners:null,_eventEmitter:null,propTypes:{onClickItem:z.func,onBlur:z.func,onKeyUp:z.func,onKeyDown:z.func,onTouchStart:z.func,placeholder:z.string,presenter:z.object.isRequired,showClearButton:z.bool,typeaheadConfig:z.object.isRequired,excludedEntries:z.object,getTypeaheadOnDemandSource:z.func,getTypeaheadTouchSource:z.func,getTypeaheadCompositeSource:z.func,getTypeaheadNullstateSource:z.func,onFocus:z.func,simpleSearch:z.bool,suggestions:z.array,hideSelected:z.bool,maxSuggestionCount:z.number},shouldComponentUpdate:function(ca,da){if(this.state.resultData!==da.resultData||this.state.waiting!==da.waiting)return true;var ea=ca.excludedEntries,fa=this.props.excludedEntries;for(var ga in ea)if(ea[ga]!==fa[ga])return true;for(var ha in fa)if(fa[ha]!==ea[ha])return true;return false;},componentDidMount:function(){this.refs.input.type="search";},componentWillUpdate:function(){this._invoke('render_start');},componentDidUpdate:function(ca,da){this.props.onUpdate&&this.props.onUpdate();this._invoke('rendered');},getInitialState:function(){return {resultData:[],query:null,waiting:false};},listen:function(ca,da){this._eventEmitter=this._eventEmitter||new h();return this._eventEmitter.addListener(ca,da.bind(this));},_invoke:function(ca,da){this._eventEmitter&&this._eventEmitter.emit.apply(this._eventEmitter,[ca].concat(da));},waitForResults:function(){this.setState({waiting:true});},showResults:function(ca){if(this.props.hideSelected)ca=this._filterExcluded(ca);ca.forEach(function(da){da.uri=new m(da.uri).addQueryData('refid',q.refid);return da;});this.setState({resultData:ca,waiting:true},this._checkQueryState);this._invoke('show',[ca]);},_filterExcluded:function(ca){var da=this.props.excludedEntries;if(da)return ca.filter(function(ea){return !da[ea.id];});return ca;},_checkQueryState:function(){if(this.state.query==null)this.setState({waiting:false});},complete:function(){this.setState({waiting:false});},reset:function(){this.refs.input.getDOMNode().value='';this.query('',true);},query:function(ca,da){da=da||false;if(da||this.state.query!==ca){this._invoke('update',[ca]);this._invoke('change',[ca]);this.setState({query:ca});}},inputChanged:function(){if(this.refs.input.getDOMNode().value==='')this.query('');},onSearchFormSubmit:function(event){event.preventDefault();var ca=this.refs.input.getDOMNode(),da=ca.value;this._invoke('query',[this.state.resultData]);var ea=new m('/search/?query').addQueryData('query',da).toString();i.load(ea);},render:function(){var ca=this.props.showClearButton&&this.state.query,da=this.props.typeaheadRootClassName||"_5fn4",ea=k.createElement("input",{type:"search",ref:"input",className:"input",autoCorrect:"off",autoComplete:"off",autoCapitalize:"off",name:"query",placeholder:this.props.placeholder,onBlur:this.props.onBlur,onKeyUp:this.onKeyUp,onKeyDown:this.props.onKeyDown,onFocus:this._onFocus,onChange:this.inputChanged});if(this.props.typeaheadConfig.submitOnEnter)ea=k.createElement("form",{ref:"searchForm",action:"/search",className:"_4e7a",onSubmit:this.onSearchFormSubmit},ea,k.createElement("input",{type:"hidden",name:"source",value:"typeahead"}));var fa="_5fn6 touchable";if(this.props.useStandardClearButton)fa="_5fn6 touchable mClearButton";var ga=this.props.hideSelected?this._filterExcluded(this.state.resultData):this.state.resultData;return (k.createElement("div",{className:this.props.className},k.createElement("div",{className:da},k.createElement("div",{className:"_5fn5"},ea,k.createElement("div",{className:fa,"data-sigil":"touchable",style:{display:ca?'':'none'},onMouseDown:this.onClearButtonEvent,onTouchStart:this.onClearButtonEvent},k.createElement("div",null,"×")))),k.createElement(o,{ref:"results",Renderer:this.props.presenter.ViewRenderer,data:ga,excludedEntries:this.props.excludedEntries,query:this.state.query,waiting:this.state.waiting,loaderMarkup:this.props.typeaheadConfig.loaderMarkup,onTouchStart:this.props.onTouchStart,simpleSearch:this.props.simpleSearch,onClickItem:this._onClickItem})));},setInputValue:function(ca){if(ca)this.refs.input.getDOMNode().value=ca;},onKeyUp:function(event){var ca=this.getInputValue();this.query(ca);this.props.onKeyUp&&this.props.onKeyUp(event);},onClearButtonEvent:function(event){event.preventDefault();this.reset();this.focusInput();},getInputValue:function(){return this.refs.input.getDOMNode().value;},getInputNode:function(){return this.refs.input.getDOMNode();},getValue:function(){return this.getInputValue();},focusInput:function(){this.refs.input.getDOMNode().focus();},blurInput:function(){this.refs.input.getDOMNode().blur();},_onClickItem:function(event,ca,da){this.reset();this.props.onClickItem&&this.props.onClickItem(event,ca,da);this._invoke('select',[j.byClass(event.target,"_5fna")]);this.forceUpdate();},getDisplayedHeight:function(){var ca=this.refs.results.getDOMNode(),da=n.getPos(ca).y;return n.getDim(ca).y+da;},getDatasource:function(){return this._datasource;},_setDatasource:function(ca){if(this._datasource)this._datasource.unbindFromTypeahead(this);this._datasource=ca;if(!this._datasource)return;this._datasourceListeners=[ca.listen('waiting',this.waitForResults),ca.listen('resultsready',this.showResults),ca.listen('complete',this.complete)];ca.bindToTypeahead(this);},configureDatasource:function(ca){if(this._datasource)return;var da=this.props.typeaheadConfig.sources,ea=[],fa=this.getTypeaheadTouchSource(da.bootstrapped.src,da.bootstrapped.source_key,this.props.suggestions);fa.setShowSecondaryAction(true);fa.reactRendered=true;this.touchSource=fa;ea.push(fa);if(da.nullstate){this.nullstateDataSource=this.getTypeaheadNullstateSource(da.nullstate.src);this.nullstateDataSource.setMaximumResultCount(da.nullstate.max_results);this.nullstateDataSource.setShowSecondaryAction(true);this.nullstateDataSource.reactRendered=true;ea.push(this.nullstateDataSource);}fa=this.getTypeaheadOnDemandSource(da.online.src);fa.setMaximumResultCount(da.online.max_results);fa.setEnableImmediateReturnOfCachedResults(da.online.enable_caching);if(ca){if(ca.enableQueryThrottle)fa.setThrottleSendRequest(ca.queryThrottleTime);fa.setMaxResults(ca.maxResults);fa.setEnableEagerSendRequest(ca.enableEagerSendRequest);fa.setQueryDelay(ca.queryWaitTime);}fa.setShowSecondaryAction(true);fa.reactRendered=true;ea.push(fa);var ga=this.getTypeaheadCompositeSource(ea);if(this.props.typeaheadConfig.excludeids)this.props.typeaheadConfig.excludeids.forEach(function(ha){ga.addExcludeID(ha);});ga.reactRendered=true;ga.mergeKey='id';this._setDatasource(ga);this._invoke('start');},cleanup:function(){this._setDatasource(null);},configureMSideNavMarauderLogger:function(){if(!this.props.typeaheadConfig.mSideNavMarauderLogger||this._mSideNavMarauderLoggerConfigurationComplete)return;this.props.typeaheadConfig.mSideNavMarauderLogger.setupTypeaheadListener(this);this._mSideNavMarauderLoggerConfigurationComplete=true;},configureMRecentSearchesUpdater:function(){if(this.props.typeaheadConfig.hasRecentSearches)new p(this);},configureMSearchTypeaheadLogger:function(){if(this._mSearchTypeaheadLoggerConfigurationComplete)return;l.listen('m-typeahead-logger:new-session-id',null,this.addSessionIDToSearch);var ca='/search/metrics.php',da=new r(this,ca);this._mSearchTypeaheadLoggerConfigurationComplete=true;l.listen('log-m-search-session-end',null,function(ea){da.blur(ea.getData().reason);});},configureMSearchTypeaheadPerfLogger:function(){if(!this.props.typeaheadConfig.typeaheadScubaInfo||this._mSearchTypeaheadPerfLoggerConfigurationComplete)return;new s(this,this.props.typeaheadConfig.typeaheadScubaInfo,this.props.typeaheadConfig.sources.online.enable_caching);this._mSearchTypeaheadPerfLoggerConfigurationComplete=true;},addSessionIDToSearch:function(ca){if(!this.refs||!this.refs.searchForm)return;var da=this.refs.searchForm.getDOMNode(),ea=g.scry(da,'input','search-typeahead-session-id')[0];if(!ea){ea=document.createElement('input');ea.type='hidden';ea.name='tsid';da.appendChild(ea);l.addSigil(ea,'search-typeahead-session-id');}ea.value=ca.getData().sessionID;},getTypeaheadCompositeSource:function(ca){if(this.props.getTypeaheadCompositeSource)return this.props.getTypeaheadCompositeSource(ca);return new x(ca);},getTypeaheadOnDemandSource:function(ca){if(this.props.getTypeaheadOnDemandSource)return this.props.getTypeaheadOnDemandSource(ca);return new u(ca);},getTypeaheadTouchSource:function(ca,da,ea){if(this.props.getTypeaheadTouchSource)return this.props.getTypeaheadTouchSource(ca,da);if(ea){var fa=new w(ca,da,ea);if(this.props.maxSuggestionCount){fa.setMaximumResultCount(this.props.maxSuggestionCount);}else fa.setMaximumResultCount(aa);return fa;}return new v(ca,da);},getTypeaheadNullstateSource:function(ca){if(this.props.getTypeaheadNullstateSource)return this.props.getTypeaheadNullstateSource(ca);return new t(ca);},getTypeaheadType:function(){var ca='m_side_nav';if(this.props.simpleSearch){ca+='_simple';}else ca+='_gsv2';return ca;},updateSuggestionsIds:function(ca){if(this.touchSource)this.touchSource.setSuggestionsIds(ca);if(this.refs.input.getDOMNode().value==='')this.reset();},componentWillUnmount:function(){for(var ca=0;ca<this._datasourceListeners.length;++ca)this._datasourceListeners[ca].remove();this._datasourceListeners=null;},_onFocus:function(){this.props.onFocus&&this.props.onFocus();this.query(this.getInputValue());}});e.exports=ba;},null);
__d("MCompositionConstants",["keyMirror"],function(a,b,c,d,e,f,g){e.exports={ActionTypes:g({CLOSE_DIALOG:null,COMPOSITION_FINALIZE:null,COMPOSITION_INITIALIZE:null,DISABLE_PHOTOS:null,MINUTIAE_REMOVE:null,MINUTIAE_SET:null,PHOTO_CHANGE:null,PLACE_REMOVE:null,PLACE_SET:null,PRIVACY_CHANGE:null,GROUP_SELL_UPDATE:null,SHARE_LINK_UPDATE:null,STATUS_CHANGE:null,SHARE_REMOVE_PREVIEW:null,WITH_CHANGE:null}),PayloadSources:g({USER_ACTION:null})};},null);
__d("Dispatcher",["invariant"],function(a,b,c,d,e,f,g){"use strict";var h=1,i='ID_';function j(){this.$Dispatcher0={};this.$Dispatcher1={};this.$Dispatcher2={};this.$Dispatcher3=false;this.$Dispatcher4=null;}j.prototype.register=function(k){var l=i+h++;this.$Dispatcher0[l]=k;return l;};j.prototype.unregister=function(k){g(this.$Dispatcher0[k]);delete this.$Dispatcher0[k];};j.prototype.waitFor=function(k){g(this.$Dispatcher3);for(var l=0;l<k.length;l++){var m=k[l];if(this.$Dispatcher1[m]){g(this.$Dispatcher2[m]);continue;}g(this.$Dispatcher0[m]);this.$Dispatcher5(m);}};j.prototype.dispatch=function(k){g(!this.$Dispatcher3);this.$Dispatcher6(k);try{for(var l in this.$Dispatcher0){if(this.$Dispatcher1[l])continue;this.$Dispatcher5(l);}}finally{this.$Dispatcher7();}};j.prototype.isDispatching=function(){return this.$Dispatcher3;};j.prototype.$Dispatcher5=function(k){this.$Dispatcher1[k]=true;this.$Dispatcher0[k](this.$Dispatcher4);this.$Dispatcher2[k]=true;};j.prototype.$Dispatcher6=function(k){for(var l in this.$Dispatcher0){this.$Dispatcher1[l]=false;this.$Dispatcher2[l]=false;}this.$Dispatcher4=k;this.$Dispatcher3=true;};j.prototype.$Dispatcher7=function(){this.$Dispatcher4=null;this.$Dispatcher3=false;};e.exports=j;},null);
__d("MCompositionDispatcher",["Dispatcher","copyProperties","createObjectFrom","getObjectValues","invariant","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('MCompositionConstants').ActionTypes,m=b('MCompositionConstants').PayloadSources,n=i(j(l));function o(q){return function(r){k(!!r.data);k(!!r.actionType);k(n.hasOwnProperty(r.actionType));this.dispatch({action:r,paylodSource:q});};}var p=h(new g(),{handleUpdateFromUserAction:o(m.USER_ACTION)});e.exports=p;},null);
__d("MCompositionUserActions",["MComposition","MCompositionConfigFields","MCompositionDispatcher","MCompositionShareFields","MCompositionStoreID","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('MCompositionConstants').ActionTypes;function m(o,p){i.handleUpdateFromUserAction({actionType:o,data:p});}var n={configDisablePhotosUpdate:function(o){var p={};p[k.CONFIG]={};p[k.CONFIG][h.DISABLE_PHOTOS]=o;m(l.DISABLE_PHOTOS,p);},finalize:function(){m(l.COMPOSITION_FINALIZE,{});},initialize:function(o){m(l.COMPOSITION_INITIALIZE,o||{});},shareLinkUpdate:function(o){var p={};p[k.SHARE]={};p[k.SHARE][j.SHARE_URI]=o;m(l.SHARE_LINK_UPDATE,p);},shareRemoveLinkPreview:function(o){var p={};p[o]=true;var q={};q[k.SHARE]={};q[k.SHARE][j.DISABLED_LINKS]=p;m(l.SHARE_REMOVE_PREVIEW,q);},minutiaeRemove:function(){m(l.MINUTIAE_REMOVE,{});},minutiaeSet:function(o){var p={};p[k.MINUTIAE]=o;m(l.MINUTIAE_SET,p);},photoUpdate:function(o){var p={};p[k.PHOTO]=o;m(l.PHOTO_CHANGE,p);},placeRemove:function(){m(l.PLACE_REMOVE,{});},placeSet:function(o){m(l.PLACE_SET,new g().setStoreData(k.PLACE,o).serialize());},statusUpdate:function(o){m(l.STATUS_CHANGE,new g().setStoreData(k.STATUS,o).serialize());},withUpdate:function(o){var p={};p[k.WITH_TAGS]=o;m(l.WITH_CHANGE,p);},groupSellUpdate:function(o){m(l.GROUP_SELL_UPDATE,new g().setStoreData(k.GROUP_SELL,o).serialize());},privacyUpdate:function(o){var p={};p[k.PRIVACY]=o;m(l.PRIVACY_CHANGE,p);}};e.exports=n;},null);
__d("MCompositionStore",["ImmutableObject","MCompositionDispatcher","createObjectFrom","getObjectValues","invariant","mixInEventEmitter","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('MCompositionConstants').ActionTypes,n={};function o(p,q){"use strict";k(!n.hasOwnProperty(p));this.$MCompositionStore0=null;this.$MCompositionStore1=null;this.$MCompositionStore2=q;this.$MCompositionStore3={};this.$MCompositionStore4=null;this.$MCompositionStore5=null;this.$MCompositionStore6=p;this.$MCompositionStore7=false;this.$MCompositionStore8=i(j(q));}o.prototype.setMutable=function(p){"use strict";this.$MCompositionStore9();this.$MCompositionStore7=p;return this;};o.prototype.addChangeListener=function(p){"use strict";return this.addListener('change',p);};o.prototype.$MCompositionStorea=function(p){"use strict";k(this.hasField(p));};o.prototype.$MCompositionStoreb=function(){"use strict";k(this.$MCompositionStore1&&n.hasOwnProperty(this.$MCompositionStore6));};o.prototype.$MCompositionStorec=function(p){"use strict";if(!p||!this.$MCompositionStore5)return;Object.keys(this.$MCompositionStore5).forEach(function(q){k(p.hasOwnProperty(q));});};o.prototype.$MCompositionStore9=function(){"use strict";k(!this.$MCompositionStore1&&!n.hasOwnProperty(this.$MCompositionStore6));};o.prototype.get=function(p,q){"use strict";this.$MCompositionStoreb();this.$MCompositionStorea(p);if(this.$MCompositionStore0&&this.$MCompositionStore0.hasOwnProperty(p)){return this.$MCompositionStore0[p];}else if(q!==(void 0)){return q;}else return null;};o.prototype.getAll=function(){"use strict";this.$MCompositionStoreb();return this.$MCompositionStore0||new g();};o.prototype.getID=function(){"use strict";return this.$MCompositionStore6;};o.getRegisteredStores=function(){"use strict";return j(n);};o.prototype.$MCompositionStored=function(p){"use strict";var q=p.action,r=q.actionType,s=q.data;if(!this.$MCompositionStoree(r))return;this.$MCompositionStoref(this.$MCompositionStore3[r].call(null,s[this.$MCompositionStore6]||null));this.emit('change');};o.prototype.hasField=function(p){"use strict";return this.$MCompositionStore8.hasOwnProperty(p);};o.prototype.$MCompositionStoree=function(p){"use strict";return this.$MCompositionStore3.hasOwnProperty(p);};o.prototype.isEmpty=function(){"use strict";this.$MCompositionStoreb();return !this.$MCompositionStore0;};o.prototype.register=function(){"use strict";k(!this.$MCompositionStore1);this.$MCompositionStore1=h.register(this.$MCompositionStored.bind(this));n[this.$MCompositionStore6]=this;return this;};o.prototype.$MCompositionStoref=function(p){"use strict";if(p){this.$MCompositionStorec(p);Object.keys(p).forEach(function(q){return this.$MCompositionStorea(q);}.bind(this));if(this.$MCompositionStore7){this.$MCompositionStore0=p;}else this.$MCompositionStore0=new g(p);}else this.$MCompositionStore0=null;return this;};o.prototype.setHandlerFor=function(p,q){"use strict";this.$MCompositionStore9();k(m.hasOwnProperty(p));k(!this.$MCompositionStoree(p));this.$MCompositionStore3[p]=q;return this;};o.prototype.setRequiredFields=function(){"use strict";for(var p=[],q=0,r=arguments.length;q<r;q++)p.push(arguments[q]);this.$MCompositionStore9();p.forEach(function(s){return this.$MCompositionStorea(s);}.bind(this));this.$MCompositionStore5=i(p);return this;};o.prototype.toUpdate=function(){"use strict";this.$MCompositionStoreb();return this.$MCompositionStore1;};l(o,{change:true});e.exports=o;},null);
__d("MCompositionConfigStore",["MCompositionStore","MCompositionConfigFields","MCompositionStoreID","emptyFunction","invariant","merge","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('MCompositionConstants').ActionTypes;function n(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(p){var q=Math.random()*16|0,r=p=='x'?q:(q&3|8);return r.toString(16);});}var o=new g(i.CONFIG,h).setRequiredFields(h.ACTION,h.BUTTON_TEXT_SUBMIT,h.COMPOSER_TITLE,h.OPENED_AT,h.SESSION_ID).setHandlerFor(m.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(m.COMPOSITION_INITIALIZE,function(p){p=p||{};p[h.SESSION_ID]=n();p[h.OPENED_AT]=Date.now();return p;}).setHandlerFor(m.DISABLE_PHOTOS,function(p){var q=p&&p[h.DISABLE_PHOTOS];k(q!==(void 0)&&q!==null);var r={};r[h.DISABLE_PHOTOS]=q;return l(o.getAll(),r);}).register();e.exports=o;},null);
__d("MCompositionPhotoStore",["MCompositionStore","MCompositionPhotoFields","MCompositionStoreID","emptyFunction","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j){var k=b('MCompositionConstants').ActionTypes,l=new g(i.PHOTO,h).setMutable(true).setHandlerFor(k.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(k.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(k.PHOTO_CHANGE,j.thatReturnsArgument).register();e.exports=l;},null);
__d("MCompositionPrivacyStore",["MCompositionStore","MCompositionPrivacyFields","MCompositionStoreID","emptyFunction","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j){var k=b('MCompositionConstants').ActionTypes,l=new g(i.PRIVACY,h).setRequiredFields(h.PRIVACY_FBID).setHandlerFor(k.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(k.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(k.PRIVACY_CHANGE,j.thatReturnsArgument).register();e.exports=l;},null);
__d("MComposerLoggerSpecialCases",["MarauderLogger","MComposerWaterfallEvent"],function(a,b,c,d,e,f,g,h){var i={};function j(event,k){i[event]=k;}j(h.COMPOSER_CANCEL,function(k){g.toggleModule('composer',false);return k;});j(h.COMPOSER_ENTRY,function(k){g.toggleModule('composer',true);return k;});j(h.COMPOSER_POST,function(k){switch(g.getNavigationModule()){case 'newsfeed':k.nectar_module='newsfeed_composer';break;case 'timeline':k.nectar_module='timeline_composer';break;default:k.nectar_module='unspecified_source';}g.toggleModule('composer',false);return k;});e.exports=i;},null);
__d("MComposerLogger",["ErrorUtils","MComposerConfig","MComposerWaterfallEvent","MCompositionConfigFields","MCompositionConfigStore","Promise","createObjectFrom","getObjectValues","invariant","memoize"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=m(n(i)),r=p(function(){return new l(function(u){if(h.ENABLE_LOGGING){d(['MarauderLogger','MComposerLoggerSpecialCases'],function(){for(var v=[],w=0,x=arguments.length;w<x;w++)v.push(arguments[w]);return u(v);});}else u();});});function s(event,u,v,w,x){var y=x[0],z=x[1];if(z.hasOwnProperty(event))u=z[event].call(null,u);y.log(event,'composer',u,null,null,v,w);}var t={log:g.guard(function(event,u){o(q.hasOwnProperty(event));if(k.isEmpty())return;var v=k.get(j.SESSION_ID,null);o(v!==null);return t.logWithSessionID(event,v,u);},'MComposerLogger',t),logWithSessionID:g.guard(function(event,u,v){if(h.ENABLE_LOGGING){return r().then(s.bind(null,event,v||{},u,Date.now()));}else return r();})};e.exports=t;},null);
__d("MComposerNavigationPolicy",["invariant"],function(a,b,c,d,e,f,g){function h(j){j.forEach(function(k){return k.call();});}function i(j){"use strict";this.$MComposerNavigationPolicy0=false;this.$MComposerNavigationPolicy1=false;this.$MComposerNavigationPolicy2=false;this.$MComposerNavigationPolicy3=[];this.$MComposerNavigationPolicy4=[];this.$MComposerNavigationPolicy5=[];this.$MComposerNavigationPolicy6=[];this.$MComposerNavigationPolicy7=[];this.$MComposerNavigationPolicy8=j||null;}i.prototype.addOnClose=function(j){"use strict";this.$MComposerNavigationPolicy4.push(j);return this;};i.prototype.addOnCloseByBrowser=function(j){"use strict";this.$MComposerNavigationPolicy3.push(j);return this;};i.prototype.addOnOpen=function(j){"use strict";this.$MComposerNavigationPolicy6.push(j);return this;};i.prototype.addOnOpenChild=function(j){"use strict";this.$MComposerNavigationPolicy7.push(j);return this;};i.prototype.addOnReturnFromChild=function(j){"use strict";this.$MComposerNavigationPolicy5.push(j);return this;};i.prototype.close=function(){"use strict";g(this.$MComposerNavigationPolicy1);g(!this.$MComposerNavigationPolicy0);this.$MComposerNavigationPolicy0=true;h(this.$MComposerNavigationPolicy4);if(this.$MComposerNavigationPolicy8)this.$MComposerNavigationPolicy8.returnFromChild();return this;};i.prototype.closeByBrowser=function(){"use strict";h(this.$MComposerNavigationPolicy3);this.close();return this;};i.prototype.destroy=function(){"use strict";if(this.$MComposerNavigationPolicy8){this.$MComposerNavigationPolicy8.destroy();this.$MComposerNavigationPolicy8=null;}};i.prototype.setIsOnSubmit=function(){"use strict";this.$MComposerNavigationPolicy2=true;};i.prototype.isOnSubmit=function(){"use strict";return this.$MComposerNavigationPolicy2;};i.prototype.getParent=function(){"use strict";return this.$MComposerNavigationPolicy8;};i.prototype.hasClosed=function(){"use strict";return this.$MComposerNavigationPolicy0;};i.prototype.hasOpened=function(){"use strict";return this.$MComposerNavigationPolicy1;};i.prototype.open=function(){"use strict";g(!this.$MComposerNavigationPolicy1);this.$MComposerNavigationPolicy1=true;if(this.$MComposerNavigationPolicy8)this.$MComposerNavigationPolicy8.openChild();h(this.$MComposerNavigationPolicy6);return this;};i.prototype.openChild=function(){"use strict";h(this.$MComposerNavigationPolicy7);return this;};i.prototype.returnFromChild=function(){"use strict";h(this.$MComposerNavigationPolicy5);return this;};e.exports=i;},null);
__d("MComposerNavigation",["MComposerNavigationConstants","MComposerNavigationPolicy","MHistory","MURI","Stratcom","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m='mds',n='composer';function o(){l(!p||p.hasOpened());}var p=null,q={currentPolicy:function(){o();return p;},newPolicy:function(){o();if(!p&&g.USE_PUSH_STATE)i.pushSoftState(n);var s=new h(p);p=s;s.addOnClose(function(){p=s.getParent();if(!p&&!s.isOnSubmit()&&g.USE_PUSH_STATE)i.popSoftState(n);});return s;},cleanupSoftState:function(){if(g.USE_PUSH_STATE)i.popSoftState(n);}},r=false;if(g.USE_PUSH_STATE)k.listen('m:history:change',null,function(event){var s=event.getData().soft;if(!p||s===n)return;var t=new j(event.getData().path).getQueryData().hasOwnProperty(m);if(!r&&t){r=true;p.openChild();return;}if(r&&!t){r=false;i.pushSoftState(n);p.returnFromChild();return;}if(r&&t)return;if(p.getParent())i.pushSoftState(n);p.closeByBrowser();});k.listen('m:page:unload',null,function(){if(p&&p.destroy)p.destroy();p=null;});e.exports=q;},null);
__d("MPlacesAddView",["DOM","FBJSON","MPlacesCategorySelector","MRequest","Stratcom","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,aa=null,ba=null,ca=null,da=null,ea=null,fa=null,ga=true,ha={init:function(ia){m=l(ia);if(!m)return;s=g.scry(m,'div','places-category-selector-container')[0];if(s){p=new i(s);o=g.find(m,'div','add-place-form');t=g.find(m,'div','new-place-name');u=g.find(t,'input','');v=g.find(m,'div','new-place-address');w=g.find(v,'input','');x=g.find(m,'div','new-place-phone');y=g.find(x,'input','');z=g.find(m,'div','new-place-website');aa=g.find(z,'input','');da=g.scry(m,'input','is_current')[0];q=g.find(m,'span','category_input_display_text');r=g.scry(m,'input','category_input_value')[0];ba=g.scry(m.parentNode.parentNode,'div','place-header')[0];ca=g.find(m,'div','address-error-box');}else u=g.find(m,'input','new-place-name');n=g.find(m,'button','add_place_submit');this._listeners=[k.listen('click','add_place_submit',ha._verifyAndSubmitAddPlace.bind(this)),k.listen('MStructuredComposer:cleanup',null,ha._cleanup.bind(this)),k.listen('m:places:map:move',null,function(event){ea=event.getData().lat;fa=event.getData().lng;}),k.listen('m:places:map:render',null,function(event){var ja=h.parse(event.getData(),e.id);ea=ja.latitude;fa=ja.longitude;})];u.addEventListener('focus',function(){if(ga){u.blur();ga=false;}});if(s){this._listeners.push(k.listen('click','category-selector',ha._showCategorySelector.bind(this)));this._listeners.push(p.listen('cancel',ha._cancelCategorySelector.bind(this)));this._listeners.push(p.listen('submit',ha._submitCategorySelector.bind(this)));}},_cleanup:function(){while(this._listeners.length)this._listeners.pop().remove();if(p)p.cleanup();},_showCategorySelector:function(event){if(ba)g.hide(ba);g.hide(o);g.show(s);event.kill();},_showAddButton:function(){if(!r.value)return false;return true;},_updateCategorySelector:function(ia){if(q&&ia){var ja=ia.category_name,ka=ia.category_value;g.setContent(q,ja);if(ka.length!==0){r.value=ka;if(n.disabled&&ha._showAddButton())n.disabled=false;}}},_submitCategorySelector:function(event){ha._updateCategorySelector(event);g.hide(s);g.show(o);k.invoke('m:places:addplace:show');ga=true;if(ba)g.show(ba);},_cancelCategorySelector:function(){g.hide(s);g.show(o);k.invoke('m:places:addplace:show');ga=true;if(ba)g.show(ba);},_verifyAndSubmitAddPlace:function(event){var ia={new_place:true,name:u.value};if(s){ia.phone=y.value;ia.address=w.value;ia.website=aa.value;}ia.is_current=true;if(da)ia.is_current=da.checked;if(ea){ia.latitude=ea;ia.longitude=fa;}if(r){ia.topic_tokens=r;}else{var ja=g.scry(m,'span','token');ia.topic_tokens=ja;}if(ia.address){var ka=new j('/places/addform/verifyaddress.php');ka.listen('done',function(la){if(la.actions.length===1){this._submitData(ia,event);}else event.kill();}.bind(this));ka.setData({address:ia.address,latitude:ia.latitude,longitude:ia.longitude,target_id:ca.id}).setMethod('GET').send();}else this._submitData(ia,event);},_submitData:function(ia,event){if(ia.name.length!==0){g.hide(m);k.invoke('m:places:addform:submit',null,ia);}else event.kill();}};e.exports=ha;},null);
__d("MEditComposerEntry",["MComposition","MComposerLogger","MComposerWaterfallEvent","MComposerEntry","MComposerNavigation","MRequest"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={invoke:function(n,o,p){var q=new g(n),r=new l(o);j.invoke(q).then(function(s){s.xc_edit_callsite=p;var t=s.csid;r.listen('done',this._onSuccess.bind(this,t));r.listen('error',this._onError.bind(this,t));r.setData(s);r.setAutoRetry(true);r.setMethod('POST');r.listen('postprocess',function(u){k.cleanupSoftState();});r.send();}.bind(this));},_onSuccess:function(n){if(!h.logWithSessionID)return;h.logWithSessionID(i.COMPOSER_POST_SUCCESS,n);},_onError:function(n){if(!h.logWithSessionID)return;h.logWithSessionID(i.COMPOSER_POST_FAILURE,n);}};e.exports=m;},null);
__d("DocumentSnapShot",["ErrorUtils"],function(a,b,c,d,e,f,g){var h;if('nextElementSibling' in document.documentElement){h=function(k){return k.nextElementSibling;};}else h=function(k){var l=k.nextSibling;while(l&&l.nodeType!==1)l=l.nextSibling;return l;};function i(k,l,m){var n=k,o=0,p=1,q=p,r=0,s,t=[];while(!(r===0&&q===o))switch(q){case p:s=false;s=m?g.applyWithGuard(m,a,[n],null,'traverse-filter'):true;t.push([r,n]);if(s)while(t.length>0)g.applyWithGuard(l,a,t.shift(),null,'traverse-walker');if(n.children.length>0){n=n.children[0];r++;}else q=o;break;case o:if(!s)t.pop();if(h(n)){n=h(n);q=p;}else{n=n.parentNode;r--;}break;}}function j(k){var l=[],m=function(o,p){l.push(new Array(o+1).join('  ')+p.tagName.toLowerCase()+(p.id?' id="'+p.id+'"':'')+(p.className?' class="'+p.className+'"':'')+(p.hasAttribute('data-sigil')?' sigil="'+p.getAttribute('data-sigil')+'"':''));},n=function(o){return !!(o.id||o.className||o.hasAttribute('data-sigil'));};i(k||document.documentElement,m,n);return l.join('\n');}e.exports.capture=j;},null);
__d("MBugNub",["DOM","ErrorUtils","LogHistory","MBugNubConfig","MURI","Stratcom","DocumentSnapShot"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n,o,p=[],q=[],r=[],s=a.location;if(j.uri)n=new k(j.uri).getPath();l.listen('history:change',null,function(fa){if(!t())s=a.location;});function t(fa){var ga=new k(n),ha=new k(fa||a.location);return (ha.normalize().getPath()===ga.normalize().getPath());}function u(fa){if(!j.graph_search||!j.search||!j.graph_search_feedback)return false;var ga=(new k(j.graph_search)).getPath(),ha=(new k(j.search)).getPath(),ia=new k(fa||a.location),ja=ia.normalize().getPath();return (ja.lastIndexOf(ga)===0||ja.lastIndexOf(ha)===0);}function v(){return x(j.graph_search_feedback);}function w(fa,ga,ha){return x(n,fa,ga,ha);}function x(fa,ga,ha,ia){var ja=new k(fa);ja.addQueryData('uri',new k(s).normalize().toString());ja.addQueryData('source',ga);ja.addQueryData('description',ha);ja.addQueryData('st',ia);return ja.toString();}function y(){if(a.FB_GKS.m_js_html_snapshot)o=m.capture();r=i.getEntries().slice();}function z(){return o;}function aa(fa){return r.slice(fa?Math.max(r.length-fa,0):0);}function ba(fa){p.push(fa);}function ca(fa){return p.slice(fa?Math.max(p.length-fa,0):0);}function da(fa,ga,ha,ia){var ja=document.getElementById(ga),ka=document.getElementById(ha),la=document.getElementById(ia),ma=document.getElementById(fa);if(ma){var na=z();if(na){var oa=g.find(ma,"input");oa.value=na;}else g.hide(ma);}var pa=ca(5);if(pa.length>0)ja.value='\n'+pa.map(function(ra){return ('  Message: '+ra.message+'\n'+(ra.guard?'  Guard: '+ra.guard+'\n':'')+(ra.stack?'  Stack: '+ra.stack+'\n':''));}).join('\n  --\n');var qa=aa(100);if(qa.length>0)ka.value='\n'+i.formatEntries(qa);if(q.length>0)la.value=JSON.stringify(q);}h.addListener(ba);function ea(fa,ga){q.push({queryId:fa,serialized:ga});}e.exports={isReportURI:t,getReportURI:w,isGraphSearchResult:u,getGraphSearchFeedbackURI:v,captureState:y,pushError:ba,fillValueInInputs:da,logFeedItem:ea};},null);
__d("Utf16",[],function(a,b,c,d,e,f){var g={decode:function(h){switch(h.length){case 1:return h.charCodeAt(0);case 2:return 65536|((h.charCodeAt(0)-55296)*1024)|(h.charCodeAt(1)-56320);}},encode:function(h){if(h<65536){return String.fromCharCode(h);}else return String.fromCharCode(55296+((h-65536)>>10))+String.fromCharCode(56320+(h%1024));}};e.exports=g;},null);
__d("SupportedEmoji",["cx","Utf16"],function(a,b,c,d,e,f,g,h){var i=new RegExp("([\u203C\u2049\u2100-\u21FF\u2300-\u27FF"+"\u2900-\u29FF\u2B00-\u2BFF\u3000-\u30FF\u3200-\u32FF]|"+"\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])([\uFE00-\uFE0F])?"),j={126980:"_4_o0",127378:"_4_o1",127385:"_4_o2",127386:"_4_o3",127489:"_4_o4",127490:"_4_o5",127514:"_4_o6",127535:"_4_o7",127539:"_4_o8",127541:"_4_o9",127542:"_4_oa",127543:"_4_ob",127544:"_4_oc",127545:"_4_od",127546:"_4_oe",127568:"_4_of",127744:"_2b_",127746:"_2c0",127747:"_4_og",127748:"_4_oh",127749:"_4_oi",127750:"_4_oj",127751:"_4_ok",127752:"_4_ol",127754:"_2c1",127769:"_2c2",127775:"_2c3",127793:"_2c4",127796:"_2c5",127797:"_2c6",127799:"_2c7",127800:"_2c8",127801:"_2c9",127802:"_2ca",127803:"_2cb",127806:"_2cc",127808:"_2cd",127809:"_2ce",127810:"_2cf",127811:"_2cg",127813:"_4_om",127814:"_4_on",127817:"_4_oo",127818:"_2ch",127822:"_2ci",127827:"_2cj",127828:"_2ck",127832:"_4_op",127833:"_4_oq",127834:"_4_or",127835:"_4_os",127836:"_4_ot",127837:"_4_ou",127838:"_4_ov",127839:"_4_ow",127841:"_4_ox",127842:"_4_oy",127843:"_4_oz",127846:"_4_o-",127847:"_4_o_",127856:"_4_p0",127857:"_4_p1",127858:"_4_p2",127859:"_4_p3",127860:"_4_p4",127861:"_4_p5",127862:"_4_p6",127864:"_2cl",127866:"_2cm",127867:"_4_p7",127872:"_4_p8",127873:"_2cn",127875:"_2co",127876:"_2cp",127877:"_2cq",127880:"_2cr",127881:"_2cs",127884:"_4_p9",127885:"_2ct",127886:"_2cu",127887:"_2cv",127888:"_2cw",127890:"_4_pa",127891:"_2cx",127905:"_4_pb",127906:"_4_pc",127908:"_4_pd",127909:"_4_pe",127910:"_4_pf",127911:"_4_pg",127912:"_4_ph",127913:"_4_pi",127915:"_4_pj",127916:"_4_pk",127917:"_4_pl",127919:"_4_pm",127921:"_4_pn",127925:"_2cy",127926:"_2cz",127927:"_4_po",127928:"_4_pp",127930:"_4_pq",127932:"_2c-",127934:"_4_pr",127935:"_4_ps",127936:"_4_pt",127937:"_4_pu",127942:"_4_pv",127944:"_4_pw",127968:"_4_px",127969:"_4_py",127970:"_4_pz",127971:"_4_p-",127973:"_4_p_",127974:"_4_q0",127975:"_4_q1",127976:"_4_q2",127977:"_4_q3",127978:"_4_q4",127979:"_4_q5",127980:"_4_q6",127981:"_4_q7",127983:"_4_q8",127984:"_4_q9",128013:"_2c_",128014:"_2d0",128017:"_2d1",128018:"_2d2",128020:"_2d3",128023:"_2d4",128024:"_2d5",128025:"_2d6",128026:"_2d7",128027:"_2d8",128031:"_2d9",128032:"_2da",128033:"_2db",128037:"_2dc",128038:"_2dd",128039:"_2de",128040:"_2df",128041:"_2dg",128043:"_2dh",128044:"_2di",128045:"_2dj",128046:"_2dk",128047:"_2dl",128048:"_2dm",128049:"_2dn",128051:"_2do",128052:"_2dp",128053:"_2dq",128054:"_491",128055:"_2dr",128056:"_2ds",128057:"_2dt",128058:"_2du",128059:"_2dv",128062:"_2dw",128064:"_2dx",128066:"_2dy",128067:"_2dz",128068:"_2d-",128069:"_2d_",128070:"_2e0",128071:"_2e1",128072:"_2e2",128073:"_2e3",128074:"_2e4",128075:"_2e5",128076:"_2e6",128077:"_2e7",128078:"_2e8",128079:"_2e9",128080:"_2ea",128081:"_4_qa",128082:"_4_qb",128084:"_4_qc",128085:"_4_qd",128087:"_4_qe",128088:"_4_qf",128089:"_4_qg",128092:"_4_qh",128095:"_4_qi",128096:"_4_qj",128097:"_4_qk",128098:"_4_ql",128102:"_2eb",128103:"_2ec",128104:"_2ed",128105:"_2ee",128107:"_2ef",128110:"_2eg",128111:"_2eh",128113:"_2ei",128114:"_2ej",128115:"_2ek",128116:"_2el",128117:"_2em",128118:"_2en",128119:"_2eo",128120:"_2ep",128123:"_2eq",128124:"_2er",128125:"_2es",128126:"_2et",128127:"_2eu",128128:"_2ev",128130:"_2ew",128131:"_2ex",128132:"_4_qm",128133:"_2ey",128136:"_4_qn",128137:"_4_qo",128138:"_4_qp",128139:"_2ez",128140:"_4_qq",128141:"_4_qr",128142:"_4_qs",128143:"_2e-",128144:"_2e_",128145:"_2f0",128146:"_4_qt",128147:"_2f1",128148:"_2f2",128150:"_2f3",128151:"_2f4",128152:"_2f5",128153:"_2f6",128154:"_2f7",128155:"_2f8",128156:"_2f9",128157:"_2fa",128158:"_4_qu",128159:"_4_qv",128160:"_4_qw",128161:"_4_qx",128162:"_2fb",128163:"_4_qy",128164:"_2fc",128166:"_2fd",128167:"_4_qz",128168:"_2fe",128169:"_2ff",128170:"_2fg",128176:"_4_q-",128178:"_4_q_",128180:"_4_r0",128181:"_4_r1",128186:"_4_r2",128187:"_2fh",128188:"_4_r3",128189:"_2fi",128190:"_2fj",128191:"_2fk",128192:"_2fl",128214:"_4_r4",128221:"_4_r5",128222:"_2fm",128224:"_2fn",128225:"_4_r6",128226:"_4_r7",128227:"_4_r8",128232:"_4_r9",128233:"_4_ra",128234:"_4_rb",128235:"_4_rc",128236:"_4_rd",128237:"_4_re",128238:"_4_rf",128241:"_2fo",128242:"_2fp",128243:"_4_rg",128244:"_4_rh",128246:"_4_ri",128247:"_4_rj",128250:"_2fq",128251:"_4_rk",128252:"_4_rl",128264:"_4_rm",128269:"_4_rn",128270:"_4_ro",128271:"_4_rp",128272:"_4_rq",128273:"_4_rr",128274:"_4_rs",128275:"_4_rt",128276:"_2fr",128286:"_4_ru",128293:"_492",128296:"_4_rv",128299:"_4_rw",128304:"_4_rx",128305:"_4_ry",128306:"_4_rz",128307:"_4_r-",128308:"_4_r_",128309:"_4_s0",128310:"_4_s1",128311:"_4_s2",128312:"_4_s3",128313:"_4_s4",128507:"_4_s5",128508:"_4_s6",128509:"_4_s7",128513:"_2fs",128514:"_2ft",128515:"_2fu",128516:"_2fv",128518:"_2fw",128521:"_2fx",128522:"_1q3y",128524:"_2fz",128525:"_2f-",128527:"_2f_",128530:"_2g0",128531:"_2g1",128532:"_2g2",128534:"_2g3",128536:"_2g4",128538:"_2g5",128540:"_2g6",128541:"_2g7",128542:"_2g8",128544:"_2g9",128545:"_2ga",128546:"_2gb",128547:"_2gc",128548:"_2gd",128549:"_2ge",128552:"_2gf",128553:"_2gg",128554:"_2gh",128555:"_2gi",128557:"_2gj",128560:"_2gk",128561:"_2gl",128562:"_2gm",128563:"_2gn",128565:"_2go",128567:"_2gp",128568:"_2gq",128569:"_2gr",128570:"_2gs",128571:"_2gt",128572:"_2gu",128573:"_2gv",128575:"_2gw",128576:"_2gx",128587:"_2gy",128588:"_2gz",128589:"_2g-",128591:"_2g_",128640:"_4_s8",128643:"_4_s9",128644:"_4_sa",128645:"_4_sb",128649:"_4_sc",128652:"_4_sd",128655:"_4_se",128657:"_4_sf",128658:"_4_sg",128659:"_4_sh",128661:"_4_si",128663:"_4_sj",128665:"_4_sk",128666:"_4_sl",128674:"_4_sm",128676:"_4_sn",128677:"_4_so",128679:"_4_sp",128684:"_4_sq",128685:"_4_sr",128690:"_4_ss",128697:"_4_st",128698:"_4_su",128699:"_4_sv",128700:"_4_sw",128701:"_4_sx",128702:"_4_sy",128704:"_4_sz",9642:"_4_s-",9643:"_4_s_",9723:"_4_t0",9724:"_4_t1",9725:"_4_t2",9726:"_4_t3",9742:"_4_t4",9757:"_2h0",9786:"_2h1",9855:"_4_t5",9888:"_4_t6",9889:"_2h2",9898:"_4_t7",9899:"_4_t8",9917:"_4_t9",9918:"_4_ta",9924:"_2h3",9940:"_4_tb",9962:"_4_tc",9970:"_4_td",9971:"_4_te",9973:"_4_tf",9978:"_4_tg",9981:"_4_th",9994:"_2h4",9995:"_2h5",9996:"_2h6",10060:"_4_ti",10062:"_4_tj",10145:"_4_tk",10175:"_4_tl",11013:"_4_tm",11014:"_4_tn",11015:"_4_to",11035:"_4_tp",11036:"_4_tq",11088:"_4_tr",11093:"_4_ts",12349:"_4_tt",8598:"_4_tu",8599:"_4_tv",8600:"_4_tw",8601:"_4_tx",9728:"_2h7",9729:"_2h8",9748:"_2h9",9749:"_2ha",9824:"_4_ty",9827:"_4_tz",9829:"_4_t-",9830:"_4_t_",9832:"_4_u0",9986:"_4_u1",9992:"_4_u2",9993:"_4_u3",10006:"_4_u4",10024:"_2hb",10035:"_4_u5",10036:"_4_u6",10067:"_4_u7",10068:"_4_u8",10069:"_4_u9",10071:"_4_ua",10084:"_2hc",10548:"_4_ub",10549:"_4_uc",12951:"_4_ud",12953:"_4_ue"},k=function(l){var m=0;while(l.length>0){var n=i.exec(l);if(!n||!n.length)return false;var o=n[1],p=n.index,q=h.decode(o),r=j[q];if(!r){m+=p+1;l=l.substr(p+1);continue;}n.index+=m;n.emoji=r;return n;}return false;};e.exports={findEmoji:k,emoji:j,_utf16Regex:i};},null);
__d("EmoteTypes",[],function(a,b,c,d,e,f){f.TEXT='text';f.EMOTE='emote';f.EMOTE_FBID='emote_fbid';},null);
__d("EmoticonsList",[],function(a,b,c,d,e,f){e.exports={emotes:{":)":"smile",":-)":"smile",":]":"smile","=)":"smile","(:":"smile","(=":"smile",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",":poop:":"poop",":putnam:":"putnam",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue","=D":"grin",":-D":"grin",":D":"grin",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp",";)":"wink",";-)":"wink","8-)":"glasses","B-)":"glasses","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses",">:(":"grumpy",">:-(":"grumpy",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",":'(":"cry","3:)":"devil","3:-)":"devil","O:)":"angel","O:-)":"angel",":*":"kiss",":-*":"kiss","<3":"heart","&lt;3":"heart","♥":"heart","^_^":"kiki","-_-":"squint","o.O":"confused","O.o":"confused_rev",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",">_<":"upset",">.<":"upset",":v":"pacman",":|]":"robot",":3":"colonthree","<(\")":"penguin","(^^^)":"shark","(y)":"like",":like:":"like","(Y)":"like"},symbols:{smile:":)",frown:":(",poop:":poop:",putnam:":putnam:",tongue:":P",grin:"=D",gasp:":o",wink:";)",glasses:"8-)",sunglasses:"B|",grumpy:">:(",unsure:":/",cry:":'(",devil:"3:)",angel:"O:)",kiss:":*",heart:"<3",kiki:"^_^",squint:"-_-",confused:"o.O",confused_rev:"O.o",upset:">:o",pacman:":v",robot:":|]",colonthree:":3",penguin:"<(\")",shark:"(^^^)",like:"(y)"},regexp:/(^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))([\s'".,!?]|<br>|$)/,noncapturingRegexp:/(?:^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))(?:[\s'".,!?]|<br>|$)/};},null);
__d("createEmoteTokenizer",["EmoteTypes"],function(a,b,c,d,e,f,g){var h=40;function i(j){return function(k){var l=k,m=[],n=h;while(n--){var o=j.regexp.exec(l);if(!o||!o.length)break;var p=o[2],q=o.index+o[1].length,r=l.substring(0,q);if(r)m.push({type:g.TEXT,text:r});var s=j.emotes[p];if(s){m.push({type:g.EMOTE,text:p,emote:s});}else m.push({type:g.TEXT,text:p});l=l.substring(q+p.length);}if(l)m.push({type:g.TEXT,text:l});return m;};}e.exports=i;},null);
__d("emoteFBIDTokenizer",["EmoteTypes"],function(a,b,c,d,e,f,g){var h=/\[\[([a-z\d\.]+)\]\]/gi;function i(j){return j.split(h).map(function(k,l){if(l%2===0){return {type:g.TEXT,text:k};}else return {type:g.EMOTE_FBID,text:'[['+k+']]',value:k};});}e.exports=i;},null);
__d("TrackingNodes",["TrackingNodeTypes"],function(a,b,c,d,e,f,g){var h={types:g,BASE_CODE_START:58,BASE_CODE_END:126,BASE_CODE_SIZE:69,PREFIX_CODE_START:42,PREFIX_CODE_END:47,PREFIX_CODE_SIZE:6,TN_URL_PARAM:'__tn__',encodeTN:function(i,j){var k=(i-1)%h.BASE_CODE_SIZE,l=parseInt((i-1)/h.BASE_CODE_SIZE,10);if(i<1||l>h.PREFIX_CODE_SIZE)throw Error('Invalid tracking node: '+i);var m="";if(l>0)m+=String.fromCharCode(l-1+h.PREFIX_CODE_START);m+=String.fromCharCode(k+h.BASE_CODE_START);if(typeof j!="undefined"&&j>0)m+=String.fromCharCode(48+Math.min(j,10)-1);return m;},decodeTN:function(i){if(i.length===0)return [0];var j=i.charCodeAt(0),k=1,l,m;if(j>=h.PREFIX_CODE_START&&j<=h.PREFIX_CODE_END){if(i.length==1)return [0];m=j-h.PREFIX_CODE_START+1;l=i.charCodeAt(1);k=2;}else{m=0;l=j;}if(l<h.BASE_CODE_START||l>h.BASE_CODE_END)return [0];var n=m*h.BASE_CODE_SIZE+(l-h.BASE_CODE_START)+1;if(i.length>k&&(i.charAt(k)>='0'&&i.charAt(k)<='9'))return [k+1,[n,parseInt(i.charAt(k),10)+1]];return [k,[n]];},parseTrackingNodeString:function(i){var j=[];while(i.length>0){var k=h.decodeTN(i);if(k.length==1)return [];j.push(k[1]);i=i.substring(k[0]);}return j;},getTrackingInfo:function(i,j){return '{"tn":"'+h.encodeTN(i,j)+'"}';},addDataAttribute:function(i,j,k){if(j===(void 0))return;['data-ft','data-gt'].forEach(function(l){var m;if(i.getAttribute){m=i.getAttribute(l)||"{}";}else if(i.props){m=i.props[l]||"{}";}else return;var n=h.encodeTN(j,k);try{m=JSON.parse(m);if(m.tn&&m.tn===n)return;m.tn=n;if(i.setAttribute){i.setAttribute(l,JSON.stringify(m));}else if(i.props){i.props[l]=JSON.stringify(m);}else return;}catch(o){}});}};e.exports=h;},null);
__d("getContextualParent",["ge"],function(a,b,c,d,e,f,g){function h(i,j){var k,l=false;do{if(i.getAttribute&&(k=i.getAttribute('data-ownerid'))){i=g(k);l=true;}else i=i.parentNode;}while(j&&i&&!l);return i;}e.exports=h;},null);
__d("collectDataAttributes",["getContextualParent"],function(a,b,c,d,e,f,g){function h(i,j){var k={},l={},m=j.length,n;for(n=0;n<m;++n){k[j[n]]={};l[j[n]]='data-'+j[n];}var o={tn:'',"tn-debug":','};while(i){if(i.getAttribute)for(n=0;n<m;++n){var p=i.getAttribute(l[j[n]]);if(p){var q=JSON.parse(p);for(var r in q)if(o[r]!==(void 0)){if(k[j[n]][r]===(void 0))k[j[n]][r]=[];k[j[n]][r].push(q[r]);}else if(k[j[n]][r]===(void 0))k[j[n]][r]=q[r];}}i=g(i);}for(var s in k)for(var t in o)if(k[s][t]!==(void 0))k[s][t]=k[s][t].join(o[t]);return k;}e.exports=h;},null);
__d("MFeedErrorDetection",["Banzai"],function(a,b,c,d,e,f,g){var h={};function i(event,k,l,m){var n={event:event,shouldLogDetail:k,site:'mtouch'};if(k){n.intValues=l;n.normalValues=m;}g.post('feed_error_detection',n,{delay:0});}var j={registerFeedStories:function(k,l){var m=k.childNodes;for(var n=0;n<m.length;n++){var o=m[n],p=o.childNodes[0],q=p.getAttribute('data-dedupekey'),r=o.getAttribute('data-ft');if(!q||!r)continue;if(q in h){var s={};if(l)s={dedupKey:q,ft_A:r,ft_B:h[q]};i('mtouch_duplicate_stories',l,{},{dup_field:s});}else h[q]=r;}}};e.exports=j;},null);
__d("MAnimation",["CSS","DataStore","getVendorPrefixedName","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j){var k=i('animation-duration');function l(m,n,o){var p=h.get(m);clearTimeout(p.timerEnd);delete p.timerEnd;g.conditionClass(m,n,false);g.conditionClass(m,'accelerate',true);m.style[k]=o+'ms';p.timerStart=j(g.conditionClass.bind(null,m,n,true),0);p.timerEnd=j(function(){g.conditionClass.bind(null,m,n,false);m.style[k]='';g.conditionClass(m,'accelerate',false);var q=h.get(m);clearTimeout(q.timerStart);delete q.timerStart;},o);}e.exports={animate:l};},null);
__d("MExpandablePymk",["setTimeoutAcrossTransitions","CSS","DOM","DataStore","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l='m-add-friend';function m(o,p,q){var r=[],s=0;if(o){var t=i.scry(o,'div','story-wrap');for(var u=0;u<t.length;u++){var v=i.find(t[u],'a',l),w=j.get(v);r.push(w.id);var x=j.get(t[u]);if(x.sent)s++;}q.pymk_group_id=p;}if(r)q.uw=r.join(',');if(s)q.pc=s;return r;}function n(o,event,p){if(!o)return;var q=o.getElementsByClassName("_4-ck");if(q.length>0)g(function(){o.style.height="";},800);var r=function(z){return (function(){h.conditionClass(z,"_4-cl",true);});},s=function(z){return (function(){h.conditionClass(z,"_4-ck",false);});},t=i.scry(o,'div','story-wrap'),u=0;for(var v=0;v<t.length;v++){var w=j.get(t[v]);if(w.transitionIn){j.set(t[v],{transitionIn:false});g(r(t[v]),800);g(s(t[v]),1200);}else if(w.sent){var x=t[v];if(q.length>0)o.style.height=(o.offsetHeight-q.length*q[0].offsetHeight).toString()+'px';h.conditionClass(x,"_4-cn",true);if(p){h.conditionClass(x,"_4-co",true);h.conditionClass(x,"_4-cp",false);}g(function(){i.remove(x);},600);u++;}}if(u<t.length){var y=event.getNode('story-wrap');j.set(y,{sent:true});if(p){h.conditionClass(y,"_4-cp",true);h.conditionClass(y,"_4-co",false);}}}e.exports={getExtraArgs:m,animateExpansion:n};},null);
__d("MFriendingState",[],function(a,b,c,d,e,f){e.exports={REQUEST_SENT:'m:friending-state:request-sent',REQUEST_CANCELED:'m:friending-state:request-canceled',UNFRIENDED:'m:friending-state:unfriended'};},null);
__d("MAddFriend",["DOM","DataStore","Stratcom","MAnimation","MExpandablePymk","MFriendingState","MPageCache","MPageControllerPath","MRequest","MRequestTypes","MURI","MFriendingActionError","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t='m-add-friend',u='m-cancel-request',v='m-unfriend-request',w='m-unfollow-request',x='m-follow-request',y='check',z='friends',aa='add_friend_pymk_chain_placeholder',ba='/a/mobile/friends/add_friend.php',ca='/a/friendrequest/cancel/index.php',da='/a/friends/remove',ea='/a/subscriptions/remove',fa='/a/subscriptions/add',ga=86;function ha(ra){var sa=ra.querySelector('.touched_hide');sa&&j.animate(sa,"_4-ic",500);}function ia(){var ra=n.getRequestPath();m.removeCachedPage(ra);m.clearCachedIUIResponses(ra);}function ja(event){var ra=event.getNode(t),sa=h.get(ra),ta=event.getNode('m-add-friend-secondary'),ua=h.get(ta),va=sa.pymk_group_id||'pymk_suggestions_box',wa=event.getNode('id:'+va),xa=document.getElementById(aa);h.set(ta,{one_click_adding:true,one_click_cancel_event:null});ia();var ya={id:sa.id,hf:sa.hf,sc:sa.sc,so:sa.so,pl:sa.pl,at:sa.at,et:sa.et,ed:sa.ed,fref:sa.fref};if(sa.floc)ya.floc=sa.floc;if(sa.frefs)ya.frefs=sa.frefs;if(sa.el)ya.el=sa.el;var za=k.getExtraArgs(wa,va,ya),ab=g.find(ta,'*',y),bb=g.find(ta,'div','m-add-friend-flyout'),cb=new q(ba).setAsync(true);if(sa.searchlog)cb.addQueryData(sa.searchlog);var db=new q(ra.href).getQueryData()._ft_;if(db)cb.addQueryData({_ft_:db});var eb=new o(cb.toString()).setType(p.DEPENDENT);eb.setData(ya);var fb=function(){g.show(ab);h.get(ta).bounce&&ha(ab);i.listen('friending_state_change',null,ka.bind(event,ya.id,r.SEND_OUTGOING_REQUEST_ERROR));i.invoke(l.REQUEST_SENT,null,{event:event});};eb.listen('start',function(){g.hide(bb);fb();});eb.listen('postprocess',function(gb){if(ua.one_click_adding){h.set(ta,{one_click_adding:false});if(ua.one_click_cancel_event)ma(ua.one_click_cancel_event);}if(za)k.animateExpansion(wa,event,xa);});eb.send();event.kill();}function ka(ra,sa,event){var ta=event.getData();if(ta.userid!=ra)return;if(ta.error!=sa)return;var ua=this.getNode('m-add-friend-secondary');if(ta.error===r.SEND_OUTGOING_REQUEST_ERROR){var va=g.find(ua,'*',y),wa=g.find(ua,'div','m-add-friend-flyout');g.show(wa);g.hide(va);i.invoke(r.SEND_OUTGOING_REQUEST_ERROR,null,{event:this});}else if(ta.error===r.CANCEL_OUTGOING_REQUEST_ERROR){var xa=g.find(ua,'a','m-cancel-request'),ya=g.find(ua,'div','m-add-friend-flyout');g.show(xa);g.hide(ya);i.invoke(r.CANCEL_OUTGOING_REQUEST_ERROR,null,{event:this});}i.removeCurrentListener();}function la(ra){var sa=h.get(ra.getNode(v)),event=sa.flyoutEvent,ta=event.getNode('undoable-action');if(!ta)ta=event.getNode('m-add-friend-secondary');var ua=g.scry(ta,'*',z)[0],va=g.find(ta,'div','m-add-friend-flyout'),wa=new q(da).setAsync(true),xa=new o(wa);xa.setData({friend_id:sa.id,noReload:true,unref:sa.unfriend_ref});xa.listen('start',function(){g.hide(ua);g.show(va);i.invoke(l.UNFRIENDED,null,{event:event});});xa.send();event.kill();}function ma(event){var ra=h.get(event.getNode(u)),sa=document.getElementById(aa),ta=event.getNode('undoable-action');if(!ta)ta=event.getNode('m-add-friend-secondary');if(!ta)ta=ra.parentNode;var ua=g.scry(ta,'*',y)[0],va=g.find(ta,'*','load'),wa=g.find(ta,'div','m-add-friend-flyout'),xa=event.getNode('m-add-friend-secondary'),ya=xa?h.get(xa):null;if(ya&&ya.one_click_adding){h.set(xa,{one_click_cancel_event:event});g.hide(ua);g.show(va);return;}var za=function(){g.show(wa);i.invoke(l.REQUEST_CANCELED,null,{event:event});},ab=new q(ca).setAsync(true),bb=new o(ab);bb.setData({subject_id:ra.id,ref_param:ra.ref_param,floc:ra.floc,frefs:ra.frefs});i.listen('friending_state_change',null,ka.bind(event,ra.id,r.CANCEL_OUTGOING_REQUEST_ERROR));bb.listen('start',function(){g.hide(ua);g.show(va);});bb.listen('finally',function(){g.hide(va);za();var cb=event.getNode('story-wrap');if(cb)h.set(cb,{sent:false});});bb.send();event.kill();}function na(event){var ra=event.getNode(w),sa=h.get(ra),ta=new q(ea).setAsync(true),ua=new o(ta);ua.setData({subject_id:sa.id,forceredirect:false,location:ga});ua.send();event=sa.flyoutEvent;var va=event.getNode('popup-action-trigger');h.set(va,{is_following:false});event.kill();}function oa(event){var ra=event.getNode(x),sa=h.get(ra),ta=new q(fa).setAsync(true),ua=new o(ta);ua.setData({subject_id:sa.id,forceredirect:false,location:ga});ua.send();event=sa.flyoutEvent;var va=event.getNode('popup-action-trigger');h.set(va,{is_following:true});event.kill();}var pa=false,qa=function(ra){if(pa)return;pa=true;i.listen('click',t,ja);i.listen('click',u,ma);i.listen('click',v,la);if(typeof ra!=='undefined'&&ra){i.listen('click',w,na);i.listen('click',x,oa);}};e.exports={main:qa};},null);
__d("AppRequestLogger",["MCache"],function(a,b,c,d,e,f,g){var h={setLastApp:function(i){var j=g.getItem('appEventList')||[];j.push({app_id:i,time:Math.round(Date.now()/1000),event_type:'request_accept'});g.setItem('appEventList',j);}};e.exports=h;},null);
__d("MPlaces",["$","DOM","DataStore","LoadingIndicator","MRequest","Stratcom","MPageController","MURI","URI","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=b('FWLoader').FW,q={LINK_SIGIL:'gps-link',FORM_SIGIL:'gps-form',UPDATE_LOCATION_INTERVAL:60000,desiredProperties:['latitude','longitude','accuracy','altitude','altitudeAccuracy','heading','speed'],locationOptions:{enableHighAccuracy:true,timeout:60000,maximumAge:300000},watchID:null,pendingHref:'',pendingForm:null,_JSONLocation:'',_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:true,locationSearchModes:{SEARCH_MODE:'m',MODE_COMPOSER:'cp',MODE_CHECKIN:'ci'},setCurrentJSONLocation:function(r){q._JSONLocation=r;},getCurrentJSONLocation:function(){return q._JSONLocation;},setLocationSearchMode:function(r){q._currentSearchMode=r;},getLocationSearchMode:function(){return q._currentSearchMode;},shouldUseFWGeolocation:function(){return window.FW_ENABLED&&p.isIOS()&&q.enableFWGeolocation;},updateLocation:function(r){if(r){if(q.shouldUseFWGeolocation())r={coords:r};var s={},t;for(var u=0;u<q.desiredProperties.length;u++){t=q.desiredProperties[u];if(r.coords[t])s[t]=r.coords[t];}if(r.timestamp)s.timestamp=r.timestamp/1000;q._JSONLocation=JSON.stringify(s);q.sendCurrentLocationToServer();if(q.pendingForm){q.submitForm(q.pendingForm);}else if(q.pendingHref)q.gotoPage(q.pendingHref);q.pendingForm=null;q.pendingHref='';l.invoke('location-update',null,{position:r});}},handleError:function(r){q.clearWatch();l.invoke('location-error',null,{error:r});if(q.pendingForm){q.submitForm(q.pendingForm);q.pendingForm=null;}else if(q.pendingHref){q.gotoPage(q.pendingHref);q.pendingHref='';}},sendCurrentLocationToServer:function(){var r=Date.now();if(r-q._lastUpdateTime>q.UPDATE_LOCATION_INTERVAL){q._lastUpdateTime=r;var s=new k(new n('/places/update_location.php').setAsync(true).toString());s.addData({json_location:q._JSONLocation});s.send();}},gotoPage:function(r){var s=new o(r);s.addQueryData('json_location',q._JSONLocation);m.load(s);},submitForm:function(r){r.appendChild(h.create('input',{name:'json_location',type:'hidden',value:q._JSONLocation}));if(!r.onsubmit||r.onsubmit())r.submit();},clearWatch:function(){if(!q.watchID)return;if(q.shouldUseFWGeolocation()){p.geolocation.clearWatch();}else navigator.geolocation.clearWatch(q.watchID);q.watchID=null;},watchPosition:function(){if(q.shouldUseFWGeolocation()){q.watchID=1;p.geolocation.watchPosition(q.updateLocation,q.handleError);p.geolocation.getCurrentPosition(q.updateLocation);}else{var r=setTimeout(q.handleError,q.locationOptions.timeout);q.watchID=navigator.geolocation.watchPosition(function(s){clearTimeout(r);q.updateLocation(s);},function(s){clearTimeout(r);q.handleError(s);},q.locationOptions);}},monitorLocation:function(){q.clearWatch();q.watchPosition();k.listen('postprocess',function(){if(!document.getElementById('place_update')&&q.watchID)q.clearWatch();});},submitFormWithLocation:function(r){if(typeof r=='string')r=g(r);var s=q;j.show();if(s.watchID&&s._JSONLocation){s.submitForm(r);return;}s.pendingHref='';s.pendingForm=r;s.monitorLocation();return false;},gotoPageWithLocation:function(r){var s=q;j.show();if(s.watchID&&s._JSONLocation){s.gotoPage(r);return;}s.pendingForm=null;s.pendingHref=r;s.monitorLocation();return false;},onClick:function(event){event.kill();var r=i.get(event.getNode(q.LINK_SIGIL));q.gotoPageWithLocation(r.href);},onSubmit:function(event){event.kill();var r=h.find(event.getNode(q.FORM_SIGIL),'form');q.submitFormWithLocation(r);}};e.exports=q;},null);
__d("MMessagingEmoticon",["DOM","EmoteTypes","EmoticonsList","createEmoteTokenizer","emoteFBIDTokenizer"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j(i),m=e.exports={};m.htmlEmoteWithoutFBID=function(n,o){if(typeof o!='function')o=function(q){return q;};var p=l(n).map(function(q){if(q.type==h.TEXT){return o(q.text);}else if(q.type==h.EMOTE)return [g.create('span',{className:'emoticon_text'},q.text),g.create('span',{className:'emoticon emoticon_'+q.emote})];});return g.create('span',{},p);};m.htmlEmote=function(n,o){if(typeof o!='function')o=function(q){return q;};var p=k(n).map(function(q){if(q.type==h.TEXT){return m.htmlEmoteWithoutFBID(q.text,o);}else if(q.type==h.EMOTE_FBID)return [g.create('span',{className:'emoticon_text'},q.text),g.create('img',{className:'emoticon emoticon_custom',alt:q.value,src:window.location.protocol+'//graph.facebook.com/'+encodeURIComponent(q.value)+'/picture'})];});return g.create('span',{},p);};},null);
__d("MMessagingEmoji",["DOM","MMessagingEmoticon","SupportedEmoji","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=40;e.exports={htmlEmoji:function(l,m){if(typeof m!='function')m=function(w){return w;};var n=l,o=[],p=k;while(p--){var q=i.findEmoji(n);if(!q||!q.length)break;var r=q[0],s=n.indexOf(r),t=n.substring(0,s);if(t)o.push(m(t));var u=q.emoji,v=g.create('span',{className:"_1az _1a-"+' '+u});o.push(v);n=n.substring(s+r.length);}if(n)o.push(m(n));return g.create('span',{},o);},htmlEmojiAndEmote:function(l,m){return this.htmlEmoji(l,function(n){return h.htmlEmote(n,m);});}};},null);
__d("requireWeak",[],function(a,b,c,d,e,f){function g(h,i){d.call(null,h,i);}e.exports=g;},null);
__d("MScrollAreaHelper",["DataStore"],function(a,b,c,d,e,f,g){function h(i,j){j=j||10;var k;while(j>0&&i&&i.nodeType===1){k=g.get(i);if(k&&k.scrollArea)return k.scrollArea;i=i.parentNode;j--;}return null;}f.findScrollArea=h;},null);
__d("MFanPage",["setTimeoutAcrossTransitions","CSS","DataStore","DOM","MURI","TrackingNodes","$","ge","MRequest","Stratcom","Vector","MScrollAreaHelper","MarauderLogger"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t='m-fan-action',u='m-fan-page-root',v='m-notfan-markup',w='m-isfan-markup';function x(){var ga={};function ha(ka){var la=i.get(ka),ma=j.find(ka,'*',w);if(la._touchstartListener){la._touchstartListener.remove();delete la._touchstartListener;}if(!ma.offsetHeight)return;if(la.scrollArea===(void 0))la.scrollArea=r.findScrollArea(ka,11);if(la.scrollArea){la.scrollArea.scrollByPages(1);return;}}function ia(ka){var la=ka.target;h.conditionClass(la,'doBounce',false);var ma=i.get(la);delete ma._hasBounceEndHandler;ha(la);}function ja(event){var ka=event.getNode(t),la=ka.querySelector('.async_fan_saving_hide'),ma=p.hasSigil(la,v),na=la;while(na!==ka&&!p.hasSigil(na,u))na=na.parentNode;var oa=i.get(na),pa=na.nextSibling,qa=oa.pageID;if(ga[qa]){var ra=ca(na,false);if(pa)ca(pa,false);if(ra)ma=!ma;ga[qa].abort();}else{ca(na,true);if(pa)ca(pa,true);}if(oa.animate){clearTimeout(oa._bounceTimer);delete oa._bounceTimer;if(!oa._hasBounceEndHandler){oa._hasBounceEndHandler=true;na.addEventListener('webkitAnimationEnd',ia,true);}if(ba(na,'doBounce')){h.conditionClass(na,'doBounce',false);oa._bounceTimer=g(h.conditionClass.bind(null,na,'doBounce',true),0);}else h.conditionClass(na,'doBounce',true);}else{clearTimeout(oa._delayTimer);delete oa._delayTimer;if(ma){oa._delayTimer=g(ha.bind(null,na),500);oa._touchstartListener=p.listen('touchstart',null,function(va){clearTimeout(oa._delayTimer);delete oa._delayTimer;oa._touchstartListener.remove();delete oa._touchstartListener;});}}var sa=new k(oa.url);if(!ma&&oa.undo_url)sa=new k(oa.undo_url);var ta={};ta[ma?'fan':'unfan']=1;ta[l.TN_URL_PARAM]=l.encodeTN(ma?l.types.FAN_PAGE:l.types.UNFAN_PAGE);if(ea!==null)ta[l.TN_URL_PARAM]+=ea;sa.addQueryData(ta).setAsync(true);var ua=new o(sa.toString());ga[qa]=ua;ua.listen('finally',function(){delete ga[qa];});ua.listen('error',function(){ca(na,false);});ua.send();if(oa.logging_module)s.log('fan_page_clicked',oa.logging_module,{like:ma,pos:oa.scroller_position});if(ma)p.invoke(oa.likeAction);event.kill();}p.listen('click',t,ja);p.listen('m:page:unload',null,function(){for(var ka in ga)ga[ka].abort();ga={};});}function y(ga){var ha=n(ga);if(!ha)return;var ia=ha.parentNode,ja=q.getDim(ia).y,ka=j.find(ha,'*',v),la=j.find(ha,'*',w),ma=q.getDim(ka).y,na=q.getDim(la).y;if(na>ma)ja+=na-ma;ia.style.height=ja+'px';}function z(ga){ga.like=!!ga.like;var ha=j.scry(m('root'),'*',u);ha.forEach(function(ia){var ja=i.get(ia);if(ja.pageID===ga.pageID){ca(ia,false);var ka=ia.nextSibling,la=j.find(ia,'*',v),ma=j.find(ia,'*',w);aa(ma,ga.like);aa(la,!ga.like);if(ka){var na=j.find(ka,'*',v),oa=j.find(ka,'*',w);ca(ka,false);aa(na,!ga.like);aa(oa,ga.like);}}});}function aa(ga,ha){h.conditionClass(ga,'async_fan_saving_show',!ha);h.conditionClass(ga,'async_fan_saving_hide',ha);}function ba(ga,ha){return (' '+ga.className+' ').indexOf(' '+ha+' ')>-1;}function ca(ga,ha){var ia=ha?'async_fan_saving':'async_fan',ja=ha?'async_fan':'async_fan_saving';while(ga&&!ba(ga,ja))ga=ga.parentNode;if(ga){ga.className=ga.className.replace(ja,ia);return true;}return false;}var da,ea,fa=function(ga,ha){if(ga)if(ga.action==='adjust'){y(ga.id);}else if(ga.action==='update')z(ga.data);if(da)return;da=true;ea=ha;x();};f.main=fa;},null);
__d("MSnowflakeLink",["DOM","MModalDialog","URI","MLinkHack","Parent","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n){"use strict";this.$MSnowflakeLink0=n.node;this.$MSnowflakeLink1=n.permalink;this.$MSnowflakeLink2=n.targetPhoto;this.$MSnowflakeLink3=g.listen(n.node,'click',null,this.onClick.bind(this));l(function(){return this.$MSnowflakeLink3.remove();}.bind(this));}m.prototype.getFeedTrackingOwnerID=function(){"use strict";var n=k.byAttribute(this.$MSnowflakeLink0,'data-ft');return n&&n.id;};m.prototype.getPermalinkURI=function(){"use strict";return new i(this.$MSnowflakeLink1).addQueryData('photo_id',this.$MSnowflakeLink2);};m.prototype.getModalDialogURI=function(){"use strict";return new i(this.$MSnowflakeLink0.getAttribute('href')).addQueryData('ftid',this.getFeedTrackingOwnerID());};m.prototype.onClick=function(n){"use strict";j.remove(this.$MSnowflakeLink0);h.openWithPermalinkURI(this.getModalDialogURI().toString(),this.getPermalinkURI());n.kill();};e.exports=m;},null);
__d("MPrivacyComposerMenu",["CSS","DataStore","DOM","MComposerLogger","MComposerWaterfallEvent","MModalDialog","MCompositionPrivacyStore","MCompositionPrivacyFields","MCompositionUserActions","MRequest","MViewport","Stratcom","$","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(v,w,x,y){"use strict";this._root=s(v);this._hiddenInput=i.find(this._root,'input');this._selectedOption=i.scry(this._root,'tr','checked')[0];this._stickyURI=w;this._stickyOption=this._selectedOption;this._enableCustomMenu=y;this._dontSaveSticky=false;this._customLabel=x;m.addChangeListener(function(){return this._handlePrivacyUpdate();}.bind(this));i.listen(this._root,'click','privacy-option',function(z){var aa=z.getNode('privacy-option');if(!this._enableCustomMenu||aa!=this.getCustomOption()){this._selectOption(aa);return;}var ba=r.listen('m:viewport:orientation-change',null,this._addHeightConstraint.bind(this));this._addHeightConstraint();l.open('/privacy/custom/edit',function(ca){r.invoke('MPrivacyComposerMenu::custom',null,{visible:false,instance:this,selector:this._root});q.scrollToHeader();ba.remove();this._removeHeightConstraint();if(!ca.canceled){var da=ca.payload.value,ea=i.scry(this._root,'tr','privacy-option'),fa=false;for(var ga=0;ga<ea.length;ga++)if(h.get(ea[ga]).value==da){this._selectOption(ea[ga],true);fa=true;break;}if(!fa){this._updateCustomSelectedOption(ca.payload.description,da);this._selectOption(this.getCustomSelectedOption(),true);}}}.bind(this));r.invoke('MPrivacyComposerMenu::custom',null,{visible:true,instance:this,selector:this._root});}.bind(this));r.listen('MPrivacyDeferredSelector-loaded',null,function(z){var aa=z.getData(),ba=i.find(this._root,'table','privacy-table');if(ba.id==aa.id)this._selectedOption=i.scry(this._root,'tr','checked')[0];this._handlePrivacyUpdate();}.bind(this));r.listen('MPrivacyComposerMenu:updatePrivacy',null,function(z){var aa=z.getData();this._selectOption(aa.row,false,aa.log);}.bind(this));h.set(this._root,{instance:this});}u.prototype.setShowTagExpansion=function(v){"use strict";g.conditionClass(this._root,"_1oxi",v);};u.prototype.getIconContent=function(){"use strict";return i.find(this._selectedOption,'i','icon').cloneNode(true);};u.prototype.getCustomOption=function(){"use strict";return i.find(this._root,'tr','privacy-custom-option');};u.prototype.getCustomSelectedOption=function(){"use strict";return i.scry(this._root,'tr','privacy-custom-selected-option')[0];};u.prototype.isCustomSelectedOption=function(){"use strict";return this._selectedOption===this.getCustomSelectedOption();};u.prototype.getSelectedValue=function(){"use strict";return h.get(this._selectedOption).value;};u.prototype.getRoot=function(){"use strict";return this._root;};u.prototype._selectOption=function(v,w,x){"use strict";x=x!==(void 0)?x:true;var y=m.get(n.NEVER_SAVE_STICKY,false),z=h.get(v).value,aa={};aa[n.PRIVACY_FBID]=z;aa[n.ALREADY_SAVED_STICKY]=w;aa[n.NEVER_SAVE_STICKY]=y;aa[n.CLOSE_DIALOG]=true;o.privacyUpdate(aa);if(x)j.log(k.PRIVACY_ADD,{privacy_setting:z});};u.prototype._updateCustomSelectedOption=function(v,w){"use strict";var x=i.find(this.getCustomSelectedOption(),'span','option-desc');i.setContent(x,v);h.set(this.getCustomSelectedOption(),{value:w});if(w)i.show(this.getCustomSelectedOption());};u.prototype._addHeightConstraint=function(){"use strict";this._removeHeightConstraint();var v=q.getUseableHeight();this._heightConstraint=q.addHeightConstraint(v);};u.prototype._removeHeightConstraint=function(){"use strict";if(this._heightConstraint){this._heightConstraint.release();this._heightConstraint=null;}};u.prototype._handlePrivacyUpdate=function(){"use strict";var v=m.get(n.PRIVACY_FBID,null),w=m.get(n.ALREADY_SAVED_STICKY,false),x=m.get(n.NEVER_SAVE_STICKY,false),y=m.get(n.CLOSE_DIALOG,false);if(w!==(void 0))this._dontSaveSticky=w;var z=i.scry(this._root,'tr','privacy-option');if(v===null)v=h.get(this._stickyOption).value;y=y||this._hiddenInput.value!=v;var aa=i.scry(document.body,'button','privacy-button')[0];if(v!==null&&y){var ba=null;for(var ca=0;ca<z.length;ca++)if(h.get(z[ca]).value==v)ba=z[ca];if(!ba){if(aa)g.conditionShow(aa,false);return;}this._hiddenInput.value=v;if(this._selectedOption)g.conditionClass(this._selectedOption,'checked',false);this._selectedOption=ba;g.conditionClass(ba,'checked',true);var da=!!i.scry(ba,'span','plus-label').length,ea=i.find(this._selectedOption,'i','icon').outerHTML,fa=i.find(ba,'span','option-desc');r.invoke('MPrivacyComposerMenu::change',null,{value:this._hiddenInput.value,showPlus:da,iconHTML:ea,optionLabel:fa,instance:this});if(!x){this._stickyOption=this._selectedOption;if(!this._dontSaveSticky&&this._stickyURI)new p(this._stickyURI).setData({privacyx:this._hiddenInput.value}).send();}}if(aa)g.conditionShow(aa,true);};u.init=function(v,w,x,y){"use strict";return new u(v,w,x,y);};u.getInstance=function(v){"use strict";return h.get(v).instance;};e.exports=u;},null);
__d("MPrivacyComposerSelector",["CSS","DataStore","DOM","HTML","MComposerLogger","MComposerWaterfallEvent","MPrivacyComposerMenu","MViewport","Stratcom","Vector","$","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(t,u){"use strict";this._root=q(t);this._button=i.scry(this._root,'button','privacy-button')[0];if(!this._button)this._button=i.find(this._root,'div','privacy-button');this._buttonIcon=i.find(this._root,'div','privacy-button-icon');this._menu=i.find(this._root,'div','privacy-composer-menu');this._config=u;i.listen(this._root,'click','privacy-button',function(event){if(this.isOpen()){this.hideMenu();k.log(l.PRIVACY_CANCEL);}else{this.showMenu();k.log(l.PRIVACY_INTENT);}document.activeElement.blur();}.bind(this));o.listen('MPrivacyComposerMenu::change',null,function(v){var w=v.getData();if(w.instance!=m.getInstance(this._menu))return;if(this._config.updatebuttontext){var x=i.find(this._button,'span','button-text');i.setContent(x,w.optionLabel.cloneNode(true));}var y=i.find(this._button,'span','plus-label');if(w.showPlus){i.show(y);}else i.hide(y);i.setContent(this._buttonIcon,new j(w.iconHTML));this.hideMenu();}.bind(this));h.set(this._root,{instance:this});}s.prototype.setShowTagExpansion=function(t){"use strict";g.conditionClass(this._root,"_27-k",t);m.getInstance(this._menu).setShowTagExpansion(t);};s.prototype.getSelectedValue=function(){"use strict";var t=m.getInstance(this._menu);return t&&t.getSelectedValue();};s.prototype.showMenu=function(){"use strict";i.show(this._menu);o.invoke('MPrivacyComposerMenu::show',null,{selector:this._root});this._heightConstraint=n.addMinHeightConstraint(p.getDim(this._menu).y+p.getPos(this._menu).y);};s.prototype.hideMenu=function(){"use strict";if(this.isOpen()){i.hide(this._menu);o.invoke('MPrivacyComposerMenu::hide',null,{selector:this._root});this._heightConstraint&&this._heightConstraint.release();}};s.prototype.isOpen=function(){"use strict";return (this._menu.style.display!='none');};s.init=function(t,u){"use strict";return new s(t,u);};s.getInstance=function(t){"use strict";return h.get(t).instance;};e.exports=s;},null);
__d("SaveState",[],function(a,b,c,d,e,f){var g={SAVING:'saving',SAVED:'saved',UNSAVING:'unsaving',UNSAVED:'unsaved'};e.exports=g;},null);
__d("SaveStateHandler",["SaveState"],function(a,b,c,d,e,f,g){var h=null;function i(){"use strict";this.$SaveStateHandler0={};this.$SaveStateHandler1={};}i.prototype.addListener=function(j,k){"use strict";j.forEach(function(l){if(!this.$SaveStateHandler0[l])this.$SaveStateHandler0[l]=[];this.$SaveStateHandler0[l].push(k);},this);};i.prototype.setState=function(j,k){"use strict";j.forEach(function(l){this.$SaveStateHandler1[l]=k;if(!this.$SaveStateHandler0[l])return;var m=this.$SaveStateHandler0[l];m.forEach(function(n){try{n.call(window,k,l);}catch(o){}});},this);};i.prototype.getState=function(j){"use strict";var k={};j.forEach(function(l){k[l]=this.$SaveStateHandler1[l];},this);return k;};i.$SaveStateHandler2=function(){"use strict";if(!h)h=new i();return h;};i.listen=function(j,k){"use strict";this.$SaveStateHandler2().addListener(j,k);};i.getState=function(j){"use strict";return this.$SaveStateHandler2().getState(j);};i.saving=function(j){"use strict";this.$SaveStateHandler2().setState(j,g.SAVING);};i.saved=function(j){"use strict";this.$SaveStateHandler2().setState(j,g.SAVED);};i.unsaving=function(j){"use strict";this.$SaveStateHandler2().setState(j,g.UNSAVING);};i.unsaved=function(j){"use strict";this.$SaveStateHandler2().setState(j,g.UNSAVED);};i.isSaveAction=function(j){"use strict";var k=this.$SaveStateHandler2().getState(j);for(var l in k){var m=k[l];if(m==g.UNSAVED||m==g.UNSAVING)return true;}return false;};i.isInTransition=function(j){"use strict";var k=this.$SaveStateHandler2().getState(j);for(var l in k){var m=k[l];if(m==g.SAVING||m==g.UNSAVING)return true;}return false;};e.exports=i;},null);
__d("MCurationFooter",["CSS","DOM","MLoadingIndicator","MPageController","SaveState","SaveStateHandler","cx","destroyOnUnload","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p="_3n7c",q="_3n7d";function r(s,t,u,v,w){"use strict";var x=o(v);l.listen(u,function(z){switch(z){case k.SAVING:g.addClass(x,p);this.$MCurationFooter0=true;break;case k.SAVED:if(this.$MCurationFooter1){j.load(w);g.removeClass(s,q);this.$MCurationFooter1=false;}this.$MCurationFooter0=false;break;case k.UNSAVING:g.removeClass(x,p);break;case k.UNSAVED:g.removeClass(x,p);break;}}.bind(this));var y=h.listen(s,'click',null,function(){if(this.$MCurationFooter0){this.$MCurationFooter1=true;g.addClass(s,q);i.init(t);}else j.load(w);}.bind(this));n(function(){y.remove();});}e.exports=r;},null);
__d("XStoryChevronControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/story_chevron_menu\/",{feedobjects_identifiers:{type:"String"},feed_context:{type:"String"},chevron_button_id:{type:"String"},story_node_id:{type:"String"},zombie_story:{type:"String"},is_menu_registered:{type:"Bool"},outer_story_token:{type:"String"}});},null);
__d("MAsyncChevronMenu",["$","cx","CSS","requireWeak","BanzaiODS","DataStore","DOM","MParent","MRequest","MTouchClick","Stratcom","SubscriptionsHandler","XStoryChevronControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=null;j(['MHideStoryActions'],function(ha){return t=ha;});function u(ha){var ia=n.bySigil(ha,'story-popup-metadata');return ia;}var v;function w(){k.bumpEntityKey('mtouch_async_chevron','chevron_clicked');var ha=this.getCausalElement(),ia=l.get(ha),ja=u(ha),ka=(new s()).setBool('is_menu_registered',!!(t&&t.getActionBubble())).getURI(),la=new o(ka);i.show(z);i.hide(aa);i.hide(ba);v=ja;la.setMethod('POST');la.setData({feedobjects_identifiers:ia.feedobjectsIdentifiers,feed_context:ia.feedContext,zombie_story:ia.zombieStoryURI?ia.zombieStoryURI:'',story_node_id:ja.id,chevron_button_id:ha.id,outer_story_token:ia.outerStoryToken?ia.outerStoryToken:''});la.listen('error',function(ma){k.bumpEntityKey('mtouch_async_chevron','request_failed');i.hide(z);if(ma=='status=0'){k.bumpEntityKey('mtouch_async_chevron','request_failed_no_internet_connection');i.show(aa);i.hide(ba);}else{k.bumpEntityKey('mtouch_async_chevron','request_failed_server_side_error');i.show(ba);i.hide(aa);}});la.listen('done',function(){k.bumpEntityKey('mtouch_async_chevron','request_done');});la.send();}var x,y,z,aa,ba;function ca(){if(y){y.release();y=null;}x=null;z=null;aa=null;ba=null;}function da(ha){if(x){x.destroy();ca();}x=ha;var ia=ha.getContentRoot();z=m.find(ia,'div','loadingWrapper');aa=m.find(ia,'div','noConnectionWrapper');ba=m.find(ia,'div','requestErrorWrapper');y=new r('StoryChevronMenu');y.addSubscriptions(x.addListener('beforeshow',w,x),q.listen('m:page:unload',null,ca),q.listen('m:story:action-bubble-initialized',null,function(ja){var ka=ja.getData();if(ka.menuNubID)ea(g(ka.menuNubID),ka.wasOpen);}));}function ea(ha,ia){if((!x.isShown()&&!ia)||!t||!t.getActionBubble())return;var ja=u(ha);if(v==ja){var ka=ha.getElementsByClassName("_4s19")[0];p.click(ka);}}function fa(ha,ia){m.replace(g(ia),ha);ea(ha);}function ga(ha){if(!v||v.id==ha){x.hide();v=null;}}e.exports={init:da,replaceChevronTrigger:fa,closeLoadingFlyout:ga};},null);
__d("XAdsPreferencesAdInfoControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/ads\/preferences\/",{ad_id:{type:"Int"},tracking:{type:"String"},optout_url:{type:"String"},rtb_partner_id:{type:"Int"},show_ad_choices:{type:"Bool"},__asyncDialog:{type:"Int"}});},null);
__d("MHideStoryActions",["$","Banzai","BanzaiLogger","copyProperties","CSS","cx","DOM","DataStore","MActionBubbleHelper","MAdsPrefsFeedback","MBugNub","MParent","MPageController","MRequest","MEditComposerEntry","SaveStateHandler","setTimeoutAcrossTransitions","Stratcom","URI","XAdsPreferencesAdInfoControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var aa='storyFlyout',ba='appendPhotosStoryButton',ca='hideStoryButton',da='unfollowActorButton',ea='blockActorPostsButton',fa='markAsSpamStoryButton',ga='afroDirectAction',ha='removeStoryButton',ia='removeReviewButton',ja='editHistoryButton',ka='editPostButton',la='write-recommendation',ma='editPostComposer',na='publishNowButton',oa='reschedulePostButton',pa='editPrivacyButton',qa='turnOffNotifButton',ra='zombieStoryButton',sa='reportBug',ta='aboutThisAdButton',ua='fitnessEditButton',va='saveButton',wa='getNotificationsButton',xa='stopNotificationsButton',ya='saved_for_later:caret_action',za='click',ab='imp',bb='hideStoryOnClick',cb='action-title',db='action-subtitle',eb='adsPreferences',fb='adsPreferencesFeedback',gb='moreOptions',hb='backButton',ib=[ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,bb,cb,eb,fb],jb=5,kb='enabled_action',lb='unfold_action',mb='NFXResolveProblemAction',nb=false,ob=null;function pb(){clearTimeout(ob);nb=false;}x.listen('m:page:render:cache:start',null,function(){nb=true;clearTimeout(ob);ob=w(pb,50);x.listen('m:page:iui:response:complete',null,function(){pb();x.removeCurrentListener();});});x.listen('m:page:loading',null,pb);var qb={};function rb(kc){var lc=new y(kc);lc.removeQueryData('gfid');return lc.toString();}function sb(kc,lc){if(!nb)qb[rb(kc)]=lc;}function tb(kc){return qb[rb(kc)];}function ub(event,kc){var lc=kc.getCausalElement(),mc=n.get(lc),nc=vb(lc),oc=n.get(nc),pc=oc.linkdata,qc=null;if(event.getNode(ca)){qc=mc.hideURI;}else if(event.getNode(da)||event.getNode(ea)){qc=mc.hideAllURI;}else if(event.getNode(fa)){qc=mc.markAsSpamURI;}else if(event.getNode(ha)||event.getNode(ia)){qc=mc.removeURI;}else if(event.getNode(ja)){qc=mc.editHistoryURI;}else if(event.getNode(qa)){qc=mc.turnOffNotifURI;}else if(event.getNode(ga)){var rc=event.getNode(ga);qc=n.get(rc).uri;}else if(event.getNode(ta)){qc=mc.aboutThisAdURI;}else if(event.getNode(eb)){qc=mc.adsPrefsURI;}else if(event.getNode(na)){qc=mc.publishNowURI;}else if(event.getNode(oa)){qc=mc.reschedulePostURI;}else if(event.getNode(va)){var sc=v.isSaveAction(mc.saveInfo.objectIDs);qc=sc?mc.saveInfo.saveURI:mc.saveInfo.unsaveURI;}else if(event.getNode(wa)||event.getNode(xa)){var tc=new y(mc.setNotificationsURI);tc.addQueryData('subscribe',!!event.getNode(wa));qc=tc.toString();}var uc=new y(qc);uc.addQueryData('dom_id',nc.id);var vc=mc.hideParams;if(!vc){uc.addQueryData('_ft_',pc);return uc;}var wc=n.get(m.find(nc,'div','scroll-area')),xc=wc.scrollArea,yc=xc.getChildAtPageIndex(xc.getScrollPageIndex()),zc=n.get(m.find(yc,'*','hScrollingItem')),ad=vc[zc.position];uc.addQueryData(ad);var bd=n.get(yc).adId,cd=n.get(yc).linkdata;if(cd)pc=cd;if(bd){n.set(nc,{ai:bd});pc+=':ai.'+bd;}uc.addQueryData('_ft_',pc);return uc;}function vb(kc){var lc=r.bySigil(kc,'story-popup-metadata');return lc;}function wb(kc){if(kc===va||kc===ga){return null;}else return kc;}function xb(event,kc){var lc;for(var mc=0;mc<ib.length;mc++){var nc=ib[mc];if(event.getNode(nc)){if(nc===ga){var oc=event.getNode(nc);lc=n.get(oc).option_name;}else if(nc===va){var pc=n.get(event.getNode(aa)).layer,qc=n.get(pc.getCausalElement()).saveInfo,rc=v.isSaveAction(qc.objectIDs);lc=rc?'save':'unsave';}else lc=wb(nc);break;}}if(lc)yb(lc,'clk',kc);}function yb(kc,lc,mc){var nc,oc,pc;if(mc){nc=mc.is_self_story;oc=mc.is_sponsored;pc=mc.location;}i.log('FeedStoryOptionMenuLoggerConfig',{option_name:kc,event_type:lc,is_sponsored:oc,is_self_story:nc,m_touch_feed_location:pc});}function zb(kc,lc){if(lc){k.removeClass(kc,"_53l_");k.addClass(kc,"_53m0");}else{k.removeClass(kc,"_53m0");k.addClass(kc,"_53l_");}}function ac(kc,lc){var mc=n.get(kc);mc.uri=lc.uri;mc.option_name=lc.option_name;var nc=m.find(kc,'div',cb);nc.textContent=lc.title;var oc=m.scry(kc,'div',db)[0];if(oc){var pc=lc.chevron_subtitle;if(pc){oc.textContent=pc;}else k.addClass(nc,"_320v");}var qc=m.scry(kc,'i')[0];if(qc)m.replace(qc,lc.icon);o.toggleActionBubbleItem(kc,true);if(lc.option_name===mb){x.addSigil(kc,lb);}else x.removeSigil(kc,lb);}function bc(kc,lc,mc,nc){for(var oc in lc)if(lc.hasOwnProperty(oc)){var pc=m.scry(kc,'*',oc)[0];if(pc){var qc=lc[oc];o.toggleActionBubbleItem(pc,qc);if(qc){var rc=wb(oc);if(rc)yb(rc,'imp',nc);switch(oc){case ba:var sc=n.get(pc);sc.dialogURI=mc.appendPhotosURI;break;case ka:var tc=n.get(pc);tc.dialogURI=mc.editPostURI;break;case la:var uc=mc.rating_info,vc=n.get(pc);vc=j(vc,uc);n.set(pc,vc);break;case na:var wc=n.get(pc);wc.dialogURI=mc.publishNowURI;break;case oa:var xc=n.get(pc);xc.dialogURI=mc.reschedulePostURI;break;case pa:var yc=n.get(pc);yc.dialogURI=mc.editPrivacyURI;var zc=m.scry(pc,'i')[0];if(zc)m.replace(zc,mc.privacyIcon);break;case ja:var ad=n.get(pc);ad.dialogURI=mc.editHistoryURI;break;case ua:var bd=n.get(pc);bd.dialogURI=mc.fitnessEditURI;break;case va:var cd=mc.saveInfo,dd=v.isSaveAction(cd.objectIDs),ed=v.isInTransition(cd.objectIDs),fd=m.find(pc,'div',cb);fd.textContent=dd?cd.saveTitle:cd.unsaveTitle;k.conditionClass(pc,"_kh1",ed);var gd=cd.logData;h.post(ya,{action:ab,collection_id:gd.collection_id,surface:gd.surface,story_id:gd.story_id,is_save:dd,is_multi:gd.is_multi});if(dd){yb('save','imp',nc);}else yb('unsave','imp',nc);x.addSigil(pc,lb);break;case fb:var hd=m.scry(pc,'i')[0];if(hd){var id=mc.adsPrefsFeedback?mc.adsPrefsIconActive:mc.adsPrefsIconPassive;m.replace(hd,id);}x.addSigil(pc,lb);break;case eb:x.addSigil(pc,lb);break;case gb:x.addSigil(pc,lb);break;}}}}}function cc(){var kc=n.get(this.getCausalElement()),lc=this.getRoot();k.removeClass(lc,"_53m1");k.addClass(lc,"_53m2");var mc=kc.storyInfo;yb('root','clk',mc);var nc={};nc[gb]=!!kc.chevron_cleanup;nc[hb]=false;nc[ra]=!!kc.zombieStoryURI&&!!kc.isEmployeeAccount;nc[sa]=!!kc.isEmployeeAccount;nc[ta]=!!kc.aboutThisAdURI;nc[ca]=!!kc.hideURI;var oc=kc.setNotificationsURI,pc=oc&&tb(oc);nc[wa]=!!(oc&&!pc);nc[xa]=!!pc;nc[ba]=!!kc.appendPhotosURI;var qc=!!kc.isEditComposer,rc=kc.rating_info,sc=!!kc.editPostURI;nc[ka]=sc&&!qc&&!rc;nc[ma]=sc&&qc&&!rc;nc[la]=sc&&!!rc;nc[ia]=!!kc.removeURI&&!!rc;nc[ha]=!!kc.removeURI&&!rc;nc[na]=!!kc.publishNowURI;nc[oa]=!!kc.reschedulePostURI;nc[ja]=!!kc.editHistoryURI;nc[qa]=!!kc.turnOffNotifURI;nc[pa]=!!kc.editPrivacyURI;nc[fa]=!!kc.markAsSpamURI;nc[ua]=!!kc.fitnessEditURI;var tc=m.scry(lc,'*',ga);if(tc){var uc=kc.afroDirectActions;for(var vc=0;vc<tc.length;vc++){var wc=tc[vc];if(uc&&uc[vc]){ac(wc,uc[vc]);yb(uc[vc].option_name,'imp',mc);}else o.toggleActionBubbleItem(wc,false);}}nc[va]=!!kc.saveInfo;nc[eb]=!!kc.adID;nc[fb]=!!kc.adsPrefsIconActive;bc(lc,nc,kc,mc);if(!!kc.chevron_cleanup){var xc=0,yc=m.scry(lc,'*',lb);if(mc.is_sponsored){jb=6;}else jb=5;yc.forEach(function(ad){if(x.hasSigil(ad,kb))xc++;},this);var zc=m.scry(lc,'*',kb);zc.forEach(function(ad){var bd=x.hasSigil(ad,lb),cd=(xc<jb)&&x.hasSigil(ad,ga),dd=bd||cd;zb(ad,!dd);if(!bd&&cd)xc++;},this);if(xc<=1)zc.forEach(function(ad){var bd=x.hasSigil(ad,gb)||x.hasSigil(ad,hb);zb(ad,bd);},this);}}function dc(event){var kc=n.get(event.getNode(aa)),lc=kc.layer,mc=lc.getCausalElement(),nc=vb(mc),oc=event.getNode(bb),pc=n.get(mc),qc=pc.storyInfo;xb(event,qc);if(event.getNode(ra)){window.open(n.get(mc).zombieStoryURI);lc.hide();return;}if(event.getNode(sa)){lc.hide();q.captureState();s.forceLoad(q.getReportURI('StoryChevron','',n.get(mc).serializedStory));return;}if(event.getNode(ja)){s.load(n.get(mc).editHistoryURI);lc.hide();return;}if(event.getNode(ma)){u.invoke(pc.composition,pc.composer_uri,pc.edit_callsite);return;}if(event.getNode(eb)){var rc=new z().setInt('ad_id',n.get(mc).adID).getURI();s.load(rc);lc.hide();return;}var sc=event.getNode(fb);if(sc){var tc=m.scry(sc,'i')[0],uc=n.get(mc).adID,vc=!n.get(mc).adsPrefsFeedback,wc=vc?n.get(mc).adsPrefsIconActive:n.get(mc).adsPrefsIconPassive;p.toggle(tc,wc,uc,vc);n.set(mc,{adsPrefsFeedback:vc});return;}var xc=event.getNode(gb);if(xc){k.removeClass(lc.getRoot(),"_53m2");k.addClass(lc.getRoot(),"_53m1");var yc=m.scry(lc.getRoot(),'*',hb)[0];if(yc)o.toggleActionBubbleItem(yc,true);return;}var zc=event.getNode(hb);if(zc){k.removeClass(lc.getRoot(),"_53m1");k.addClass(lc.getRoot(),"_53m2");o.toggleActionBubbleItem(zc,false);return;}var ad=ub(event,lc),bd=new t(ad.toString());if(event.getNode(va)){var cd=n.get(mc).saveInfo,dd=v.isSaveAction(cd.objectIDs),ed=v.isInTransition(cd.objectIDs);if(ed)return;if(dd){v.saving(cd.objectIDs);}else v.unsaving(cd.objectIDs);bd.listen('error',function(){var hd=!v.isSaveAction(cd.objectIDs);if(hd){v.unsaved(cd.objectIDs);}else v.saved(cd.objectIDs);});var fd=cd.logData;h.post(ya,{action:za,collection_id:fd.collection_id,surface:fd.surface,story_id:fd.story_id,is_save:dd,is_multi:fd.is_multi});}var gd=event.getNode(ta);if(gd){window.open(ad.toString());return;}bd.send();oc&&m.hide(nc);lc.hide();}function ec(kc,event){var lc=event.getNode('undo-content');if(lc){var mc=n.get(lc).storyDomID,nc=n.get(event.getTarget());if(nc&&nc.href){var oc=n.get(g(mc)),pc=oc.linkdata;if(oc.ai)pc+=':ai.'+oc.ai;var qc=(new y(nc.href)).addQueryData('_ft_',pc),rc=new t(qc.toString());rc.send();}if(kc)m.show(g(mc));m.hide(lc);}}var fc,gc;function hc(){return fc;}function ic(){fc=null;for(var kc=0,lc=gc.length;kc<lc;kc++)gc[kc].remove();gc.length=0;}function jc(kc,lc){var mc=false;if(fc){mc=fc.isShown();fc.destroy();ic();}fc=kc;var nc=fc.getRoot();x.addSigil(nc,aa);gc=[fc.addListener('beforeshow',cc,fc),m.listen(nc,'click',null,dc),x.listen('m:page:unload',null,ic),x.listen('click','undo-hide-button',ec.bind(this,true)),x.listen('click','unfab-button',ec.bind(this,false))];x.invoke('m:story:action-bubble-initialized',null,{menuNubID:lc,wasOpen:mc});}e.exports={init:jc,getActionBubble:hc,setNotificationState:sb};},null);
__d("MShareAngoraAttachment",["Stratcom"],function(a,b,c,d,e,f,g){var h=false,i=function(j){if(h)return;h=true;window.addEventListener('error',function(event){if(event.target.nodeName=='IMG'){for(var k=event.target;k!=document.body&&!g.hasSigil(k,'shareAngoraAttachmentMedia');k=k.parentNode);if(k!=document.body)k.style.display='none';}},true);};f.registerDeadImageListener=i;},null);
__d("MMoreItemAutomatic",["MPageCache","MPageControllerPath","MRequest","MRequestTypes","MResponseData","MStopNGo","MURI","MViewport","Stratcom","Vector","copyProperties","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(t){"use strict";this._href=t.href;this._proximityPages=t.proximity_pages||7;this._loggerID=t.logger_id;this._loggerName=t.logger_name;this._loadImmediately=t.load_first_immediately;var u=document.getElementById(t.id);if(u){this._verticalOffset=p.getPos(u).y;this.setMoreItem(u);this.setPersistOnReload(t.persist_on_reload);this._setUpSendRequest();}else this.uninstall();}s.prototype.isElementVisible=function(){"use strict";if(!this._isElementRendered())return false;var t,u=this.getMoreItem();if('getBoundingClientRect' in u){var v=u.getBoundingClientRect(),w=v.width/10,x=v.height/10,y=v.left,z=v.right,aa=v.top,ba=v.bottom,ca;while(ca!==u&&y<=z&&aa<=ba){y+=w;aa+=x;ca=document.elementFromPoint(Math.round(y),Math.round(aa));}t=ca===u;}else{var da=p.getPos(u).y,ea=da+p.getDim(u).y,fa=n.getScrollTop(),ga=fa+n.getUseableHeight();t=da<=ga&&ea>=fa;}return t;};s.prototype._checkScrolledIntoFetched=function(){"use strict";var t=this.getMoreItem();if(t)if(this._verticalOffset-n.getScrollTop()<0){o.invoke('m:more_item_automatic:items_visible',this._loggerID);this.uninstall();}};s.prototype._onGo=function(){"use strict";if(!this._itemsLoaded){this._readyToUpdate=true;if(this.isElementVisible())o.invoke('m:more_item_automatic:spinner_visible',this._loggerID);if(!this._requestSent){this._sendRequestIfScrolledDown();}else this._updateItems();}else this._checkScrolledIntoFetched();};s.prototype._onStop=function(){"use strict";if(!this._itemsLoaded)this._readyToUpdate=false;};s.prototype._onAjaxPageLoad=function(){"use strict";if(!this._requestSent&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false;}};s.prototype._setUpSendRequest=function(){"use strict";if(!this._requestSent&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false;}this._listeners=[l.listen('go',this._onGo.bind(this)),l.listen('stop',this._onStop.bind(this)),o.listen('m:ajax:complete',null,this._onAjaxPageLoad.bind(this))];};s.prototype._existsOnPage=function(){"use strict";var t=this.getMoreItem();return t?document.documentElement.contains(t):false;};s.prototype.uninstall=function(){"use strict";while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._requestSent=false;this._prefetchResponse=null;this.setMoreItem(null);this.setPersistOnReload(false);};s.prototype.withinProximity=function(){"use strict";var t=this.getMoreItem();return t&&p.getPos(t).y-n.getScrollTop()<n.getUseableHeight()*(1+this._proximityPages);};s.prototype._updateItems=function(){"use strict";if(this._prefetchResponse){if(this._existsOnPage()){this._prefetchResponse.process();g.addCachedIUIResponse(h.getRequestPath(),this._prefetchResponse);}o.invoke('m:more_item_automatic:items_loaded',this._loggerID);this._itemsLoaded=true;}};s.prototype._isElementRendered=function(){"use strict";var t=this.getMoreItem();if(!t||!t.offsetHeight)return false;return true;};s.prototype._sendRequestIfScrolledDown=function(){"use strict";if(this.isElementVisible()||(this._isElementRendered()&&n.getScrollTop()>100&&this.withinProximity()))this._sendRequest();};s.prototype._sendRequest=function(){"use strict";var t=new i(new m(this._href).setAsync(true).toString()).setType(j.DEPENDENT);t.setAutoProcess(false);var u=[],v=false,w=function(){if(!v&&u.length){v=true;u.shift().process();}};t.listen('response',function(x){x=new k(x);x.listen('complete',function(){v=false;w();});if(x.isPagelet()){u.push(x);w();return;}v=true;this._prefetchResponse=x;if(this._readyToUpdate)this._updateItems();}.bind(this));t.send();this._requestSent=true;};r(s,{moreItem:null,persistOnReload:false});q(s.prototype,{_requestSent:false,_readyToUpdate:true,_moreStartTime:0,_moreLogged:false,_proximityPages:null,_prefetchResponse:null,_listeners:null,_href:null,_loggerName:null,_loggerID:null,_itemsLoaded:false,_verticalOffset:0});q(s,{TRY_AGAIN_DELAY:1500});e.exports=s;},null);
__d("InitMMoreItemAutomatic",["MMoreItemAutomatic","Stratcom"],function(a,b,c,d,e,f,g,h){var i,j=function(k){if(!i){i={};h.listen('m:page:loading',null,function(m){for(var n in i)if(!i[n].getPersistOnReload()){i[n].uninstall();delete i[n];}});}var l=k.id;if(i[l])i[l].uninstall();i[l]=new g(k);};f.main=j;},null);
__d("MMoreItemAutomaticLogger",["Stratcom","MarauderLogger","copyProperties"],function(a,b,c,d,e,f,g,h,i){function j(k,l){this._loggerName=k;this._loggerID=l;this._listeners=[g.listen('m:page:unload',null,this._pageUnload.bind(this)),g.listen('m:more_item_automatic:spinner_visible',null,this._onSpinnerVisible.bind(this)),g.listen('m:more_item_automatic:items_loaded',null,this._onItemsLoaded.bind(this)),g.listen('m:more_item_automatic:items_visible',null,this._onItemsVisible.bind(this))];}i(j.prototype,{_loggerName:'',_loggerID:'',_spinnerUnloaded:false,_spinnerVisible:false,_spinnerStartTime:null,_cleanup:function(){while(this._listeners&&this._listeners.length)this._listeners.pop().remove();},_pageUnload:function(){if(this._spinnerVisible){this._spinnerUnloaded=true;this._logLoadingSpinnerTime(this._getTimeSpan(),true);}this._cleanup();},_onSpinnerVisible:function(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerVisible){this._spinnerVisible=true;this._spinnerStartTime=Date.now();}},_onItemsLoaded:function(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerUnloaded){this._logLoadingSpinnerTime(this._getTimeSpan(),false);this._spinnerVisible=false;this._spinnerStartTime=null;}},_onItemsVisible:function(event){if(event.getPath()[0]===this._loggerID)this._logItemsVisible();},_getTimeSpan:function(){return this._spinnerVisible?Date.now()-this._spinnerStartTime:0;},_logLoadingSpinnerTime:function(k,l){h.log('m_more_items_automatic_spinner_visible_time',(void 0),{name:this._loggerName,id:this._loggerID,visible_time:k,spinner_unloaded:l});},_logItemsVisible:function(){h.log('m_more_items_automatic_fetched_items_visible',(void 0),{name:this._loggerName,id:this._loggerID});this._cleanup();}});j.init=function(k,l){new j(k,l);};e.exports=j;},null);
__d("Popover",["setTimeoutAcrossTransitions","CSS","DOM","MAria","MViewport","Stratcom","Vector","$","copyProperties","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=40;function r(s){"use strict";var t=s.flyout;this.flyout=(typeof t=='string')?n(t):t;this.content=i.scry(this.flyout,'div','flyout-content')[0];this.options=s;this._onOrientationChange=this._reposition.bind(this);h.conditionClass(this.flyout,'popover_flyout',true);var u=s.button;if(u){this.button=(typeof u=='string')?n(u):u;this.buttonClickListener=i.listen(this.button,'click',null,this._openHandler.bind(this));this.button.setAttribute('role','button');j.setupPopup(this.button,this.flyout);}var v=s.flyoutAnchor;if(v){this.flyoutAnchor=(typeof v=='string')?n(v):v;}else this.flyoutAnchor=this.button;if(this.options.flyoutFromRoot)this.flyoutClickListener=i.listen(this.flyout,'click',null,this._openHandler.bind(this));if(this.options.touchstart_callback)this.flyoutTouchStartListener=i.listen(this.flyout,'touchstart',null,this._touchStartHandler.bind(this));if(this.options.touchmove_callback)this.flyoutTouchMoveListener=i.listen(this.flyout,'touchmove',null,this._touchMoveHandler.bind(this));if(this.options.touchend_callback)this.flyoutTouchEndListener=i.listen(this.flyout,'touchend',null,this._touchEndHandler.bind(this));r._instances[this.flyout.id]=this;}r.prototype.isOpen=function(){"use strict";return !!this._isOpen;};r.prototype.open=function(){"use strict";if(this.isOpen())return;if(r._activePopover)r._activePopover.close();r._activePopover=this;this._isOpen=true;this.constraint=null;h.conditionClass(this.flyout,'popover_hidden',false);if(this.options.flyoutFromRoot)this._absolutePositionFlyout();this._position();if(!this.options.heightConstraint){h.conditionClass(document.body,'disableClicks',true);this.globalListener=l.listenCapture('click',null,this._closeHandler.bind(this));}window.addEventListener('orientationchange',this._onOrientationChange,false);j.showPopup(this.button,this.flyout);if(this.options.ensureVisible){var s=k.getScrollTop(),t=this._getElementPosition(this.flyout).y,u=t+this.flyout.offsetHeight,v=u-(s+k.getUseableHeight());if(v>0){var w=Math.min(v,Math.max(t-s-q,0));k.scrollTo(0,s+w);}}this.invoke('open');};r.prototype.close=function(s){"use strict";if(!this.isOpen())return;r._activePopover=null;this._isOpen=false;h.conditionClass(this.flyout,'popover_hidden',true);if(this.options.flyoutFromRoot){this.flyoutParent.appendChild(this.flyout);delete this.flyoutParent;}g(function(){h.conditionClass(document.body,'disableClicks',false);}.bind(this),400);this.globalListener&&this.globalListener.remove();window.removeEventListener('orientationchange',this._onOrientationChange,false);this._releaseConstraint();j.hidePopup(this.button,this.flyout);if(!s)this.invoke('close');};r.prototype.clear=function(){"use strict";this.globalListener&&this.globalListener.remove();this.buttonClickListener&&this.buttonClickListener.remove();this.flyoutClickListener&&this.flyoutClickListener.remove();this.flyoutTouchStartListener&&this.flyoutTouchStartListener.remove();this.flyoutTouchMoveListener&&this.flyoutTouchMoveListener.remove();this.flyoutTouchEndListener&&this.flyoutTouchEndListener.remove();delete r._instances[this.flyout.id];};r.prototype.refreshConstraints=function(){"use strict";if(!this._isOpen)return false;var s=this.flyout;this._releaseConstraint();if(this.options.heightConstraint){s.style.minHeight=k.getUseableHeight()+'px';this.constraint=k.addHeightConstraint(m.getDim(this.content).y+this._getElementPosition(s).y);}else this.constraint=k.addMinHeightConstraint(m.getDim(s).y+this._getElementPosition(s).y+r._MARGIN);};r.prototype._getTouchPoint=function(event){"use strict";var s=event.getRawEvent().targetTouches[0],t={x:s?s.screenX:0,y:s?s.screenY:0};return t;};r.prototype._touchStartHandler=function(event){"use strict";this.options.touchstart_callback(this._getTouchPoint(event));};r.prototype._touchMoveHandler=function(event){"use strict";if(this.isOpen())this.options.touchmove_callback(this._getTouchPoint(event));};r.prototype._touchEndHandler=function(event){"use strict";this.options.touchend_callback(this._getTouchPoint(event));};r.prototype._openHandler=function(event){"use strict";event.prevent();var s=this.isOpen();if(s&&!this.options.preventClose){this.close();}else if(!s){var t=i.scry(document,'input');for(var u=0;u<t.length;u++)t[u].blur();this.open();}};r.prototype._closeHandler=function(event){"use strict";if(!event.getNode('popover'))this.close();};r.prototype._getElementPosition=function(s){"use strict";var t=s.offsetLeft,u=s.offsetTop;s=s.offsetParent;while(s&&s!==document.documentElement){t+=s.offsetLeft;u+=s.offsetTop;var v=window.getComputedStyle(s);t+=parseInt(v.getPropertyValue('border-left-width').slice(0,-2),10);u+=parseInt(v.getPropertyValue('border-top-width').slice(0,-2),10);s=s.offsetParent;}return new m(t,u);};r.prototype._absolutePositionFlyout=function(){"use strict";this.flyoutParent=this.flyout.parentNode;n('root').appendChild(this.flyout);var s=this._getElementPosition(this.flyout.parentNode),t=this._getElementPosition(this.flyoutAnchor),u=m.getDim(this.flyoutAnchor),v=t.y-s.y+u.y;this.flyout.style.position='absolute';this.flyout.style.top=v+'px';};r.prototype._position=function(){"use strict";var s=this.flyout;if(this.flyoutAnchor&&this.options.positionNub){var t=this._getElementPosition(this.flyoutAnchor),u=i.find(this.flyout,'*','nub'),v=m.getDim(u).x,w=m.getDim(this.flyoutAnchor).x,x=this._getElementPosition(s);(new m(t.x-x.x+(w-v)/2,0)).setPos(u);}this.refreshConstraints();};r.prototype._reposition=function(){"use strict";g(this._position.bind(this),0);};r.prototype._releaseConstraint=function(){"use strict";if(this.constraint){this.constraint.release();this.constraint=null;}};r.getInstance=function(s){"use strict";return r._instances[s];};r.clearAll=function(){"use strict";for(var s=0;s<r._instances.length;s++)r._instances[s].clear();};p(r,['open','close']);o(r,{_activePopover:null,_MARGIN:40,_instances:{}});e.exports=r;},null);
__d("MQuickSearch",["DOM","HTML","MRequest","MRequestTypes","MViewport","Stratcom","Vector","$","copyProperties","createArrayFromMixed","destroyOnUnload","eventsMixinDeprecated","setIntervalAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=[];function u(v,w){"use strict";this._uri=v.uri;this._args=v.args||{};var x=n(v.nodeID);this._input=g.find(x,'input','quicksearch-input');this._button=g.scry(x,'*','quicksearch-button')[0];this._container=n(v.containerID);this._resultsBoxID=v.resultsBoxID;this._resultsBox=n(this._resultsBoxID);this._shouldScroll=v.shouldScroll;if(v.throbber)this._throbber=new h(v.throbber);this._request=null;this._searchLogger=w||null;this._listeners=[g.listen(this._input,'focus',null,this._focus.bind(this)),g.listen(this._input,'blur',null,this._cleanup.bind(this)),g.listen(this._input,'keydown',null,this._handleKeyDown.bind(this)),g.listen(this._input,'keyup',null,this._handleKeyUp.bind(this))];if(this._button)this._listeners.push(g.listen(this._button,'click',null,this._click.bind(this)));if(this._args.bootstrap)this.search(this._input.value);t.push(this);q(function(){l.removeCurrentListener();t.forEach(function(y){return y._destroy();});t=[];});}u.prototype._handleKeyDown=function(event){"use strict";this._scrollToContainer();this._previousText=this._input.value;};u.prototype._handleKeyUp=function(event){"use strict";if(event.getSpecialKey()==='delete'&&(this._args.bootstrap||this._args.showInitialResultsOnClear)){var v=this._input.value;if(v.trim()===''&&v!==this._previousText)this.reset();}};u.prototype._scrollToContainer=function(){"use strict";if(this._shouldScroll)k.scrollTo(m.getPos(this._container));};u.prototype._update=function(){"use strict";var v=this._input.value;if(this._previousText==v)return;this._previousText=v;if(/^\s*$/.test(v)&&!this._args.bootstrap){this._resetContent();this._abortRequest();return;}this._saveInitialNodes();this.search(v);};u.prototype.search=function(v){"use strict";if(this.invoke('search',v).getPrevented())return;this._throbber&&g.setContent(this._resultsBox,this._throbber);this.addQueryParameters({q:v||''});this._abortRequest();if(this._searchLogger)this._searchLogger.onSearch(this._args);this._request=new i(this._uri);this._request.setType(j.DEPENDENT);this._request.listen('done',function(w){this._resultsBox=n(this._resultsBoxID);if(this._searchLogger)this._searchLogger.onResults(this._request,this._resultsBox);if(this._needsDefaultNodes){this._saveInitialNodes();this._needsDefaultNodes=false;}this._request=null;}.bind(this));this._request.setMethod('GET');this._request.setData(this._args).send();};u.prototype._abortRequest=function(){"use strict";this._request&&this._request.abort()&&(this._request=null);};u.prototype._resetContent=function(){"use strict";this._resultsBox=n(this._resultsBoxID);g.setContent(this._resultsBox,this._initialNodes);};u.prototype.resetToThrobber=function(){"use strict";this._resultsBox=n(this._resultsBoxID);if(this._throbber&&this._resultsBox)g.setContent(this._resultsBox,this._throbber);};u.prototype.addQueryParameters=function(v){"use strict";o(this._args,v);};u.prototype.maybeAddQueryParameters=function(v){"use strict";for(var w in v)if(!(w in this._args))this._args[w]=v[w];};u.prototype.clear=function(){"use strict";this._input.value='';this._initialNodes=null;};u.prototype._focus=function(event){"use strict";this._focused=true;if(this._button){this._button.setAttribute('type','button');this._button.disabled=false;}this._scrollToContainer();this._previousText=this._input.value;clearInterval(this._interval);this._interval=s(this._update.bind(this),300);};u.prototype._click=function(event){"use strict";event.prevent();this.reset();};u.prototype._cleanup=function(){"use strict";if(this._searchLogger)this._searchLogger.onCleanup();this._focused=false;if(!this._input.value&&this._button){this._button.setAttribute('type','submit');this._button.disabled=true;}clearInterval(this._interval);};u.prototype.reset=function(){"use strict";this._abortRequest();this._cleanup();this._saveInitialNodes();this._resetContent();this._input.value='';this._input.blur();if(this._button){this._button.setAttribute('type','submit');this._button.disabled=true;}if(this._args.showInitialResultsOnClear)this.search('');this._scrollToContainer();};u.prototype._saveInitialNodes=function(){"use strict";if(!this._initialNodes)this._initialNodes=p(this._resultsBox.childNodes);};u.prototype._destroy=function(){"use strict";this._listeners.forEach(function(v){return v&&v.remove();});this._listeners.length=0;};u.prototype.setNeedsDefaultNodes=function(){"use strict";this._needsDefaultNodes=true;};u.getInstances=function(){"use strict";return t;};r(u,['search']);o(u.prototype,{_uri:null,_args:null,_input:null,_button:null,_container:null,_resultsBox:null,_shouldScroll:true,_throbber:null,_focused:false,_initialNodes:null,_previousText:null,_interval:null,_needsDefaultNodes:false,_searchLogger:null});e.exports=u;},null);