/*!CK:3704446809!*//*1418630807,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["uBwXU"]); }

__d("MItemConstants",[],function(a,b,c,d,e,f){e.exports={SHORT_HEIGHT:43,TALL_HEIGHT:58};},null);
__d("MPageletTypes",[],function(a,b,c,d,e,f){e.exports={CHROME:"chrome",CONTENT:"content"};},null);
__d("PlatformVersions",[],function(a,b,c,d,e,f){e.exports={LATEST:"v2.3",versions:{UNVERSIONED:"unversioned",V1_0:"v1.0",V2_0:"v2.0",V2_1:"v2.1",V2_2:"v2.2",V2_3:"v2.3"}};},null);
__d("MTouchChannelManager",["MChannelManager","Stratcom"],function(a,b,c,d,e,f,g,h){function i(l){h.invoke(l.type,null,l);}var j=false;function k(){if(j)return;j=true;g.addListener(g.CHANNEL_MESSAGE,i);h.listen(['m:onload','m:jewels:init-counts'],null,g.startChannel);}f.initialize=k;},null);
__d("MPresenceIcon",["setTimeoutAcrossTransitions","DOM","DataStore","MRequest","MURI","Stratcom"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=0,n=1,o=2,p;function q(){var r=h.scry(document.body,'i','presence-icon'),s=[];for(var t=0,u=r.length;t<u;++t){var v=i.get(r[t]);if(v.userid&&!s[v.userid])s[v.userid]=1;}var w=new k('/chat/presence_icon.php').setAsync(true).toString(),x=new j(w).setData({ids:Object.keys(s)}).setIgnoreErrors(true);x.listen('done',function(y){for(var z=0,aa=r.length;z<aa;++z){var ba=i.get(r[z]);if(ba&&ba.userid&&((l.hasSigil(r[z],'online-icon'))&&(y[ba.userid]==n))||((l.hasSigil(r[z],'mobile-icon'))&&(y[ba.userid]==o))){h.show(r[z]);}else h.hide(r[z]);}});x.listen('finally',function(y){clearTimeout(p);p=g(q,m);});x.send();}m=m?m*100:60000;q();},null);
__d("MVideoChat",["MRequest","Stratcom","MURI"],function(a,b,c,d,e,f,g,h,i){var j=function(k){h.listen('video',null,function(event){var l=event.getData();if(l.message_type==1){var m=k.uri,n=new g(new i(m).setAsync(true).toString()),o={callId:l.parameters.callId,skypeId:l.parameters.skypeIdCallee,idTarget:l.from,data:'client_not_supported'};n.setData(o);n.send();}});};f.main=j;},null);
__d("MJewel",["setTimeoutAcrossTransitions","CSS","DOM","MHistory","MJSEnvironment","MLogState","MTabbable","MViewport","Popover","Stratcom","$","copyProperties","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=10;function u(v,w,x){"use strict";this._sigil=v;this._marauderModuleName=x;this.options=w||{};this._jewelNode=q(u.JEWEL_NAV_NODE_ID);this._softState=w.softState||'jewel='+(u.nextID++);this._duringInit=false;this._previousScrollingPoint=null;this._createPopover();p.listen('m:history:change',null,function(event){if(event.getData().soft===this._softState){this._popover&&this._popover.open();}else this._popover&&this._popover.close();}.bind(this));}u.prototype.isInitialized=function(){"use strict";var v=this.options.contentsSigil||'contents';return !!i.scry(this._jewelNode,'*',v)[0];};u.prototype._getJewelElement=function(){"use strict";return i.find(this._jewelNode,'div',this._sigil);};u.prototype._getCountElement=function(){"use strict";return i.find(this._getJewelElement(),'span','count');};u.prototype._getContentsElement=function(){"use strict";var v=this.options.contentsSigil||'contents';return i.find(this._getJewelElement(),'*',v);};u.prototype._getFlyoutElement=function(){"use strict";return i.find(this._getJewelElement(),'*','flyout');};u.prototype.getCount=function(){"use strict";return this._count;};u.prototype.setDuringInit=function(v){"use strict";this._duringInit=v;};u.prototype._updateCountElement=function(){"use strict";var v=this._getJewelCount();i.setContent(this._getCountElement(),''+v);var w=this._getJewelElement(),x=this._count>0;h.conditionClass(w,'noCount',!x);h.conditionClass(w,'hasCount',x);if(!this._duringInit&&this.options.mJewelMarauderLogger)this._logMarauderEvent('updated');};u.prototype.setCount=function(v){"use strict";if(v<0)return;this._count=v;this._updateCountElement();};u.prototype.setHeaderText=function(v,w){"use strict";if(!v||!w)return;var x=this._getFlyoutElement();if(!x)return;var y=i.find(x,'*',v);if(!y)return;var z=y.cloneNode(true);z.innerText=w;i.replace(y,z);};u.prototype.handleViewedContent=function(){"use strict";if(this.getCount()>0&&this.isInitialized()){this.setCount(0);this.invoke('cleared');}else this.invoke('jewel_click');};u.prototype.setMenuContent=function(v){"use strict";i.setContent(this._getFlyoutElement(),v);if(this.isOpen())this.handleViewedContent();};u.prototype.prependMenuContent=function(v){"use strict";i.prependContent(this._getContentsElement(),v);};u.prototype.removeMenuContent=function(v){"use strict";var w=document.getElementById(v);if(w)i.remove(w);};u.prototype.updateMenuColor=function(v,w,x){"use strict";x?g(this._updateMenuColor.bind(this,v,w),u.MARK_READ_DELAY):this._updateMenuColor(v,w);};u.prototype._updateMenuColor=function(v,w){"use strict";var x=document.getElementById(v);if(x){h.conditionClass(x,u.M_AREA_LIGHTBLUE,!w);h.conditionClass(x,u.M_AREA_WHITE,w);}};u.prototype._createPopover=function(){"use strict";var v=this._getJewelElement(),w=i.find(v,'div','flyout');this._popover=new o({button:i.find(v,'*','icon'),flyout:w,ensureVisible:!this.options.heightConstraint,touchstart_callback:(this.options.mJewelMarauderLogger?this._onTouchStart.bind(this):null),touchmove_callback:(this.options.mJewelMarauderLogger?this._onTouchMove.bind(this):null),touchend_callback:(this.options.mJewelMarauderLogger?this._onTouchEnd.bind(this):null),heightConstraint:this.options.heightConstraint,preventClose:this.options.preventClose});this._onOpenListener=this._popover.listen('open',this._onOpen.bind(this));this._onCloseListener=this._popover.listen('close',this._onClose.bind(this));this._popoverClickListener=i.listen(w,'click',null,this._onPopoverClick.bind(this));if(k.IS_ANDROID&&k.GET_OS_VERSION>=4)this._scrollAreaNode=i.scry(w,'div','scroll-area')[0];};u.prototype.clear=function(){"use strict";this._onOpenListener&&this._onOpenListener.remove();this._onCloseListener&&this._onCloseListener.remove();this._popoverClickListener&&this._popoverClickListener.remove();this._popoverTouchStartListener&&this._popoverTouchStartListener.remove();this._touchMoveListener&&this._touchMoveListener.remove();this._touchStartListener&&this._touchStartListener.remove();this._popover&&this._popover.clear();};u.prototype._onPopoverClick=function(event){"use strict";l.updateLink(event,this.options.pos);this.options.clickCallback&&this.options.clickCallback(event);if(this.options.mJewelMarauderLogger)this._logMarauderEvent('clicked',event);};u.prototype._onPopoverTouchStart=function(event){"use strict";event.kill();};u.prototype._getJewelCount=function(){"use strict";if(this._count>0){return this._count;}else return this._unreadCount;};u.prototype._onOpen=function(){"use strict";if(this._scrollAreaNode){n.scrollToHeader();var v=document.documentElement;h.conditionClass(v,'hide-scroll',true);this._scrollAreaNode.style.maxHeight=v.offsetHeight-200+'px';}var w=this._getJewelCount();j.pushSoftState(this._softState);this.handleViewedContent();if(this.options.mJewelMarauderLogger)this.options.mJewelMarauderLogger.toggleModule(this._marauderModuleName,true,{jewel_count:w});p.invoke('m:jewel:flyout:open');h.conditionClass(this._getJewelElement(),'popoverOpen',true);var x=i.find(this._getJewelElement(),'div','flyout');m.focusTabbable(x);};u.prototype._onClose=function(){"use strict";if(this._scrollAreaNode){this._scrollAreaNode.style.minHeight='';h.conditionClass(document.documentElement,'hide-scroll',false);}p.invoke('m:jewel:flyout:close');h.conditionClass(this._getJewelElement(),'popoverOpen',false);if(this.options.mJewelMarauderLogger)this.options.mJewelMarauderLogger.toggleModule(this._marauderModuleName,false);j.popSoftState(this._softState);};u.prototype._onTouchStart=function(v){"use strict";this._previousScrollingPoint=v;};u.prototype._onTouchMove=function(v){"use strict";if(!this._previousScrollingPoint)return;var w=v.x-this._previousScrollingPoint.x,x=v.y-this._previousScrollingPoint.y,y=Math.sqrt(Math.abs(w)+Math.abs(x));if(y>=t){this._previousScrollingPoint=v;this._logMarauderEvent('scroll',{x:w,y:x});}};u.prototype._onTouchEnd=function(v){"use strict";this._previousScrollingPoint=null;};u.prototype._logMarauderEvent=function(v,w){"use strict";this.options.mJewelMarauderLogger.log(this._marauderModuleName,v,w);};u.prototype.isOpen=function(){"use strict";return this._popover&&this._popover.isOpen();};u.prototype.openPopover=function(){"use strict";this._popover&&!this._popover.isOpen()&&this._popover.open();};u.prototype.reregisterListeners=function(){"use strict";var v=this.isOpen();this.clear();this._createPopover();if(v)this._popover.open();};s(u,['cleared','jewel_click']);r(u,{M_AREA_WHITE:'acw',M_AREA_LIGHTBLUE:'aclb',MARK_READ_DELAY:3000,JEWEL_NAV_NODE_ID:'mJewelNav',nextID:0});r(u.prototype,{_sigil:null,_currentJewel:null,_count:0,_popover:null});e.exports=u;},null);
__d("MJewels",[],function(a,b,c,d,e,f){e.exports={REQUESTS:'requests',MESSAGES:'messages',NOTIFICATIONS:'notifications',SEARCH:'search',MORE:'more',NEWS_FEED:'news-feed'};},null);
__d("XFeedNewStoriesBadgeControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/feed\/badge\/",{});},null);
__d("MFeedJewel",["CSS","DOM","MHistory","MJewel","MJewels","MPageController","MRequest","Stratcom","SubscriptionsHandler","XFeedNewStoriesBadgeControllerURIBuilder","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s,t,u,v,w,x=9,y=30000;function z(ja){g.conditionClass(u,'popoverOpen',true);}function aa(ja){g.conditionClass(u,'popoverOpen',false);}function ba(){t=new o();t.addSubscriptions(n.listen('m:history:change',null,da),h.listen(q(j.JEWEL_NAV_NODE_ID),'click','feed',ea));}function ca(){t.release();t=null;}function da(ja){var ka=ja.getData().soft;for(var la=0,ma=Object.keys(k);la<ma.length;la++)if(k[ma[la]]===ka){aa();return;}z();}function ea(ja){if(!i.getParam(i.SOFT_STATE_KEY)){ja.kill();l.reload();}}function fa(ja){h.setContent(r,ja>x?x+'+':''+ja);g.conditionClass(u,'noCount',!ja);g.conditionClass(u,'hasCount',ja);}function ga(){clearTimeout(w);w=setTimeout(function(){var ja=new p();v=new m(ja.getURI().toString());v.listen('done',function(ka){fa(ka.payload.count);});v.listen('finally',function(){v=null;ga();});v.send();},y);}function ha(){fa();clearTimeout(w);w=null;}function ia(ja,ka,la){if(s)return;s=true;u=ja;if(la)r=h.find(u,'span','count');n.listen('m:homepage:load',null,function(){z();ba();if(r)ha();});n.listen('m:homepage:unload',null,function(){aa();ca();if(r)ga();});if(ka){ba();}else if(r)ga();}e.exports={init:ia};},null);
__d("MChannelMessageUtils",["CurrentUser"],function(a,b,c,d,e,f,g){var h={isCanonicalThread:function(i){return i.participant_ids.length<=2;},getOtherUserFBID:function(i){if(!h.isCanonicalThread(i)){return null;}else if(i.participant_ids.length===1){return i.participant_ids[0].toString();}else return i.participant_ids[0].toString()===g.getID()?i.participant_ids[1].toString():i.participant_ids[0].toString();}};e.exports=h;},null);
__d("CallbackManagerController",["ErrorUtils","copyProperties"],function(a,b,c,d,e,f,g,h){var i=function(j){this._pendingIDs=[];this._allRequests=[(void 0)];this._callbackArgHandler=j;};h(i.prototype,{executeOrEnqueue:function(j,k,l){l=l||{};var m=this._attemptCallback(k,j,l);if(m)return 0;this._allRequests.push({fn:k,request:j,options:l});var n=this._allRequests.length-1;this._pendingIDs.push(n);return n;},unsubscribe:function(j){delete this._allRequests[j];},reset:function(){this._allRequests=[];},getRequest:function(j){return this._allRequests[j];},runPossibleCallbacks:function(){var j=this._pendingIDs;this._pendingIDs=[];var k=[];j.forEach(function(l){var m=this._allRequests[l];if(!m)return;if(this._callbackArgHandler(m.request,m.options)){k.push(l);}else this._pendingIDs.push(l);}.bind(this));k.forEach(function(l){var m=this._allRequests[l];delete this._allRequests[l];this._attemptCallback(m.fn,m.request,m.options);}.bind(this));},_attemptCallback:function(j,k,l){var m=this._callbackArgHandler(k,l);if(m){var n={ids:k};g.applyWithGuard(j,n,m);}return !!m;}});e.exports=i;},null);
__d("KeyedCallbackManager",["CallbackManagerController","ErrorUtils"],function(a,b,c,d,e,f,g,h){function i(){"use strict";this.$KeyedCallbackManager0={};this.$KeyedCallbackManager1=new g(this.$KeyedCallbackManager2.bind(this));}i.prototype.executeOrEnqueue=function(j,k){"use strict";if(!(j instanceof Array)){var l=j,m=k;j=[j];k=function(n){m(n[l]);};}j=j.filter(function(n){var o=(n!==null&&n!==(void 0));if(!o)h.applyWithGuard(function(){throw new Error('KeyedCallbackManager.executeOrEnqueue: key '+JSON.stringify(n)+' is invalid');});return o;});return this.$KeyedCallbackManager1.executeOrEnqueue(j,k);};i.prototype.unsubscribe=function(j){"use strict";this.$KeyedCallbackManager1.unsubscribe(j);};i.prototype.reset=function(){"use strict";this.$KeyedCallbackManager1.reset();this.$KeyedCallbackManager0={};};i.prototype.getUnavailableResources=function(j){"use strict";var k=this.$KeyedCallbackManager1.getRequest(j),l=[];if(k)l=k.request.filter(function(m){return !this.$KeyedCallbackManager0[m];}.bind(this));return l;};i.prototype.getUnavailableResourcesFromRequest=function(j){"use strict";var k=Array.isArray(j)?j:[j];return k.filter(function(l){if(l!==null&&l!==(void 0))return !this.$KeyedCallbackManager0[l];},this);};i.prototype.addResourcesAndExecute=function(j){"use strict";Object.assign(this.$KeyedCallbackManager0,j);this.$KeyedCallbackManager1.runPossibleCallbacks();};i.prototype.setResource=function(j,k){"use strict";this.$KeyedCallbackManager0[j]=k;this.$KeyedCallbackManager1.runPossibleCallbacks();};i.prototype.getResource=function(j){"use strict";return this.$KeyedCallbackManager0[j];};i.prototype.getAllResources=function(){"use strict";return this.$KeyedCallbackManager0;};i.prototype.dumpResources=function(){"use strict";var j={};for(var k in this.$KeyedCallbackManager0){var l=this.$KeyedCallbackManager0[k];if(typeof l==='object')l=Object.assign({},l);j[k]=l;}return j;};i.prototype.$KeyedCallbackManager2=function(j){"use strict";var k={};for(var l=0;l<j.length;l++){var m=j[l],n=this.$KeyedCallbackManager0[m];if(typeof n=='undefined')return false;k[m]=n;}return [k];};e.exports=i;},null);
__d("guid",[],function(a,b,c,d,e,f){function g(){return 'f'+(Math.random()*(1<<30)).toString(16).replace('.','');}e.exports=g;},null);
__d("toIterator",[],function(a,b,c,d,e,f){var g='key',h='value',i='key+value',j=(typeof Symbol==='function')?Symbol.iterator:'@@iterator',k=(function(){if(!(Array.prototype[j]&&String.prototype[j])){return (function(){function l(o,p){"use strict";if(!Array.isArray(o))throw new TypeError('Object is not an Array');this.$ArrayIterator0=o;this.$ArrayIterator1=p;this.$ArrayIterator2=0;}l.prototype.next=function(){"use strict";if(!this instanceof l)throw new TypeError('Object is not an ArrayIterator');if(this.$ArrayIterator0==null)return n((void 0),true);var o=this.$ArrayIterator0,p=this.$ArrayIterator0.length,q=this.$ArrayIterator2,r=this.$ArrayIterator1;if(q>=p){this.$ArrayIterator0=(void 0);return n((void 0),true);}this.$ArrayIterator2=q+1;if(r===g){return n(q,false);}else if(r===h){return n(o[q],false);}else if(r===i)return n([q,o[q]],false);};l.prototype["@@iterator"]=function(){"use strict";return this;};function m(o){"use strict";if(typeof o!=='string')throw new TypeError('Object is not a string');this.$StringIterator0=o;this.$StringIterator1=0;}m.prototype.next=function(){"use strict";if(!this instanceof m)throw new TypeError('Object is not a StringIterator');if(this.$StringIterator0==null)return n((void 0),true);var o=this.$StringIterator1,p=this.$StringIterator0,q=p.length;if(o>=q){this.$StringIterator0=(void 0);return n((void 0),true);}var r,s=p.charCodeAt(o);if(s<55296||s>56319||o+1===q){r=p[o];}else{var t=p.charCodeAt(o+1);if(t<56320||t>57343){r=p[o];}else r=p[o]+p[o+1];}this.$StringIterator1=o+r.length;return n(r,false);};m.prototype["@@iterator"]=function(){"use strict";return this;};function n(o,p){return {value:o,done:p};}return function(o,p){if(typeof o==='string'){return new m(o);}else if(Array.isArray(o)){return new l(o,p||h);}else return o[j]();};})();}else return function(l){return l[j]();};})();Object.assign(k,{KIND_KEY:g,KIND_VALUE:h,KIND_KEY_VAL:i,ITERATOR_SYMBOL:j});e.exports=k;},null);
__d("_shouldPolyfillES6Collection",[],function(a,b,c,d,e,f){function g(j){var k=a[j];if(k==null)return true;var l=k.prototype;return k==null||typeof k!=='function'||typeof l.clear!=='function'||new k().size!==0||typeof l.keys!=='function'||typeof l.forEach!=='function'||i(k)||!h(k);}function h(j){for(var k in j)if(j.hasOwnProperty(k))m[k]=j[k];var l=j===null?null:j.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=j;function m(){"use strict";if(j!==null)j.apply(this,arguments);}try{var o=(new m([]));o.size;return o instanceof j;}catch(n){return false;}}function i(j){try{j();}catch(k){return false;}return true;}e.exports=g;},null);
__d("Map",["guid","isNode","toIterator","_shouldPolyfillES6Collection"],function(a,b,c,d,e,f,g,h,i,j){e.exports=(function(k,l){if(!j('Map'))return k.Map;var m='key',n='value',o='key+value',p='$map_',q,r='IE_HASH_';function s(da){"use strict";if(!x(this))throw new TypeError('Wrong map object type.');w(this);if(da!=null){var ea=i(da),fa;while(!(fa=ea.next()).done){if(!x(fa.value))throw new TypeError('Expected iterable items to be pair objects.');this.set(fa.value[0],fa.value[1]);}}}s.prototype.clear=function(){"use strict";w(this);};s.prototype.has=function(da){"use strict";var ea=u(this,da);return !!(ea!=null&&this._mapData[ea]);};s.prototype.set=function(da,ea){"use strict";var fa=u(this,da);if(fa!=null&&this._mapData[fa]){this._mapData[fa][1]=ea;}else{fa=this._mapData.push([da,ea])-1;v(this,da,fa);this.size+=1;}return this;};s.prototype.get=function(da){"use strict";var ea=u(this,da);if(ea==null){return l;}else return this._mapData[ea][1];};s.prototype["delete"]=function(da){"use strict";var ea=u(this,da);if(ea!=null&&this._mapData[ea]){v(this,da,l);this._mapData[ea]=l;this.size-=1;return true;}else return false;};s.prototype.entries=function(){"use strict";return new t(this,o);};s.prototype.keys=function(){"use strict";return new t(this,m);};s.prototype.values=function(){"use strict";return new t(this,n);};s.prototype.forEach=function(da,ea){"use strict";if(typeof da!=='function')throw new TypeError('Callback must be callable.');var fa=da.bind(ea||l),ga=this._mapData;for(var ha=0;ha<ga.length;ha++){var ia=ga[ha];if(ia!=null)fa(ia[1],ia[0],this);}};s.prototype[i.ITERATOR_SYMBOL]=s.prototype.entries;function t(da,ea){"use strict";if(!(x(da)&&da._mapData))throw new TypeError('Object is not a map.');if([m,o,n].indexOf(ea)===-1)throw new Error('Invalid iteration kind.');this._map=da;this._nextIndex=0;this._kind=ea;}t.prototype.next=function(){"use strict";if(!this instanceof s)throw new TypeError('Expected to be called on a MapIterator.');var da=this._map,ea=this._nextIndex,fa=this._kind;if(da==null)return y(l,true);var ga=da._mapData;while(ea<ga.length){var ha=ga[ea];ea+=1;this._nextIndex=ea;if(ha)if(fa===m){return y(ha[0],false);}else if(fa===n){return y(ha[1],false);}else if(fa)return y(ha,false);}this._map=l;return y(l,true);};t.prototype[i.ITERATOR_SYMBOL]=function(){return this;};function u(da,ea){if(x(ea)){var fa=ca(ea);return da._objectIndex[fa];}else{var ga=p+ea;if(typeof ea==='string'){return da._stringIndex[ga];}else return da._otherIndex[ga];}}function v(da,ea,fa){var ga=fa==null;if(x(ea)){var ha=ca(ea);if(ga){delete da._objectIndex[ha];}else da._objectIndex[ha]=fa;}else{var ia=p+ea;if(typeof ea==='string'){if(ga){delete da._stringIndex[ia];}else da._stringIndex[ia]=fa;}else if(ga){delete da._otherIndex[ia];}else da._otherIndex[ia]=fa;}}function w(da){da._mapData=[];da._objectIndex={};da._stringIndex={};da._otherIndex={};da.size=0;}function x(da){return da!=null&&(typeof da==='object'||typeof da==='function');}function y(da,ea){return {value:da,done:ea};}var z=(function(){try{Object.defineProperty({},'x',{});return true;}catch(da){return false;}})();function aa(da){if(!z){return true;}else return Object.isExtensible(da);}function ba(da){var ea;switch(da.nodeType){case 1:ea=da.uniqueID;break;case 9:ea=da.documentElement.uniqueID;break;default:return null;}if(ea){return r+ea;}else return null;}var ca=(function(){var da=Object.prototype.propertyIsEnumerable,ea=g(),fa=0;return function ga(ha){if(ha[ea]){return ha[ea];}else if(!z&&ha.propertyIsEnumerable&&ha.propertyIsEnumerable[ea]){return ha.propertyIsEnumerable[ea];}else if(!z&&h(ha)&&ba(ha)){return ba(ha);}else if(!z&&ha[ea])return ha[ea];if(aa(ha)){fa+=1;if(z){Object.defineProperty(ha,ea,{enumerable:false,writable:false,configurable:false,value:fa});}else if(ha.propertyIsEnumerable){ha.propertyIsEnumerable=function(){return da.apply(this,arguments);};ha.propertyIsEnumerable[ea]=fa;}else if(h(ha)){ha[ea]=fa;}else throw new Error('Unable to set a non-enumerable property on object.');return fa;}else throw new Error('Non-extensible objects are not allowed as keys.');};})();return s;})(Function('return this')());},null);
__d("Set",["Map","toIterator","_shouldPolyfillES6Collection"],function(a,b,c,d,e,f,g,h,i){e.exports=(function(j,k){if(!i('Set'))return j.Set;function l(n){"use strict";if(this==null||(typeof this!=='object'&&typeof this!=='function'))throw new TypeError('Wrong set object type.');m(this);if(n!=null){var o=h(n),p;while(!(p=o.next()).done)this.add(p.value);}}l.prototype.add=function(n){"use strict";this._map.set(n,n);this.size=this._map.size;return this;};l.prototype.clear=function(){"use strict";m(this);};l.prototype["delete"]=function(n){"use strict";var o=this._map["delete"](n);this.size=this._map.size;return o;};l.prototype.entries=function(){"use strict";return this._map.entries();};l.prototype.forEach=function(n){"use strict";var o=arguments[1],p=this._map.keys(),q;while(!(q=p.next()).done)n.call(o,q.value,q.value,this);};l.prototype.has=function(n){"use strict";return this._map.has(n);};l.prototype.values=function(){"use strict";return this._map.values();};l.prototype[h.ITERATOR_SYMBOL]=l.prototype.values;l.prototype.keys=l.prototype.values;function m(n){n._map=new g();n.size=n._map.size;}return l;})(Function('return this')());},null);
__d("XChatUserInfoAsyncControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/chat\/user_info\/",{ids:{type:"IntVector"}});},null);
__d("MShortProfiles",["KeyedCallbackManager","MRequest","Set","XChatUserInfoAsyncControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j){var k=new g(),l=new i(),m={get:function(n,o){var p=!k.executeOrEnqueue(n,o);if(p||l.has(n))return;l.add(n);var q=new h(new j().getURI()).setMethod('GET').setData({ids:[n]});q.listen('done',function(r){if(r&&r.payload&&r.payload.profiles)k.addResourcesAndExecute(r.payload.profiles);});q.listen('finally',function(){l["delete"](n);});q.send();}};e.exports=m;},null);
__d("MMessagesThreadImageRenderer",["CSS","JSXDOM","MItemConstants","MMessagesThreadImageRendererConfig","MShortProfiles","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(p,q){var r=(h.img({src:j.profile_pic_src,alt:"User Profile Picture",className:"_33zg"})),s=q===i.TALL_HEIGHT;g.conditionClass(r,"_33zg",s);g.conditionClass(r,"_508n",!s);o(p,r,s);return r;}function o(p,q,r){k.get(p,function(s){var t=r?s.mThumbSrcLarge:s.mThumbSrcSmall;if(t)this.placeholder.setAttribute('src',t);}.bind({placeholder:q}));}e.exports=n;},null);
__d("MJewelSet",["DOM","HTML","AppRequestLogger","MChannelMessageUtils","MJewels","MDynaTemplate","MJewel","MLogState","MItemConstants","MMessagesConfig","MMessagesThreadImageRenderer","Popover","MRequest","Stratcom","MTouchChannelManager","MURI","fbt","isFacebookURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y={_viewerID:null,_requestsJewel:null,_messagesJewel:null,_notificationsJewel:null,_unseenNotificationIds:{},_jewelClickLogListener:null,_haveInitializedJewels:false,MSG_ID_PREFIX:'msg_',NOTIF_ID_PREFIX:'notif_',JEWEL_NAV_NODE_ID:'mJewelNav',JEWEL_NAV_CACHE_KEY:'mJewelNavKey',JEWEL_MSG_LIST:"mJewelMsgThreadContents",createJewels:function(z,aa){if(aa.showRequests){y._requestsJewel=new m('requests',{pos:n.CLICK_POSITION_REQUESTS_FLYOUT,mJewelMarauderLogger:z,heightConstraint:aa.heightConstraint,preventClose:aa.preventClose,softState:k.REQUESTS},'friends_jewel_module');y._requestsJewel.listen('cleared',y._markRequestsRead);y._requestsJewel.listen('jewel_click',y._logRequestsJewelClick);}y._messagesJewel=new m('messages',{contentsSigil:y.JEWEL_MSG_LIST,pos:n.CLICK_POSITION_MESSAGES_FLYOUT,mJewelMarauderLogger:z,heightConstraint:aa.heightConstraint,preventClose:aa.preventClose,softState:k.MESSAGES},'messages_jewel_module');y._messagesJewel.listen('cleared',y._markMessagesRead);y._messagesJewel.listen('jewel_click',y._logMessagesJewelClick);y._notificationsJewel=new m('notifications',{pos:n.CLICK_POSITION_NOTIFICATIONS_FLYOUT,clickCallback:y._notificationClick,mJewelMarauderLogger:z,heightConstraint:aa.heightConstraint,preventClose:aa.preventClose,softState:k.NOTIFICATIONS},'notifications_jewel_module');y._notificationsJewel.listen('cleared',y._markNotificationsSeen);y._jewelClickLogListener=y._notificationsJewel.listen('jewel_click',y._logNotificationJewelClick);},openMessageJewel:function(){y._messagesJewel.openPopover();},markFriendRequestsSeen:function(event){if(y._requestsJewel===null)return;y._requestsJewel.setCount(0);},updateFriendRequests:function(event){if(y._requestsJewel===null)return;if(y._requestsJewel.isOpen())return;var z=new s('/ajax/mobile/friends/jewel/requests_markup');z.send();},onAfterUpdateFriendRequests:function(z){if(y._requestsJewel===null)return;y._setJewelCount(y._requestsJewel,z,y._markRequestsRead);r.getInstance('reqs_flyout').refreshConstraints();},onAfterUpdateMessages:function(z){y._setJewelCount(y._messagesJewel,z,y._markMessagesRead);},onAfterUpdateNotifications:function(z,aa){y._setJewelCount(y._notificationsJewel,z,y._markNotificationsSeen);t.invoke('notifications_unseen',null,aa);},updateNotification:function(event){var z=event.getData();if(z&&z.data){if(!y._notificationsJewel.isOpen()&&!y._unseenNotificationIds[z.data.alert_id])y._notificationsJewel.setCount(z.data.unread+y._notificationsJewel.getCount());y._notificationsJewel.removeMenuContent(y._getNotifNodeID(z.data.alert_id));var aa=y._createNotificationMarkup(z.data);y._notificationsJewel.prependMenuContent(aa);y._unseenNotificationIds[z.data.alert_id]=true;if(y._notificationsJewel.isOpen())y._markNotificationsSeen();}},_createNotificationMarkup:function(z){z.id=y._getNotifNodeID(z.alert_id);if(z.type&&z.type=='app_request'){z.onclick=i?"require('AppRequestLogger').setLastApp("+z.app_id+")":null;z.target='_blank';}if(window.devicePixelRatio>1&&z.profile_pic_2x)z.profile_pic=z.profile_pic_2x;var aa=l.renderToHtml('@MJewelRealTimeNotificationTemplate',z);return (new h(aa)).getFragment().firstChild;},updateUnseenNotificationIds:function(event){var z=event.getData();if(!z)return;var aa=event.getType()=='notifications_read';if(z.alert_ids){var ba=0;for(var ca=0;ca<z.alert_ids.length;ca++)if(y._unseenNotificationIds[z.alert_ids[ca]]){delete y._unseenNotificationIds[z.alert_ids[ca]];aa&&y._notificationsJewel.updateMenuColor(y._getNotifNodeID(z.alert_ids[ca]),true,false);ba++;}var da=y._notificationsJewel.getCount();y._notificationsJewel.setCount(da-ba);}else{y._notificationsJewel.setCount(0);if(aa)for(var ea in y._unseenNotificationIds)y._notificationsJewel.updateMenuColor(y._getNotifNodeID(ea),true,false);y._unseenNotificationIds={};}},updateUnreadMessageCount:function(event){var z=event.getData();if(!z)return;if(z.unseen!==null&&!y._messagesJewel.isOpen())y._messagesJewel.setCount(z.unseen);if(z.unread!==null){var aa=null;if(z.unread>0){aa=w._("Messages ({unread_message_count})",[w.param("unread_message_count",z.unread)]);}else aa="Messages";y._messagesJewel.setHeaderText('messages_jewel_header_text',aa);}},updateMessage:function(event){var z=event.getData();if(!z)return;if(z.tid){if(z.folder!=='inbox'||!(y._viewerIsAParticipant(y._viewerID,z)))return;if(y._messagesJewel.isInitialized()){y._messagesJewel.removeMenuContent(y._getMessageNodeID(z.tid));var aa=y._createMessageMarkup(z);y._messagesJewel.prependMenuContent(aa);if(y._viewerID==z.author_fbid)y._messagesJewel.updateMenuColor(y._getMessageNodeID(z.tid),true,false);if(y._messagesJewel.isOpen())y._markMessagesRead();}}else if(z.mark_as_read)for(var ba=0;ba<z.tids.length;ba++){var ca=z.tids[ba];if(z.folder_info[ca]!=='inbox')continue;y._messagesJewel.updateMenuColor(y._getMessageNodeID(ca),z.event=='read',false);}},_createMessageMarkup:function(z){z.id=y._getMessageNodeID(z.tid);if(window.devicePixelRatio>1&&z.thread_image_2x)z.thread_image=z.thread_image_2x;var aa=l.renderToHtml('@MJewelNewMessageTemplate',z),ba=new h(aa).getRootNode();if(p.gks.mtouch_msg_pic_use_short_profile&&j.isCanonicalThread(z)){var ca=g.find(ba,'*','profile_image');g.replace(ca,q(j.getOtherUserFBID(z),o.SHORT_HEIGHT));}if(z.has_attachment){var da=g.scry(ba,'*','attachment-icon');for(var ea=0;ea<da.length;ea++)g.show(da[ea]);}return ba;},_getMessageNodeID:function(z){return y.MSG_ID_PREFIX+z;},_getNotifNodeID:function(z){return y.NOTIF_ID_PREFIX+z;},_markRequestsRead:function(){var z=new s(new v('/a/jewel_requests_read.php').setAsync(true).toString());z.send();},_markMessagesRead:function(){var z=new s(new v('/a/jewel_messages_read.php').setAsync(true).toString());z.send();},_markNotificationsSeen:function(){if(y._jewelClickLogListener){y._jewelClickLogListener.remove();y._jewelClickLogListener=null;}var z=y._unseenNotificationIds;y._unseenNotificationIds={};var aa=[];for(var ba in z)aa.push(ba);var ca=new s(new v('/a/jewel_notifications_read.php').setAsync(true).toString());ca.addData({ids:aa,count:aa.length,seen:true});ca.send();},_logMessagesJewelClick:function(event){var z=y._messagesJewel._getContentsElement();if(y._messagesJewel.isOpen()&&t.hasSigil(z,'messages-flyout-loading'))new s('/ajax/mobile/jewels/messages_markup').send();},_logNotificationJewelClick:function(){if(y._jewelClickLogListener){y._jewelClickLogListener.remove();y._jewelClickLogListener=null;}var z=new s(new v('/a/jewel_notifications_log.php').setAsync(true).toString());z.addData({click_type:'jewel_click',count:y._notificationsJewel.getCount()});z.send();var aa=y._notificationsJewel._getContentsElement();if(y._notificationsJewel.isOpen()&&t.hasSigil(aa,'notifications-flyout-loading'))new s('/ajax/mobile/jewels/notifications_markup').send();},_logRequestsJewelClick:function(){var z=y._requestsJewel._getContentsElement(),aa=g.scry(z,'div','attachment'),ba=[];for(var ca=0;ca<aa.length;ca++){var da=aa[ca].getAttribute('id');if(da&&da.startsWith('m_jewel_req_'))ba=ba.concat(da.replace('m_jewel_req_',''));}if(ba.length){var ea=new s('/friends/requests/log_impressions');ea.setMethod('POST');ea.addData({ids:ba.join(','),ref:'m_jewel'});ea.send();}if(y._requestsJewel.isOpen()&&t.hasSigil(z,'requests-flyout-loading'))new s('/ajax/mobile/friends/jewel/requests_markup').send();},_notificationClick:function(event){var z=event.getNode('marea');if(!z)return;var aa=z.getAttribute('id');if(!aa)return;y._notificationsJewel.updateMenuColor(aa,true,false);var ba=new s(new v('/a/jewel_notifications_log.php').setAsync(true).toString());ba.addData({click_type:'jewel_notif_click',id:aa.replace(y.NOTIF_ID_PREFIX,'')});ba.send();},_viewerIsAParticipant:function(z,aa){return ((aa.participant_ids&&aa.participant_ids.indexOf(z)>-1));},_initJewelCount:function(z,aa,ba){z.setDuringInit(true);z.reregisterListeners();y._setJewelCount(z,aa,ba);z.setDuringInit(false);},_setJewelCount:function(z,aa,ba){if(!z.isOpen()){z.setCount(aa);}else if(aa)ba();},_initJewelCounts:function(event){var z=event.getData();y.initJewels(null);if(z.viewer_id)y._viewerID=z.viewer_id;if(z.unread_notification_ids)y._unseenNotificationIds=z.unread_notification_ids||{};if(z.request_count&&y._requestsJewel)y._initJewelCount(y._requestsJewel,z.request_count,y._markRequestsRead);if(z.message_count)y._initJewelCount(y._messagesJewel,z.message_count,y._markMessagesRead);if(z.notification_count)y._initJewelCount(y._notificationsJewel,z.notification_count,y._markNotificationsSeen);},initJewels:function(z,aa){if(y._haveInitializedJewels)return;y._haveInitializedJewels=true;u.initialize();y.createJewels(z,aa||{});if(y._requestsJewel){if(!y._friendRequestAddListener)y._friendRequestAddListener=t.listen('jewel_requests_add',null,y.updateFriendRequests);if(!y._friendRequestRemoveListener)y._friendRequestRemoveListener=t.listen('jewel_requests_remove_old',null,y.updateFriendRequests);if(!y._friendRequestSeenListener)y._friendRequestSeenListener=t.listen('friend_requests_seen',null,y.markFriendRequestsSeen);}if(!y._notificationListener)y._notificationListener=t.listen('m_notification',null,y.updateNotification);if(!y._messageListener)y._messageListener=t.listen('m_messaging',null,y.updateMessage);if(!y._messageCountListener)y._messageCountListener=t.listen('inbox',null,y.updateUnreadMessageCount);if(!y._notifReadListener)y._notifReadListener=t.listen('notifications_read',null,y.updateUnseenNotificationIds);if(!y._notifSeenListener)y._notifSeenListener=t.listen('notifications_seen',null,y.updateUnseenNotificationIds);if(!y._friendRequestResponseListener)y._friendRequestResponseListener=t.listen('m:requests:refresh',null,function(){r.getInstance('reqs_flyout').refreshConstraints();});}};(function(){t.listen('m:jewels:init-counts',null,y._initJewelCounts);})();e.exports=y;},null);
__d("MSearchJewel",["CSS","DOM","MJewels","MHistory","MJewel","Stratcom","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n,o;function p(q,r){if(n)return;n=true;h.listen(m(k.JEWEL_NAV_NODE_ID),'click','search',function(s){s.kill();if(o&&!r){j.popSoftState(i.SEARCH);}else if(!o)j.pushSoftState(i.SEARCH);});l.listen('m:history:change',null,function(s){o=s.getData().soft===i.SEARCH;g.conditionClass(q,'popoverOpen',o);});}e.exports={init:p};},null);
__d("MReactBookmarkTitles",[],function(a,b,c,d,e,f){var g={app:'Apps',developer:'Developer',friend_list:'Friends',group:'Groups',suggested_game:'Suggested Games',interest_list:'Interests',page:'Pages',pinned:'Favorites',subscribed_searches:'News You\'re Following'};e.exports=g;},null);
__d("MReactBookmarkHeader",["React","Stratcom","cx"],function(a,b,c,d,e,f,g,h,i){'use strict';var j=g.PropTypes,k=g.createClass({displayName:"MReactBookmarkHeader",propTypes:{header:j.string.isRequired,groupid:j.string,nux:j.object},render:function(){var l=this.props.groupid==='subscribed_searches'?'m-subscribed-searches-bookmark':'';return (g.createElement("h3",{className:"_52x1","data-sigil":l,ref:"header"},g.createElement("span",{className:"_52x2"},this.props.header)));},componentDidMount:function(){if(this.props.nux){this.props.nux.setContext(this.refs.header.getDOMNode());h.listen('m:side-area:show',null,function(){if(!this.props.nux.destroyed){this.props.nux.show();this.props.nux.updateNubPosition(110);}h.listen('scroll',null,function(){if(!this.props.nux.destroyed)this.props.nux.show();}.bind(this));}.bind(this));}}});e.exports=k;},null);
__d("MSideAreaUtils",["URI"],function(a,b,c,d,e,f,g){var h={getCurrentURI:function(){return new g(window.location);},isSamePage:function(i,j){if(i.getPath()!=j.getPath())return false;var k=i.getQueryData(),l=j.getQueryData();return k.sk===l.sk&&k.v===l.v&&k.app_id===l.app_id;}};e.exports=h;},null);
__d("MReactBookmarkRow",["MSession","MSideAreaUtils","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=i.PropTypes,n=20,o=i.createClass({displayName:"MReactBookmarkRow",propTypes:{bookmark:m.object.isRequired,isUser:m.bool,onClickItem:m.func.isRequired},shouldComponentUpdate:function(p,q){var r=this.props.bookmark,s=p.bookmark;return r!==s||r.pic!==s.pic||r.name!==s.name||this.state.count!==q.count||r.url!==s.url||this.state.isSelected!==q.isSelected;},getInitialState:function(){return {count:this.props.bookmark.count.value,isSelected:this._isSelected(this.props.bookmark)};},componentWillReceiveProps:function(p){this.setState({count:p.bookmark.count.value,isSelected:this._isSelected(p.bookmark)});},_isSelected:function(p){return h.isSamePage(h.getCurrentURI(),new j(p.url));},render:function(){var p=this.props.bookmark,q=!p.pic?null:i.createElement("i",{className:"_52x5 img",style:{backgroundImage:"url('"+p.pic+"')"}}),r=!p.pic&&p.hasOwnProperty('noBookmarkIconSpacing')&&p.noBookmarkIconSpacing,s=p.name.length>42,t=p.name.length<=42&&p.name.length>30,u=this.state.count>n?"20+":this.state.count;return (i.createElement("li",{className:(("_53_-")+(this.state.isSelected?' '+"selected":'')+(this.props.isUser?' '+"_4ut2":''))},i.createElement("div",{"data-sigil":"touchable",className:"_52x6 touchable"},i.createElement("a",{href:p.url,className:(("_5lut")+(' '+"_5luu")),onClick:this.props.onClickItem},i.createElement("div",{className:((!r?"_52x3":'')+(r?' '+"_5p-5":'')+(g.useAngora?' '+"_52x4":''))},q),i.createElement("div",{className:(("_52x7")+(s?' '+"_5401":'')+(t?' '+"_5400":'')+(p.dir==='rtl'?' '+"_5w9v":'')+(p.dir==='ltr'?' '+"_5w9w":''))},p.name),i.createElement("div",{className:(("_55fj")+(!this.state.count?' '+"hiddenElem":''))},u,i.createElement("span",{className:"_55fk"},"new"))),this._renderSideButton())));},_renderSideButton:function(){var p=this.props.bookmark;if(!p.side_button_icon||!p.side_button_uri)return null;return (i.createElement("a",{className:"_5lut _5rl-",href:p.side_button_uri,onClick:this.props.onClickItem},i.createElement("i",{className:"_5rl_ img",style:{backgroundImage:"url('"+p.side_button_icon+"')"}})));}});e.exports=o;},null);
__d("MReactCreateGroup",["Image.react","MSession","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=i.PropTypes,n=i.createClass({displayName:"MReactCreateGroup",propTypes:{uri:m.string.isRequired},render:function(){var o=JSON.stringify({dialogURI:this.props.uri});return (i.createElement("li",{className:"_53_-"},i.createElement("div",{className:"_52x6 touchable","data-sigil":"touchable"},i.createElement("a",{rel:"dialog",href:"#","data-sigil":"touchable dialog-link","data-store":o,className:"_5lut _5luu"},i.createElement("div",{className:(("_52x3")+(h.useAngora?' '+"_52x4":''))},i.createElement(g,{className:"_52x5 img",src:l('/images/litestand/bookmarks/sidebar/icons/mobile/icon-addgroup.png')})),i.createElement("div",{className:"_52x7"},"Create New Group")))));}});n.make=function(o,p){return p.id!=='group'?null:i.createElement(n,{uri:o,key:"bookmark_createGroup"});};e.exports=n;},null);
__d("MReactCreatePage.react",["Image.react","MSession","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=i.PropTypes,n=i.createClass({displayName:"MReactCreatePage",propTypes:{uri:m.string.isRequired},render:function(){return (i.createElement("li",{className:"_53_-"},i.createElement("div",{className:"_52x6 touchable","data-sigil":"touchable"},i.createElement("a",{rel:"dialog",href:this.props.uri,className:"_5lut _5luu"},i.createElement("div",{className:(("_52x3")+(h.useAngora?' '+"_52x4":''))},i.createElement(g,{className:"_52x5 img",src:l('/images/litestand/bookmarks/sidebar/icons/mobile/icon-addpage.png')})),i.createElement("div",{className:"_52x7"},"Create New Page")))));}});n.make=function(o,p){return !o||p.id!=='page'?null:i.createElement(n,{uri:o,key:"bookmark_createPage"});};e.exports=n;},null);
__d("MReactSeeAllBookmarks",["React","MReactBookmarkTitles","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=g.PropTypes,m=g.createClass({displayName:"MReactSeeAllBookmarks",propTypes:{createGroupURI:l.string.isRequired,group:l.object.isRequired,onClickSeeAll:l.func.isRequired},render:function(){var n=this.props.group;k(h[n.id]);return (g.createElement("a",{name:n.name,href:"#","data-sigil":"touchable",onClick:this._onClick,className:"touchable _52x6 _53__"},j._({"Apps":"See All Apps","Developer":"See All Developer","Friends":"See All Friends","Groups":"See All Groups","News You're Following":"See All News You're Following","Suggested Games":"See All Suggested Games","Interests":"See All Interests","Pages":"See All Pages","Favorites":"See All Favorites"},[j['enum'](h[n.id],{Apps:"Apps",Developer:"Developer",Friends:"Friends",Groups:"Groups","News You're Following":"News You're Following","Suggested Games":"Suggested Games",Interests:"Interests",Pages:"Pages",Favorites:"Favorites"})])));},_onClick:function(n){this.props.onClickSeeAll({createGroupURI:this.props.createGroupURI,group:this.props.group});}});e.exports=m;},null);
__d("MReactBookmarks",["MLoadingIndicator","MLogger","React","StaticContainer.react","MReactBookmarkHeader","MReactBookmarkRow","MReactCreateGroup","MReactCreatePage.react","MReactSeeAllBookmarks","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';var q=i.PropTypes;function r(t,u){return 'bookmark_'+t.id+'_'+u.id;}var s=i.createClass({displayName:"MReactBookmarks",propTypes:{bookmarkGroups:q.array.isRequired,createGroupURI:q.string.isRequired,createPageURI:q.string,loaderId:q.string,loaderMarkup:q.object,onClickItem:q.func.isRequired,onClickSeeAll:q.func.isRequired,secondaryData:q.object,pinnedPageTestGK:q.bool,pinnedPageID:q.string,searchSubscriptionBookmarkNUX:q.object,showSearchSubscriptionBookmarkAtTop:q.bool},_addBookmarkGroup:function(t,u){var v=this.props.createGroupURI,w=n.make(this.props.createPageURI,u),x=m.make(v,u);if((u.visible&&u.visible.length)||w||x){var y=u.visible||[];if(this.props.pinnedPageTestGK&&u.id=='user')this.props.bookmarkGroups[1].visible.forEach(function(ba){if(ba.id==this.props.pinnedPageID)y.push(ba);},this);var z=u.all||y;if(u.header){var aa=u.id==='subscribed_searches'?this.props.searchSubscriptionBookmarkNUX:null;t.push(i.createElement(k,{header:u.header,key:'group_'+u.id,groupid:u.id,nux:aa}));}y.forEach(function(ba){if(!this.props.pinnedPageTestGK||u.id!='pinned'||ba.id!=this.props.pinnedPageID)t.push(i.createElement(l,{bookmark:ba,key:r(u,ba),isUser:u.id=='user',onClickItem:this.props.onClickItem}));},this);if(w){t.push(w);}else if(x)t.push(x);if(y.length<z.length)t.push(i.createElement("li",{className:"_53_-",key:'seeAll_'+u.id},i.createElement(o,{createGroupURI:v,group:u,onClickSeeAll:this.props.onClickSeeAll})));}},_getBookmarkGroups:function(t){var u=[];for(var v=0,w=t.length;v<w;++v){var x=t[v];this._addBookmarkGroup(u,x);}return u;},_getSecondary:function(t){var u=t.group,v=m.make(this.props.createGroupURI,u),w=[v];Array.prototype.push.call(w,u.all.map(function(x){return (i.createElement(l,{bookmark:x,key:r(u,x),onClickItem:this.props.onClickItem}));},this));return w;},reRankBookmarks:function(t){if(!this.props.showSearchSubscriptionBookmarkAtTop||t.length<=3)return t;var u=null;for(var v=0;v<t.length;++v)if(t[v].id==='subscribed_searches')u=v;if(!u)return t;var w=[];w[0]=t[0];w[1]=t[1];w[2]=t[u];var x=3;for(var y=2;y<t.length;++y)if(v!=u){w[x]=t[y];x++;}return w;},render:function(){var t=this.reRankBookmarks(this.props.bookmarkGroups),u=Object.prototype.toString.call(t).slice(8,-1);if(t&&u!=='Array')h.warn('[react-bookmarks] received unexpected payload: %s',JSON.stringify(t));var v=[];this._loaderMarkup=null;if(this.props.isSecondary){v=this._getSecondary(this.props.secondaryData);}else{v=this._getBookmarkGroups(t||[]);this._loaderMarkup=t&&!this.props.isPartial?null:i.createElement(j,null,i.createElement("div",{className:"apl",dangerouslySetInnerHTML:this.props.loaderMarkup}));}return (i.createElement("div",null,i.createElement("ul",{className:"_7k7"},v,this._loaderMarkup)));},componentDidMount:function(){if(this._loaderMarkup)g.init(this.props.loaderId);}});e.exports=s;},null);
__d("MReactSearchProxy",["React","cx","fbt"],function(a,b,c,d,e,f,g,h,i){'use strict';var j=g.PropTypes,k=g.createClass({displayName:"MReactSearchProxy",propTypes:{enableReactSearch:j.bool.isRequired,onClick:j.func},render:function(){return (g.createElement("div",{className:"_5fm- touchable",onClick:this._onClick},g.createElement("div",{className:"mSideSearch","data-sigil":'search-activator'},g.createElement("div",{className:"_5whq mSearchProxy input"},"Search"))));},_onClick:function(l){if(this.props.enableReactSearch)this.props.onClick();}});e.exports=k;},null);
__d("MReactSecondarySideMenuHeader",["React","cx","Image.react"],function(a,b,c,d,e,f,g,h,i){'use strict';var j=g.PropTypes,k=g.createClass({displayName:"MReactSecondarySideMenuHeader",propTypes:{backButtonImg:j.string,onClickBackButton:j.func.isRequired},render:function(){return (g.createElement("div",{className:"_56do","data-sigil":"marea"},g.createElement("a",{className:"touchable","data-sigil":"blocking-touchable",href:"#",onClick:this._onClick},g.createElement("div",{className:"_4opv"},g.createElement(i,{height:"20",src:this.props.backButtonImg,width:"24"})),g.createElement("div",{className:"_56dq"},this.props.title))));},_onClick:function(l){this.props.onClickBackButton();}});e.exports=k;},null);
__d("MReactPartialSideMenu",["MReactBookmarks","MReactBookmarkHeader","MReactSearchProxy","MReactSecondarySideMenuHeader","MReactBookmarkTitles","React","Vector","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=l.PropTypes,p=l.createClass({displayName:"MReactPartialSideMenu",propTypes:{bookmarkGroups:o.array.isRequired,createGroupURI:o.string.isRequired,createPageURI:o.string,enableReactSearch:o.bool.isRequired,footerMarkup:o.object,isPartial:o.bool.isRequired,isSecondary:o.bool.isRequired,loaderId:o.string,loaderMarkup:o.object,onClickBackButton:o.func.isRequired,onClickItem:o.func.isRequired,onClickSearchProxy:o.func,onClickSeeAll:o.func.isRequired,showSearchHeader:o.bool,secondaryData:o.object,pinnedPageTestGK:o.bool,pinnedPageID:o.string,searchSubscriptionBookmarkNUX:o.object,showSearchSubscriptionBookmarkAtTop:o.bool},render:function(){var q=null;if(this.props.isSecondary){var r=this.props.secondaryData.group,s=n._({"Apps":"All Apps","Developer":"All Developer","Friends":"All Friends","Groups":"All Groups","News You're Following":"All News You're Following","Suggested Games":"All Suggested Games","Interests":"All Interests","Pages":"All Pages","Favorites":"All Favorites"},[n['enum'](k[r.id],{Apps:"Apps",Developer:"Developer",Friends:"Friends",Groups:"Groups","News You're Following":"News You're Following","Suggested Games":"Suggested Games",Interests:"Interests",Pages:"Pages",Favorites:"Favorites"})]);q=l.createElement(j,{backButtonImg:this.props.backButtonImg,title:s,onClickBackButton:this.props.onClickBackButton});}else if(this.props.showSearchHeader)q=l.createElement(i,{enableReactSearch:this.props.enableReactSearch,onClick:this.props.onClickSearchProxy});var t=null,u=null;if(!this.props.isSecondary&&this.props.footerMarkup){var v="HELP & SETTINGS";t=l.createElement(h,{header:v});u=l.createElement("div",{"data-sigil":"react-side-area-footer",dangerouslySetInnerHTML:this.props.footerMarkup});}return (l.createElement("div",{className:"mSideMenuPage"},q,l.createElement("div",{className:"mSideMenu"},l.createElement(g,{bookmarkGroups:this.props.bookmarkGroups,createGroupURI:this.props.createGroupURI,createPageURI:this.props.createPageURI,isPartial:this.props.isPartial,isSecondary:this.props.isSecondary,loaderId:this.props.loaderId,loaderMarkup:this.props.loaderMarkup,onClickItem:this.props.onClickItem,onClickSeeAll:this.props.onClickSeeAll,secondaryData:this.props.secondaryData,pinnedPageTestGK:this.props.pinnedPageTestGK,pinnedPageID:this.props.pinnedPageID,searchSubscriptionBookmarkNUX:this.props.searchSubscriptionBookmarkNUX,showSearchSubscriptionBookmarkAtTop:this.props.showSearchSubscriptionBookmarkAtTop}),t,u)));},getDisplayedHeight:function(){return m.getDim(this.getDOMNode()).y;}});e.exports=p;},null);
__d("MReactSearchResultsRow",["MDynaTemplate","React","Stratcom","cx"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k=h.createClass({displayName:"MReactSearchResultsRow",_renderProfileImg:function(){var l=this.props.data.photo;if(l){return (h.createElement("i",{className:(("_5fn7")+(' '+"img")+(this.props.data.isTrending?' '+"_1m-q":'')),style:{backgroundImage:"url('"+l+"')"}}));}else return (h.createElement("i",{className:(("_5fn7")+(' '+"img")+(l==null&&!this.props.data.isTrending?' '+"_1mnm":'')+(this.props.data.isTrending?' '+"_1m-q":''))}));},_renderVerified:function(){var l=this.props.data.verified;return (l&&l.__html)?h.createElement("span",{dangerouslySetInnerHTML:l}):null;},_renderSubtext:function(){var l=this.props.data;if(!l.isRecentSearch)return null;var m=l.subtext;if(l.action=='add_friend')return (h.createElement("span",{className:"_5fn8 mfss",dangerouslySetInnerHTML:m}));var n;if(!l.isTrending){n=l.type?l.type+' '+String.fromCharCode(183)+' ':'';m=m?n+m:l.type;}if(!m)return null;return (h.createElement("span",{className:"_5fn8 mfss"},m));},_renderSecondaryAction:function(){var l=this.props.data,m;if(l.action=='phone'){m=this._renderPhoneAction();}else if(l.action=='add_friend'){m=this._renderAddAction();}else if(l.action=='message'){m=this._renderMessageAction();}else l.action;if(!m)return null;if(m.__html){return (h.createElement("div",{className:"_5fn9",dangerouslySetInnerHTML:m}));}else return (h.createElement("div",{className:"_5fn9"},m));},_renderPhoneAction:function(){var l=this.props.data;if(!l.paths||!(l.paths.mobile||l.paths.sms))return null;var m=g.renderToHtml('@CallButtonTemplate',{call_uri:l.paths.mobile,call_style:l.paths.mobile?'':'display:none;',sms_uri:l.paths.sms,sms_style:l.paths.sms?'':'display:none;'});return {__html:m};},_renderAddAction:function(){var l=this.props.data;if(!l.paths||!l.paths[l.action])return null;return l.paths[l.action];},_renderMessageAction:function(){var l=this.props.data;if(!l.paths||!l.paths.message)return null;return (h.createElement("a",{className:"_5rwu",href:l.paths.message,onClick:this._onClick},h.createElement("i",{className:"img"})));},render:function(){var l=this.props.data;if(l.type==='node')return (h.createElement("div",{className:"_1mnn"},l.node));return (h.createElement("div",{className:"_5fna",rel:l.id},h.createElement("a",{className:(("_5fnb")+(' '+"touchable")+(l.action?' '+"hasSecondaryAction":'')),"data-sigil":"touchable",name:l.name,href:l.uri,onClick:this._onClick},this._renderProfileImg(),h.createElement("div",{className:"_5fnd mfsl"},l.display||l.name,this._renderVerified()),this._renderSubtext()),this._renderSecondaryAction()));},_onClick:function(event){this.props.onClickItem&&this.props.onClickItem(event,this.props.data);i.invoke('m:search-typeahead:select-react',null,{node:this.props.data,position:this.props.position,query:this.props.query});}});e.exports=k;},null);
__d("MReactSearchResultsPresenter",["MReactSearchResultsRow","React","StaticContainer.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=30,m=h.createClass({displayName:"ResultRenderer",renderLoader:function(){return (h.createElement("div",{className:"_5fnh",style:{display:!this.props.waiting||!this.props.query?'none':''}},h.createElement("span",{dangerouslySetInnerHTML:this.props.loaderMarkup}),"Loading..."));},renderSeeMore:function(){return (h.createElement("a",{className:"_5fni touchable","data-sigil":"touchable",href:'/search/?query='+encodeURIComponent(this.props.query),onClick:this._onClickSeeMore,style:{display:!this.props.query?'none':''}},k._("See more results for {query}",[k.param("query",'"'+this.props.query+'"')])));},render:function(){var o=this.props.data.slice(0,l),p,q;o=o.reduce(function(r,s,t){var u=null;if(!p&&s.isTrending){u={type:'node',node:h.createElement("div",null,"Trending")};r.push(h.createElement(i,{key:"header-trending"},h.createElement(g,{data:u})));p=true;}if(!q&&s.isRecentSearch){u={type:'node',node:h.createElement("div",null,"Recent Searches")};r.push(h.createElement(i,{key:"header-recent"},h.createElement(g,{data:u})));q=true;}r.push(h.createElement(i,{key:s.id},h.createElement(g,{position:t,query:this.props.query,data:s,onClickItem:this._onClick})));return r;}.bind(this),[]);return (h.createElement("div",{className:"_5fng",onTouchStart:this.props.onTouchStart},o,this.renderLoader(),this.renderSeeMore()));},_onClickSeeMore:function(event){this.props.onClickItem&&this.props.onClickItem(event,{});},_onClick:function(event,o){this.props.onClickItem&&this.props.onClickItem(event,o);}}),n={ViewRenderer:m};e.exports=n;},null);
__d("MReactSearchOverlay",["MAddFriend","MReactSearchResultsPresenter","MReactTypeahead","React","Stratcom","SearchMTouchGlobalOptions","cx","fbt","MOpenable"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';b('MOpenable');var o=j.PropTypes,p=j.createClass({displayName:"MReactSearchOverlay",propTypes:{display:o.bool,onClickItem:o.func,onClose:o.func,onTypeaheadUpdate:o.func,typeaheadConfig:o.object.isRequired},init:function(){this.refs.searchInput.configureDatasource(l);this.refs.searchInput.configureMSearchTypeaheadPerfLogger();this.refs.searchInput.configureMSideNavMarauderLogger();this.refs.searchInput.configureMSearchTypeaheadLogger();this.refs.searchInput.configureMRecentSearchesUpdater();this.focus();},focus:function(){this.refs.searchInput.focusInput();},blur:function(){this.refs.searchInput.blurInput();},hideKeyboard:function(){this.blur();},close:function(){this.props.onClose();},logSearchSessionEnd:function(q){k.invoke('log-m-search-session-end',null,{reason:q});},render:function(){return (j.createElement("div",{className:"_5fmz",style:{display:this.props.display?'':'none'}},j.createElement("div",{className:"_5fm-"},j.createElement("button",{className:"_5fm_ touchable btn btnI bgdb mfss",type:"submit","data-sigil":"touchable","data-store":'{"nativeClick": true}',onClick:this.onCancelClick},"Cancel"),j.createElement(i,{ref:"searchInput",placeholder:"Search",presenter:h,typeaheadConfig:this.props.typeaheadConfig,showClearButton:true,onClickItem:this.onClickItem,onTouchStart:this.onTouchStart,onUpdate:this.props.onTypeaheadUpdate}))));},onCancelClick:function(){this.logSearchSessionEnd('cancel');k.invoke('m:search-overlay:cancel-react');this.onCancel();},onCancel:function(q){this.close();this.refs.searchInput.reset();},onClickItem:function(q){this.props.onClickItem();this.hideKeyboard();this.close();},onTouchStart:function(q){this.hideKeyboard();},handleStateChange:function(q){if(this.refs.searchInput.getInputValue())setTimeout(function(){this.onCancel(q);}.bind(this),0);},getDisplayedHeight:function(){return this.refs.searchInput.getDisplayedHeight();},componentDidMount:function(){g.main();k.listen('m:history:change',null,this.handleStateChange);k.listen('m:side-area:hide',null,function(){this.logSearchSessionEnd('back');}.bind(this));}});e.exports=p;},null);
__d("XChatBuddyCountControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/chat\/online_friend_count\/",{});},null);
__d("fetchBookmarks",["FBJSON","MRequest"],function(a,b,c,d,e,f,g,h){'use strict';function i(j,k){var l=new h('/api/').setData({method:'bookmarks.get',mobile:true});l.listen('error',function(m){m.isHandled=true;k(m);});l.listen('done',function(m){if(typeof m!=='string'){k("payload is not string.",m);return;}var n=g.parse(m,e.id);if('error_code' in n||(n&&n[0]&&'error_code' in n[0])){k(n[0]||n);}else j(n);});l.send();}e.exports=i;},null);
__d("MReactSidenav",["MLogger","MRequest","MReactPartialSideMenu","MReactSearchOverlay","MViewport","React","Stratcom","XChatBuddyCountControllerURIBuilder","cx","fetchBookmarks","invariant","keyMirror","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';var t=l.PropTypes,u=217974574879787,v=245119965500321,w=r({SELF:null,SECONDARY:null,SEARCH:null}),x={};x[w.SELF]='mainMenu';x[w.SECONDARY]='mainMenu';x[w.SEARCH]='search';var y=null,z=null,aa=l.createClass({displayName:"MReactSidenav",_bookmarkCountsById:[],_viewportConstraint:null,propTypes:{backButtonImg:t.object,bookmarkGroups:t.array,createGroupURI:t.string.isRequired,createPageURI:t.string,display:t.bool.isRequired,isPartial:t.bool.isRequired,footerMarkup:t.object,loaderId:t.string,loaderMarkup:t.object,onClickItem:t.func.isRequired,showSearchHeader:t.bool,typeaheadConfig:t.object,pinnedPageTestGK:t.bool,pinnedPageID:t.string,searchSubscriptionBookmarkNUX:t.object,showSearchSubscriptionBookmarkAtTop:t.bool},getInitialState:function(){var ba=this.props,ca=(z&&z.bookmarkGroups||ba.bookmarkGroups||[]);this._adaptBookmarkGroups(ca);return {displayMode:w.SELF,secondaryData:null,isPartial:ba.isPartial,bookmarkGroups:ca,footerMarkup:(z&&z.footerMarkup)||ba.footerMarkup};},componentWillMount:function(){if(z)this.fetchBookmarks();},deferredRefresh:function(){s(this._refreshViewport,0);},deferredViewportUpdate:function(){s(this._updateViewport,0);},toggleMenu:function(ba){q(this._isOpen());this.setState({secondaryData:ba,displayMode:this.state.displayMode===w.SELF?w.SECONDARY:w.SELF},this.deferredRefresh);},updateChatCounts:function(){var ba=new n().getURI(),ca=new h(ba).setIgnoreErrors(true);ca.listen('done',function(da){this._getBookmarkCount(v).value=da.online_friend_count;this.setState(this.state);}.bind(this));ca.send();},_showSearch:function(){this._toggleSearch(true);},_hideSearch:function(){this._toggleSearch(false);},_toggleSearch:function(ba){var ca=this;this.setState({displayMode:ba?w.SEARCH:w.SELF},function(){if(ba)ca.refs.search.init();ca.deferredRefresh();});},_updateViewport:function(){if(this._isOpen()){var ba=this.refs[x[this.state.displayMode]];q(ba);var ca=ba.getDisplayedHeight()+k.getHeaderHeight();if(this._viewportConstraint){this._viewportConstraint.setValue(ca);}else this._viewportConstraint=k.addHeightConstraint(ca);}else if(this._viewportConstraint){this._viewportConstraint.release();this._viewportConstraint=null;}},_refreshViewport:function(){this._updateViewport();k.scrollToHeader();},render:function(){var ba=this.props.typeaheadConfig!==null,ca=ba?l.createElement(j,{ref:"search",display:this.state.displayMode===w.SEARCH,typeaheadConfig:this.props.typeaheadConfig,onClose:this._hideSearch,onClickItem:this.props.onClickItem,onTypeaheadUpdate:this._refreshViewport}):null,da=this.state.displayMode!==w.SEARCH&&l.createElement(i,{ref:"mainMenu",enableReactSearch:ba,onClickSearchProxy:this._showSearch,loaderId:this.props.loaderId,loaderMarkup:this.props.loaderMarkup,footerMarkup:this.state.footerMarkup,isSecondary:this.state.displayMode===w.SECONDARY,createGroupURI:this.props.createGroupURI,createPageURI:this.props.createPageURI,bookmarkGroups:this.state.bookmarkGroups,isPartial:this.state.isPartial,secondaryData:this.state.secondaryData,backButtonImg:this.props.backButtonImg,onClickItem:this._onClickItem,onClickBackButton:this.toggleMenu,onClickSeeAll:this.toggleMenu,showSearchHeader:this.props.showSearchHeader,pinnedPageTestGK:this.props.pinnedPageTestGK,pinnedPageID:this.props.pinnedPageID,searchSubscriptionBookmarkNUX:this.props.searchSubscriptionBookmarkNUX,showSearchSubscriptionBookmarkAtTop:this.props.showSearchSubscriptionBookmarkAtTop}),ea=((this.props.display?"_5q9e":'')+(!this.props.display?' '+"_5q9f":'')+(!this.state.isPartial?' '+"_1aqy":'')),fa={top:k.getHeaderTop()-1};return (l.createElement("div",{className:ea},l.createElement("div",{className:"mSideArea",style:fa},da),ca));},_onClickItem:function(){this.props.onClickItem();this.setState(this.state);},_isOpen:function(){return this.props.display;},componentDidMount:function(){q(!y);y=this;if(this.props.typeaheadConfig===null)m.listen('click',['search-overlay','typeahead-result'],this._onClickItem);m.listen('click',['search-overlay','discovery-external-page'],this._onClickItem);m.listen('click',['side-menu-item','tag:a'],this._onClickItem);m.listen('inbox',null,this._updateMessageCounts);m.listen('nav_update_counts',null,this._updateSidenavCounts);},_updateBookmarks:function(ba){this._adaptBookmarkGroups(ba);this.setState({bookmarkGroups:ba,isPartial:false},this._refreshWhenOpen);},_refreshWhenOpen:function(){if(this._isOpen())this._refreshViewport();},_getBookmarkCount:function(ba){var ca=this._bookmarkCountsById[ba];if(!ca)ca=this._bookmarkCountsById[ba]={};return ca;},_updateSidenavCounts:function(ba){var ca=ba.getData().items;for(var da=0;da<ca.length;da++){var ea=ca[da],fa=parseInt(ea.key.substring(ea.key.indexOf('_')+1),10);q('count' in ea||'increment' in ea);var ga=this._getBookmarkCount(fa);if(ea.count!==(void 0)){ga.value=ea.count;}else if(ea.increment)ga.value=Math.max(0,ga.value+ea.increment);}this.setState(this.state);},_updateMessageCounts:function(ba){this._getBookmarkCount(u).value=ba.getData().unread;this.setState(this.state);},_adaptBookmarkGroups:function(ba){for(var ca=0;ca<ba.length;ca++){this._adaptBookmarkCounts(ba[ca].all||[]);this._adaptBookmarkCounts(ba[ca].visible||[]);}return ba;},_adaptBookmarkCounts:function(ba){for(var ca=0;ca<ba.length;ca++){var da=ba[ca],ea=this._getBookmarkCount(da.id);ea.value=da.count;da.count=ea;}},applyPayload:function(ba){if(ba&&ba.bookmarkGroups)ba.bookmarkGroups=this._adaptBookmarkGroups(ba.bookmarkGroups);this.setState(ba,this.deferredViewportUpdate);},fetchBookmarks:function(){p(this._updateBookmarks,function(ba){g.warn('[react-bookmarks] error: %s',JSON.stringify(ba));});}});aa.update=function(ba){if(!y){if(ba)z=ba;}else{y.applyPayload(ba);if(!ba||ba.isPartial)y.fetchBookmarks();}};e.exports=aa;},null);
__d("MReactSidearea",["CSS","MAria","MJewels","MHistory","MReactSidenav","MTabbable","React","Stratcom","cx","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";function q(s){return s.isUserOpened;}var r=m.createClass({displayName:"MReactSidearea",getInitialState:function(){return {isUserOpened:false,isAnimating:false};},render:function(){var s=this.state.isAnimating||q(this.state),t=null;if(s)t=m.createElement("div",{className:"_5gz3","data-sigil":"touchable",onClick:this._setUserClosed});return (m.createElement("div",null,m.createElement(k,m.__spread({},this.props,{ref:"sidenav",display:s,onClickItem:this._setUserClosed})),t));},componentWillMount:function(){this._setUserClosed=this._setUserOpened.bind(this,false);},componentDidMount:function(){this._listeners=[n.listen('click','menu-link',this._handleMenuLinkClick),n.listen('m:history:change',null,this._handleHistoryChange)];this._componentDidMountOrUpdate();},componentDidUpdate:function(s,t){var u=q(this.state),v=q(t);if(v!==u)n.invoke(u?'m:side-area:show':'m:side-area:hide');var w=this.state.isAnimating,x=t.isAnimating;if(x!==w){clearTimeout(this._onAnimationEnd);if(w)this._onAnimationEnd=p(this._handleAnimationEnd,200);}var y=this.state.isUserOpened,z=t.isUserOpened;if(z!==y)if(y){j.pushSoftState(i.MORE);p(function(){return l.focusTabbable(this.getDOMNode());}.bind(this),0);}else j.popSoftState(i.MORE);this._componentDidMountOrUpdate();},_componentDidMountOrUpdate:function(){var s=document.body,t=this.getDOMNode();g.conditionClass(s,'sideShowing',this.state.isUserOpened);if(q(this.state)){h.show(t);}else h.hide(t);this.refs.sidenav.deferredViewportUpdate();},_handleHistoryChange:function(event){var s=event.getData().soft===i.MORE,t=this.state.isUserOpened;if(t!==s)this._setUserOpened(s);},_handleMenuLinkClick:function(){var s=this.state.isUserOpened;if(s&&!this.props.preventClose){this._setUserOpened(false);}else if(!s)this._setUserOpened(true);},_setUserOpened:function(s){if(s)this.refs.sidenav.updateChatCounts();this.setState({isUserOpened:s,isAnimating:true});},_handleAnimationEnd:function(){this.setState({isAnimating:false});},componentWillUnmount:function(){for(var s=0;s<this._listeners.length;++s)this._listeners[s].remove();this._listeners=null;clearTimeout(this._onAnimationEnd);this._onAnimationEnd=null;}});e.exports=r;},null);
__d("XMobileSearchTrendingLoggingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/graphsearch\/trending\/logging\/",{topic_ids:{type:"IntVector",required:true},source:{type:"String",required:true},positions:{type:"IntVector",required:true},query_id:{type:"Int",required:true},event:{type:"String",required:true}});},null);
__d("MSearchTrendingLogger",["XMobileSearchTrendingLoggingControllerURIBuilder","MRequest","MSearchConst","Stratcom"],function(a,b,c,d,e,f,g,h,i,j){var k=null,l={registerTrendingTopicListeners:function(m,n,o,p){if(!k)k={};for(var q=0;q<m.length;q++){var r=m[q];if(r==null||k[r])continue;k[r]=j.listen('click',r,this._logTrendingTopicClick(r,n,o[q],p));}},logTrendingTopicImpressions:function(m,n,o,p){if(!m)return;for(var q=0;q<m.length;q++)if(m[q]==null){m.splice(q,1);o.splice(q,1);q--;}var r=new g().setIntVector('topic_ids',m).setString('source',n).setIntVector('positions',o).setInt('query_id',p).setString('event',i.event_impression).getURI(),s=new h(r);s.send();},_logTrendingTopicClick:function(m,n,o,p){if(!m)return;return function(){var q=new g().setIntVector('topic_ids',[m]).setString('source',n).setIntVector('positions',[o]).setInt('query_id',p).setString('event',i.event_click).getURI(),r=new h(q);r.send();};}};e.exports=l;},null);
__d("MSearchOverlay",["setTimeoutAcrossTransitions","$","CSS","DOM","DataStore","MJewels","MPlaces","MSearchConst","MSearchTrendingLogger","MViewport","MLinkHack","MTouchClick","Stratcom","URI","Vector","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=function(x){var y=x.useHistory,z=h(x.overlay),aa=j.find(z,'div','typeahead-hardpoint'),ba=h(x.textinput),ca=x.cancelbtn?h(x.cancelbtn):null,da=x.nullstate,ea=x.emptyStatePromo;if(ba.tagName!=='input')ba=j.find(ba,'input');var fa=k.get(aa);if(fa.typeahead){ga();}else s.listen('m:search-typeahead:ready',null,ga);function ga(){var ha=fa.typeahead;s.listen('m:text-input:clear',null,ta);s.listen('m:viewport:update',null,function(xa){v(z.style,xa.getData());});var ia,ja=false,ka=false,la,ma=true;function na(){var xa=u.getDim(j.scry(z,'div','marea')[0]).y,ya=j.scry(z,'div','jx-typeahead-results')[0];xa=xa+(ya?u.getDim(ya).y:0);return Math.max(xa,p.getScreenHeight());}function oa(){if(!ea)return;i.conditionShow(ea,ha.getValue().length===0);}function pa(xa){var ya=na();ia=p.addHeightConstraint(ya);z.style.minHeight=ya+'px';ja=true;la=g(function(){ka=ja;},2000);i.conditionClass(h("page"),'sideSearchShowing',true);j.show(z);p.scrollToHeader();oa();if(da&&ha.getValue().length===0)qa(da);}function qa(xa){var ya=xa.getElementsByClassName('jx-typeahead-results')[0].getAttribute('data-query'),za=[],ab=[],bb=xa.getElementsByClassName('jx-result');for(var cb=0;cb<bb.length;cb++){za.push(bb[cb].getAttribute('data-topic'));ab.push(cb+1);}o.registerTrendingTopicListeners(za,n.msite_news_non_gs_null_state,ab,ya);o.logTrendingTopicImpressions(za,n.msite_news_non_gs_null_state,ab,ya);}function ra(xa){i.conditionClass(h("page"),'sideSearchShowing',false);clearTimeout(la);ja=ka=false;j.hide(z);z.style.minHeight='';ia&&ia.release();ia=null;m.clearWatch();}function sa(xa){s.invoke('log-m-search-session-end',null,{reason:xa});}function ta(){ha.clear();ha.refresh();}function ua(){ma=false;ta();va();oa();}function va(){ba.blur();}if(y)s.listen('m:history:change',null,function(xa){var ya=xa.getData().soft===l.SEARCH;if(ya){pa();ba.focus();}else{sa('cancel');ua();ra();}}.bind(this));var wa=r.hasTouchEvents()?'touchend':'click';s.listen(wa,'search-activator',pa);s.listen('click','search-activator',ba.focus.bind(ba));ha.listen('show',function(){g(function(){ja&&ia.setValue(na());},0);if(da)if(ha.getValue().length>0){j.hide(da);}else j.show(da);oa();});j.listen(aa,'click','typeahead-result',function(xa){var ya=s.invoke('m:search-typehead:click',null,xa.getNode('typeahead-result')),za=ya.getData();q.safe(za,function(ab){ab.href=new t(ab.href).addQueryData('refid',n.refid);});ya.setData(za);if(ya.getPrevented()){if(ya.getStopped()){xa.kill();}else xa.prevent();va();}else{ua();ra();}});ha.listen('choose',function(){s.context().prevent();});z.onclick=function(){if(!ka){ka=true;ba.focus();}};if(ca)j.listen(ca,'click',null,function(){if(y){history.go(-1);}else if(ka){sa('cancel');ua();ra();}s.invoke('m:search-overlay:cancel');});j.listen(z,'touchstart','jx-result',va);j.listen(ba,'focus',null,function(xa){ma=true;p.scrollToHeader();});ha.listen('blur',function(xa){if(ma)xa.prevent();});s.listen('m:side-area:hide',null,function(){sa('back');ra();});}};f.main=w;},null);
__d("StrSet",[],function(a,b,c,d,e,f){function g(h){"use strict";this.$StrSet0={};this.$StrSet1=0;if(h)this.addAll(h);}g.prototype.add=function(h){"use strict";if(!this.$StrSet0.hasOwnProperty(h)){this.$StrSet0[h]=true;this.$StrSet1++;}return this;};g.prototype.addAll=function(h){"use strict";h.forEach(this.add,this);return this;};g.prototype.remove=function(h){"use strict";if(this.$StrSet0.hasOwnProperty(h)){delete this.$StrSet0[h];this.$StrSet1--;}return this;};g.prototype.removeAll=function(h){"use strict";h.forEach(this.remove,this);return this;};g.prototype.toArray=function(){"use strict";return Object.keys(this.$StrSet0);};g.prototype.toMap=function(h){"use strict";var i={};Object.keys(this.$StrSet0).forEach(function(j){i[j]=typeof h=='function'?h(j):h||true;});return i;};g.prototype.contains=function(h){"use strict";return this.$StrSet0.hasOwnProperty(h);};g.prototype.count=function(){"use strict";return this.$StrSet1;};g.prototype.clear=function(){"use strict";this.$StrSet0={};this.$StrSet1=0;};g.prototype.clone=function(){"use strict";return new g(this);};g.prototype.forEach=function(h,i){"use strict";Object.keys(this.$StrSet0).forEach(h,i);};g.prototype.map=function(h,i){"use strict";return Object.keys(this.$StrSet0).map(h,i);};g.prototype.some=function(h,i){"use strict";return Object.keys(this.$StrSet0).some(h,i);};g.prototype.every=function(h,i){"use strict";return Object.keys(this.$StrSet0).every(h,i);};g.prototype.filter=function(h,i){"use strict";return new g(Object.keys(this.$StrSet0).filter(h,i));};g.prototype.union=function(h){"use strict";return this.clone().addAll(h);};g.prototype.intersect=function(h){"use strict";return this.filter(function(i){return h.contains(i);});};g.prototype.difference=function(h){"use strict";return h.filter(function(i){return !this.contains(i);}.bind(this));};g.prototype.equals=function(h){"use strict";var i=function(m,n){return m===n?0:m<n?-1:1;},j=this.toArray(),k=h.toArray();if(j.length!==k.length)return false;var l=j.length;j=j.sort(i);k=k.sort(i);while(l--)if(j[l]!==k[l])return false;return true;};e.exports=g;},null);
__d("PlatformBaseVersioning",["PlatformVersions","getObjectValues","StrSet","invariant"],function(a,b,c,d,e,f,g,h,i,j){var k=new i(h(g.versions)),l=location.pathname,m=l.substring(1,l.indexOf('/',1)),n=k.contains(m)?m:g.versions.UNVERSIONED;function o(r,s){if(s==g.versions.UNVERSIONED)return r;j(k.contains(s));if(r.indexOf('/')!==0)r='/'+r;return '/'+s+r;}function p(r){if(k.contains(r.substring(1,r.indexOf('/',1))))return r.substring(r.indexOf('/',1));return r;}var q={addVersionToPath:o,getLatestVersion:function(){return g.LATEST;},versionAwareURI:function(r){return r.setPath(o(r.getPath(),n));},versionAwarePath:function(r){return o(r,n);},getUnversionedPath:p};e.exports=q;},null);
__d("PlatformWidgetEndpoint",["PlatformBaseVersioning"],function(a,b,c,d,e,f,g){function h(m,n){return g.versionAwarePath('/dialog'+'/'+m+(n?'/'+n:''));}function i(m,n){return g.versionAwarePath('/plugins'+'/'+m+(n?'/'+n:''));}function j(m){return (/^\/plugins\//).test(g.getUnversionedPath(m));}function k(m){return (/^\/dialog\//).test(g.getUnversionedPath(m));}var l={dialog:h,plugins:i,isPluginEndpoint:j,isDialogEndpoint:k};e.exports=l;},null);
__d("XFeedNUXSaveSeenStateControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool"}});},null);
__d("MFeedNUXTooltip",["DOM","MRequest","MViewport","Stratcom","XFeedNUXSaveSeenStateControllerURIBuilder","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={},n,o={},p,q=500,r=100,s=1,t=0;function u(){n=j.listen('scroll',null,w);l(v);}function v(){if(n)n.remove();n=null;window.clearTimeout(p);p=null;}function w(){var z=i.getHeight();if(p){window.clearTimeout(p);p=null;}for(var aa in m){var ba=m[aa],ca=ba.getNodes(),da=ba.getHeadRoom();for(var ea=0;ea<ca.length;ea++){var fa=ca[ea].getBoundingClientRect();if(fa.top>da&&fa.bottom<z){x(ca[ea],ba);break;}}}}function x(z,aa){p=window.setTimeout(function(){if(aa.getContext()!==z){aa.setContext(z);aa.show();}},q);}function y(z,aa,ba,ca){"use strict";if(!m.length)u();if(m[aa]||o[aa]){ba.destroy();return;}this.$MFeedNUXTooltip0=aa;this.$MFeedNUXTooltip1=g.scry(document.getElementById('page'),'*',z);this.$MFeedNUXTooltip2=z;this.$MFeedNUXTooltip3=t;this.$MFeedNUXTooltip4=ba;this.$MFeedNUXTooltip5=ca===0?0:ca||r;m[aa]=this;w();}y.prototype.destroy=function(){"use strict";delete m[this.$MFeedNUXTooltip0];if(!Object.keys(m).length)v();};y.prototype.getContext=function(){"use strict";return this.$MFeedNUXTooltip4.getContext();};y.prototype.getNodes=function(){"use strict";return this.$MFeedNUXTooltip1;};y.prototype.getHeadRoom=function(){"use strict";return this.$MFeedNUXTooltip5;};y.prototype.getIsUnseen=function(){"use strict";return this.$MFeedNUXTooltip3===t;};y.prototype.setContext=function(z){"use strict";this.$MFeedNUXTooltip4.setContext(z);};y.prototype.show=function(){"use strict";if(this.$MFeedNUXTooltip3===s)return;o[this.$MFeedNUXTooltip0]=true;this.$MFeedNUXTooltip3=s;this.$MFeedNUXTooltip4.show();var z=(new k()).setString('key',this.$MFeedNUXTooltip0).setBool('seen',true);(new h(z.getURI())).setMethod('POST').send();this.destroy();};e.exports=y;},null);
__d("MJewelMarauderLogger",["MarauderLogger"],function(a,b,c,d,e,f,g){function h(j,k,l){var m={};if(k==='scroll'){m.action_type=k;m.extra_data=l;}else if(k==='clicked'){m.action_type=k;var n=l.getNode('tag:a');m.extra_data=n&&n.href?n.href:null;}else if(k==='updated')m.action_type=k;g.log('jewel',j,m);}function i(j,k,l){g.toggleModule(j,k,l);}e.exports={log:h,toggleModule:i};},null);
__d("MSideNavMarauderLogger",["DataStore","Stratcom","MarauderLogger","MTouchClick"],function(a,b,c,d,e,f,g,h,i,j){var k='';function l(event){i.toggleModule('sidebar_menu',true);}function m(event){i.toggleModule('sidebar_menu',false);}function n(event){var w=event.getNode('tag:a'),x=event.getNode('tag:div');i.log('open_application','sidebar_menu',{application_link_type:'local_module',display_name:x?x.innerText:'unknown',url:w&&w.href});i.setNavigationModule('sidebar_menu');}function o(){t('session_start');}function p(){t('cancel');}function q(w){var x=w.getData();if(x.node.rel<=0)return;var y=0,z='',aa=g.get(x.node);if(aa){y=aa.bootstrap?1:0;z=aa.type;}var ba=0,ca=null;for(var da=0;da<x.results.length;da++){var ea=x.results[da];if(ea.rel>0){if(ea.rel==x.node.rel){ca=ba;break;}ba++;}}t('click',{query:x.query,is_bootstrapped:y,display_position:ca},z,x.node.rel);}function r(w){var x=w.getData();t('click',{query:x.query,is_bootstrapped:x.node.bootstrap?1:0,display_position:x.position},x.node.type,x.node.id);}function s(w){if(k!==w)t('search_keystroke',{prev_query:k,new_query:w});k=w;}function t(w,x,y,z){i.log(w,'search_typeahead',x,y,z);}function u(w){w.listen('change',s);}h.listen('m:side-area:show',null,l);h.listen('m:side-area:hide',null,m);h.listen('click','side-menu-item',n);var v=j.hasTouchEvents()?'touchend':'click';h.listen(v,'search-activator',o);h.listen(v,'graph-search-activator',o);h.listen('click','graph-search-entry-point',o);h.listen('m:search-overlay:cancel',null,p);h.listen('m:search-overlay:cancel-react',null,p);h.listen('m:search-typeahead:select',null,q);h.listen('m:search-typeahead:select-react',null,r);e.exports={setupTypeaheadListener:u};},null);
__d("MSearchMessages",["DOM","Stratcom"],function(a,b,c,d,e,f,g,h){function i(j){var k=g.listen(j,'submit',null,function(l){l.kill();j.getElementsByTagName('button')[0].focus();});h.listen('m:page:unload',null,function(){k.remove();h.removeCurrentListener();});}e.exports={init:i};},null);
__d("MFirstPageRecorder",["DOM","MDeepCopy","MURI","MPageCache","MPageController","MPageHeaderRight","MPageTitle","MPageletTypes","MRenderingScheduler","MResponseData","Stratcom","$","ServerJS"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t=true,u=[];function v(){if(s)return;s=true;var w=new i(k.getRenderedPath()),x,y=[];u=[o.attachListenerToSyncPageletComplete(function(){j.setCachedPage(w,x);j.clearCachedIUIResponses(w);y.forEach(function(z){j.addCachedIUIResponse(w,z);});}),o.attachListenerToSyncPageletLoader(function(z){if(z.pageletConfig.type!==n.CONTENT)return;var aa={js:z.js||[],css:z.css||[],ixData:z.ixData};aa.actions=[{cmd:'replace',target:z.id,html:z.content.__html,replaceifexists:false,allownull:false},{cmd:'append',target:'static_templates',html:z.pageletConfig.templates.__html,replaceifexists:true}];var ba=h(z.pageletConfig.serverJSData),ca=[function(){var ha=b('ServerJS');(new ha()).handle(h(ba));}];if(t){t=false;var da=r('root').cloneNode(true);x=new p({js:[],css:[],ixData:[],actions:[{cmd:'script',type:'immediate',fn:function(){g.replace(r('root'),da.cloneNode(true));}}]});var ea=l.getChromeHeaderRightContent();if(ea&&ea.length>0)ca.push(function(){var ha=document.createDocumentFragment();for(var ia=0;ia<ea.length;ia++)ha.appendChild(ea[0]);l.setup({node:ha});});var fa=document.title;ca.push(function(){m.setTitle(fa);});}for(var ga=0;ga<ca.length;ga++)aa.actions.push({cmd:'script',type:'onload',fn:ca[ga]});y.push(new p(aa));})];}q.listen('m:page:unload',null,function(){u.forEach(function(w){w&&w.remove();w=null;});s=true;q.removeCurrentListener();});f.startPageletCaching=v;},null);
__d("WebdriverDomainLower",[],function(a,b,c,d,e,f){function g(){if(window.parent!==window&&document.cookie.match(/(^unittest_config=)|(;\s*unittest_config=)/))document.domain='facebook.com';}f.lowerDomain=g;},null);
__d("MSearchComponentLogger",["Banzai","ge","Stratcom","Parent","DOM"],function(a,b,c,d,e,f,g,h,i,j,k){var l='mtouch_search_component_logging',m='m-search-component-marker-sigil',n='click',o='impression';function p(q,r,s){"use strict";if(!q)return;this.logData=r;if(s){this.logData.unique_id=this.$MSearchComponentLogger0();this.$MSearchComponentLogger1();}this.sigils=q;this.$MSearchComponentLogger2=this.$MSearchComponentLogger2.bind(this);q.forEach(function(t){i.listen('click',t,this.$MSearchComponentLogger2);}.bind(this));}p.prototype.$MSearchComponentLogger0=function(q){"use strict";var r=Date.now();return this.logData.userid+this.logData.typeid+r;};p.prototype.$MSearchComponentLogger1=function(){"use strict";var q=this.logData;q.event=o;g.post(l,q,{delay:0,retry:true});};p.prototype.$MSearchComponentLogger3=function(q){"use strict";while(q){if(i.hasSigil(q,m))return q;if(q.getAttribute('data-sigil')){q=q.parentNode;}else q=j.byAttribute(q,'data-sigil');}return null;};p.prototype.$MSearchComponentLogger2=function(q){"use strict";var r=this.$MSearchComponentLogger3(q.getTarget());if(!r)return;var s=null;this.sigils.forEach(function(u){if(i.hasSigil(r,u))s=u;});this.logData.sigil=s;var t=this.logData;t.event=n;t=this.$MSearchComponentLogger4(t);g.post(l,t,{delay:0,retry:true});};p.prototype.$MSearchComponentLogger4=function(q){"use strict";var r=h('main-search-input');if(r){q.query=r.value;var s=j.byTag(r,'form'),t=k.scry(s,'input','search-typeahead-session-id')[0];if(t)q.tsid=t.value;}return q;};e.exports=p;},null);
__d("MLink",["DOM","DataStore","ErrorUtils","MTabletLoader","MLinkHack","MLogger","MPageCache","MPageController","PlatformWidgetEndpoint","Stratcom","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r='standalone' in window.navigator&&window.navigator.standalone,s=false;function t(){if(s)return;s=true;g.listen(document.documentElement,'click',null,function(event){if(event.getPrevented())return;i.applyWithGuard(function(){var u=event.getNode('tag:a');if(!u)return;var v=event.getRawEvent();if(u.getAttribute('onclick')||(v.which||v.button)>=2)return;k.remove(u);var w=u.getAttribute('href'),x=new q(w),y=x.getProtocol();if(y&&y!='http'&&y!='https')return;var z=x.getDomain(),aa=w&&w.charAt(0),ba=!aa||/[\/#]/.test(aa),ca=x.getPort()?[z,x.getPort()].join(':'):z,da=ba||location.host===ca,ea=z&&!(/\.facebook.com$/i).test(z);if(ea&&!p.hasSigil(u,'MLinkshim'))l.mustfix('Loading an external URL without shimming: %s',w);var fa=u.getAttribute('target');if((fa=='_blank'||ea)&&r)return;if(fa=='_blank'){window.open(w,'_blank');}else if(j.isTabletFrame&&!da){j.MTabletLink.gotoURI(w);}else if(o.isDialogEndpoint(x.getPath())){return;}else if(fa||(y&&(y+':')!==location.protocol)||p.hasSigil(u,'no_mpc')||ea){window.location=w;}else if(w){if(w.indexOf('#')===0){var ga=document.getElementById(w.substr(1));ga&&ga.scrollIntoView();}else{var ha=h.get(u);if(ha.fromCache)m.setScrollHistory(w,0);n.load(w,{replace:ha.behavior==='replace-state',expiration:ha.fromCache?n.HISTORY_EXPIRE_MS:null});}}else{if(u.hasAttribute('data-sigil'))return;var ia='',ja=event.getTarget();while(ja&&ja!=document.body){ia=ia+' <'+ja.nodeName;if(ja.id)ia=ia+' id='+ja.id;if(ja.className)ia=ia+' class='+ja.className;ia=ia+' >';ja=ja.parentNode;}l.warn('handleClick: unknown link action: '+'<a id="%s" class="%s" /> Path: %s',u.id,u.className,ia);return;}event.prevent();},null,[],null,'LinkController');});}f.setupListener=t;},null);
__d("MTextInputClearable",["setTimeoutAcrossTransitions","$","DOM","Stratcom"],function(a,b,c,d,e,f,g,h,i,j){var k=function(l){var m=h(l.wrapper),n=i.find(m,'input','clearableInput'),o=i.find(m,'div','clearButton'),p=getComputedStyle(m).getPropertyValue("display").indexOf('inline-')!==-1,q=[],r;function s(){if(r)clearTimeout(r);if(p&&!m.style.width)m.style.width=m.clientWidth+'px';i.show(o);}function t(){i.hide(o);}function u(y){r=g(function(){t();},0);}function v(y){if(!n.value.length){t();}else if(o.style.display==='none')s();}function w(y){n.value='';t();n.focus();j.invoke('m:text-input:clear',null,n);}function x(){if(r)clearTimeout(r);if(!j.hasSigil(n,'permanentInput')){q.forEach(function(y){y.remove();});q=null;}}q.push(i.listen(n,'blur',null,u),i.listen(n,['focus','keyup'],null,v),i.listen(o,'click',null,w),j.listen('m:page:unload',null,x));};f.main=k;},null);
__d("MLayerDestroyOnHide",[],function(a,b,c,d,e,f){function g(h){"use strict";this.$MLayerDestroyOnHide0=h;this.$MLayerDestroyOnHide1;}g.prototype.enable=function(){"use strict";this.$MLayerDestroyOnHide1=this.$MLayerDestroyOnHide0.addListener('hide',this.$MLayerDestroyOnHide0.destroy.bind(this.$MLayerDestroyOnHide0));};g.prototype.disable=function(){"use strict";this.$MLayerDestroyOnHide0=null;this.$MLayerDestroyOnHide1.remove();this.$MLayerDestroyOnHide1=null;};e.exports=g;},null);
__d("MSearchTypeahead",["CSS","DOM","MPageController","MPlaces","MRequest","SearchMTouchGlobalOptions","MURI","Stratcom","Typeahead","copyProperties","createDeprecatedProperties","cx","eventsMixinDeprecated","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=55,v=70;for(var w in o)if(o.hasOwnProperty(w))y[w]=o[w];var x=o===null?null:o.prototype;y.prototype=Object.create(x);y.prototype.constructor=y;y.__superConstructor__=o;function y(z,aa,ba){"use strict";this.loadingIndicator=h.find(z,'div','searchLoadingIndicator');h.hide(this.loadingIndicator);this._seeMoreNode=h.create('a',{className:'touchable viewMore',sigil:'touchable typeahead-result'});h.hide(this._seeMoreNode);if(ba.reportProblemURI)this._reportProblemNode=h.create('a',{className:'touchable reportProblem',href:ba.reportProblemURI,sigil:'touchable typeahead-result'},"Report a Problem");o.apply(this,[z,aa]);this.uberbarQRPromo=h.scry(document.body,'*','uberbarQRPromo')[0];this._photoSize=ba.photoSize;h.listen(this._root,'click','tag:a',function(ca){this.invoke('select',ca.getNode('tag:a'));}.bind(this));h.listen(this._control,'focus',null,this.startWatchLocation);h.listen(this._control,'blur',null,this.stopWatchLocation);}y.prototype.hide=function(){"use strict";if(this.getPermanent())return;o.prototype.hide.call(this);};y.prototype.setDatasource=function(z){"use strict";o.prototype.setDatasource.call(this,z);z.listen('complete',this.complete.bind(this));this.listen('show',this.resultsShown.bind(this));};y.prototype.submit=function(){"use strict";if(this.getValue()!==''){o.prototype.submit.call(this);if(l.enableSeeMore){var z='/search/?query='+encodeURIComponent(this.getValue());i.load(z);}this._control.blur();}};y.prototype.waitForResults=function(){"use strict";if(window.FW_ENABLED){this._root.appendChild(this.loadingIndicator);}else this._root.insertBefore(this.loadingIndicator,this._root.lastChild);h.show(this.loadingIndicator);};y.prototype.complete=function(){"use strict";if(window.FW_ENABLED&&this._display.length===0)this._root.appendChild(h.create('div',{className:'noResults'},"No results"));if(window.FW_ENABLED&&this.uberbarQRPromo){this._root.appendChild(this.uberbarQRPromo);h.show(this.uberbarQRPromo);}h.hide(this.loadingIndicator);};y.prototype.resultsShown=function(z){"use strict";if(this.getValue().length!==0){if(!window.FW_ENABLED){var aa=y.TRUNCATE_LENGTH,ba=this.getValue();if(ba.length>aa)ba=ba.substr(0,aa-3)+'...';if(l.enableSeeMore){this._seeMoreNode.href='/search/?query='+encodeURIComponent(this.getValue());h.setContent(this._seeMoreNode,t._("See more results for {query}",[t.param("query",ba)]));z.show.push(this._seeMoreNode);h.show(this._seeMoreNode);}}if(this._reportProblemNode)z.show.push(this._reportProblemNode);z.show.push(this.loadingIndicator);h.show(this.loadingIndicator);}if(this.showPresence)this.showPresenceIcons(z.show);if(this._photoSize){var ca=((this._photoSize===u?"_32dm":'')+(this._photoSize===v?' '+"_32dn":''));ca=ca&&ca.trim();z.show.forEach(function(da){return g.addClass(da,ca);});}return true;};y.prototype.showPresenceIcons=function(z){"use strict";var aa=[];for(var ba=0;ba<z.length;++ba)if(z[ba].rel)aa.push(z[ba].rel);var ca=new k(new m('/chat/presence_icon.php').setAsync(true).toString());ca.setData({ids:aa});ca.listen('done',function(da){if(!da||da.length===0)return;var ea=h.scry(this._root,'a','typeahead-result');for(var fa=0;fa<ea.length;++fa)if(da[ea[fa].rel]===1){var ga=h.find(ea[fa],'i','presence');h.show(ga);}}.bind(this));ca.send();};y.prototype.addLocationAwareSource=function(z){"use strict";n.listen('location-update',null,function(event){z.setAuxiliaryData(p(z.getAuxiliaryData(),{json_location:j.getCurrentJSONLocation()}));});};y.prototype.startWatchLocation=function(event){"use strict";if(j.shouldUseFWGeolocation())j.monitorLocation();};y.prototype.stopWatchLocation=function(event){"use strict";j.clearWatch();};p(y,{TRUNCATE_LENGTH:20});q(y,{permanent:false});s(y,['select']);p(y.prototype,{icons:null,loadingIndicator:null,uberbarQRPromo:null,showPresence:false});e.exports=y;},null);
__d("MTypeaheadNativeSource",["MTypeaheadHelpers","Stratcom","TypeaheadInternationalNormalizer","TypeaheadPreloadedSource","createDeprecatedProperties","eventsMixinDeprecated","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('FWLoader').FW;for(var n in j)if(j.hasOwnProperty(n))p[n]=j[n];var o=j===null?null:j.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=j;function p(){"use strict";j.apply(this,arguments);this.setNormalizer(i.normalize);}p.prototype.didStart=function(){"use strict";var q=this;h.listen('fw-bootstrapped-results-ready',null,function(r){q.invoke('rawresultsready',r.getData().friends);q.ondata(r.getData().friends);});window.FW_ENABLED&&m.bootstrapUsers();};p.prototype.ondata=function(q){"use strict";for(var r=0;r<q.length;++r)q[r].idx=r;j.prototype.ondata.apply(this,arguments);};p.prototype.sortHits=function(q,r){"use strict";var s=function(t,u){var v=this._raw[t],w=isNaN(v.idx)?Number.MAX_VALUE:v.idx,x=this._raw[u],y=isNaN(x.idx)?Number.MAX_VALUE:x.idx;return w-y;}.bind(this);r.sort(s);};p.prototype.matchResults=function(q){"use strict";var r=this.normalize(q);j.prototype.matchResults.call(this,r);};p.prototype.createNode=function(q){"use strict";return g.createNode(q,this.getShowSecondaryAction());};l(p,['rawresultsready']);k(p,{transformer:function(q){return {name:q.text,uri:q.path,id:q.uid,photo:q.photo,display:q.display||q.text,action:q.action,paths:q.paths,permissions:q.permissions,bootstrap:q.bootstrap,nativethirdpartyappicon:q.nativethirdpartyappicon};},showSecondaryAction:true});e.exports=p;},null);
__d("MTypeaheadPackagedSource",["MTypeaheadHelpers","TypeaheadInternationalNormalizer","TypeaheadPreloadedSource","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j){for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(n){"use strict";i.call(this);this.packagedResults=n;this.setNormalizer(h.normalize);}m.prototype.didStart=function(){"use strict";this.ondata(this.packagedResults);};m.prototype.ondata=function(n){"use strict";for(var o=0;o<n.length;++o)n[o].idx=o;i.prototype.ondata.apply(this,arguments);};m.prototype.sortHits=function(n,o){"use strict";var p=function(q,r){var s=this._raw[q],t=isNaN(s.idx)?Number.MAX_VALUE:s.idx,u=this._raw[r],v=isNaN(u.idx)?Number.MAX_VALUE:u.idx;return t-v;}.bind(this);o.sort(p);};m.prototype.matchResults=function(n){"use strict";var o=this.normalize(n);i.prototype.matchResults.call(this,o);};m.prototype.createNode=function(n){"use strict";return g.createNode(n,this.getShowSecondaryAction());};j(m,{transformer:function(n){return {name:n.text,uri:n.path,id:n.uid,photo:n.photo,display:n.display||n.text,action:n.action,paths:n.paths,permissions:n.permissions,type:n.type,openinnewtab:n.openinnewtab,subtext:n.subtext,bootstrap:n.bootstrap,verified:n.verified,nativethirdpartyappicon:n.nativethirdpartyappicon};},packagedResults:null,showSecondaryAction:true});e.exports=m;},null);
__d("InitMSearchTypeahead",["$","DOM","DataStore","MSearchTypeahead","MSearchTypeaheadLogger","MSearchTypeaheadPerfLogger","MTypeaheadNativeSource","MTypeaheadOnDemandSource","MTypeaheadPackagedSource","MTypeaheadTouchSource","Stratcom","TypeaheadCompositeSource","URI","SearchMTouchGlobalOptions","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=b('FWLoader').FW,v,w,x,y=4,z=function(ba){if(v)return;v=true;w=g(ba.id);var ca=g(ba.textinput);if(ca.tagName.toLowerCase()!=='input')ca=h.find(ca,'input');x=new j(w,ca,{photoSize:ba.photoSize,reportProblemURI:ba.reportProblemURI});if(ba.mSideNavMarauderLogger)ba.mSideNavMarauderLogger.setupTypeaheadListener(x);var da,ea=[];if(ba.sources.packagedSource){da=new o(ba.sources.packagedSource.packagedresults);da.setShowSecondaryAction(ba.showSecondaryAction);if(ba.sources.packagedSource.useProfileSearchPivots)da.listen('complete',aa);ea.push(da);}if(ba.sources.nativeSource){da=new m();da.setShowSecondaryAction(ba.showSecondaryAction);ea.push(da);}if(ba.sources.bootstrapped){da=new p(ba.sources.bootstrapped.src,ba.sources.bootstrapped.source_key);da.setShowSecondaryAction(ba.showSecondaryAction);if(ba.sources.bootstrapped.useProfileSearchPivots)da.listen('complete',aa);ea.push(da);}if(ba.sources.online){da=new n(ba.sources.online.src);if(ba.sources.online.max_results)da.setMaximumResultCount(ba.sources.online.max_results);da.setEnableImmediateReturnOfCachedResults(ba.sources.online.enable_caching);if(t.enableQueryThrottle)da.setThrottleSendRequest(t.queryThrottleTime);da.setMaxResults(t.maxResults);da.setEnableEagerSendRequest(t.enableEagerSendRequest);da.setQueryDelay(t.queryWaitTime);da.setShowSecondaryAction(ba.showSecondaryAction);if(ba.sources.online.useProfileSearchPivots)da.listen('complete',aa);ea.push(da);if(ba.sources.online.useLocation)x.addLocationAwareSource(da);}var fa=new r(ea);fa.disableEmptyMergeKey();x.setDatasource(fa);x.setPermanent(ba.permanent);if(ba.showPresence)x.showPresence=true;if(ba.typeaheadScubaInfo)new l(x,ba.typeaheadScubaInfo,ba.sources.online.enable_caching);var ga='/search/metrics.php',ha=new k(x,ga);q.listen('log-m-search-session-end',null,function(ia){ha.blur(ia.getData().reason);});i.get(w).typeahead=x;q.listen('m-search-typeahead-change',null,function(ia){if(ia.getData().query!=x.getValue()){x.setValue(ia.getData().query);x.refresh();}});h.listen(w,'click','typeahead-result',function(){ca.blur();});q.listen('m:search-typeahead:clear',null,function(ia){x.setValue('');x.refresh();});q.invoke('m:search-typeahead:ready');x.start();if(ca.value!=='')x.refresh();if(window.FW_ENABLED)u.ubersearchReady();};function aa(){var ba=x.getValue();if(!ba)return;var ca=h.scry(w,'a','typeahead-result'),da=ca.filter(function(ea){return i.get(ea).isUser;}).map(function(ea){return ea.rel;});ca.map(function(ea){var fa=new s(ea.href).addQueryData({search_pivots:da.slice(0,y),search_query:ba});ea.href=fa.toString();});}f.main=z;},null);
__d("XSearchNewsNUXDismissControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/search\/news_nux\/dismiss\/",{});},null);