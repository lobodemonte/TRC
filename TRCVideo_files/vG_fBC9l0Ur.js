/*!CK:1647096431!*//*1418667779,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["\/ZnjU"]); }

__d("VideoPlayerInitializationEvents",[],function(a,b,c,d,e,f){e.exports={PLAYER_INITIALIZATION:"player_initialization",PLAYER_ALLOCATED:"player_allocated",REQUESTED_PLAYING:"requested_playing",STARTED_PLAYING:"started_playing",PLAYER_SENT_REQUEST:"player_sent",PLAYER_RECEIVED_FIRST_BYTE:"player_received_first_byte",BUFFER_READY:"buffer_ready",METADATA_READY:"metadata_ready"};},null);
__d("VideoPlayerLoggerEvents",[],function(a,b,c,d,e,f){e.exports={AUTOPLAY_PREFERENCE_CHANGED:"autoplay_preference_changed",END_STALL_TIME:"end_stall_time",AUTOPLAY_PREFERENCE_STATUS:"autoplay_preference_status",NOT_AUTOPLAYING:"not_autoplaying",VIDEO_ORIENTATION_CHANGED:"video_orientation_changed",ASSETS_LOADED:"assets_loaded",BUFFERED:"buffered",CANCELLED_REQUESTED_PLAYING:"cancelled_requested_playing",CAROUSEL_CHANGE:"carousel_change",DISPLAYED:"displayed",ENTERED_HD:"entered_hd",ENTERED_FALLBACK:"entered_fallback",ENTERED_FS:"entered_fs",EXITED_HD:"exited_hd",EXITED_FS:"exited_fs",ERROR:"error",FINISHED_PLAYING:"finished_playing",IMPRESSION:"impression",INVALID_URL:"invalid_url",MUTED:"muted",PAUSED:"paused",PLAY_REQUESTED:"play_requested",PLAYER_LOADED:"player_loaded",PROGRESS:"progress",READY_TO_PLAY:"ready_to_play",REPLAYED:"replayed",REQUESTED:"requested",REQUESTED_PLAYING:"requested_playing",SCRUBBED:"scrubbed",STARTED_PLAYING:"started_playing",STARTED_RECEIVING_BYTES:"started_receiving_bytes",STOPPED_PLAYING:"stopped_playing",UNMUTED:"unmuted",UNPAUSED:"unpaused",VOLUME_CHANGED:"volume_changed",VOLUME_DECREASE:"volume_decrease",VOLUME_INCREASE:"volume_increase",COMPLETION:"completion",VIEW:"view"};},null);
__d("VideoPlayerLoggerSources",[],function(a,b,c,d,e,f){e.exports={ADS:"ads",BROADCAST_REQUEST_ATTACHMENT:"broadcast_request_attachment",EMBEDDED:"embedded",HTML5:"html5",INLINE:"inline",CHAINED:"chained",CHAINED_SUGGESTION:"chained_suggestion",INSIGHTS:"insights",LOOKBACK:"lookback",MISC:"misc",MOBILE:"mobile",PAGES_FINCH_MAIN_VIDEO:"pages_finch_main_video",PAGES_FINCH_THUMBNAIL_VIDEO:"pages_finch_thumbnail_video",PAGES_FINCH_TRAILER:"pages_finch_trailer",PAGES_VIDEO_SET:"pages_video_set",PERMALINK:"permalink",REPORT_FLOW:"report_flow",SNOWLIFT:"snowlift",TRAILER_LANDING_PAGE:"trailer_previews_landing_page",TRAILER_OG_ATTACHMENT:"trailer_og_attachment",TRAILER_TIMELINE_COLLECTIONS:"trailer_timeline_collections",TRAILER_TIMELINE_UNIT:"trailer_timeline_unit",VIDEOHUB_PLAYLIST:"videohub_playlist",VIDEOHUB_FEATURED:"videohub_featured"};},null);
__d("VideoPlayerVersions",[],function(a,b,c,d,e,f){e.exports={HTML5:"html5",SILVERCITY:"silvercity"};},null);
__d("HVideoPlayerMixin",["EventListener","VideoPlayerLoggerEvents","VideoPlayerVersions"],function(a,b,c,d,e,f,g,h,i){var j=-1,k={initLogger:function(l){var m=this.getSubscriptions();this._loggedEvents={};this._logFunction=l;var n=this.getVideoElement();this._lastStartTimePosition=j;this._muted=n.muted;this._pausedPosition=j;this._seeking=false;this._seekSourceTimePosition=j;this._volume=n.volume;this._lastPlayedTime=j;if(n.readyState>=n.HAVE_FUTURE_DATA){this._logReadyToPlay();}else m.addSubscriptions(g.listen(n,'canplay',this._logReadyToPlay.bind(this)));m.addSubscriptions(g.listen(n,'pause',this._onPause.bind(this)),g.listen(n,'playing',this._onPlay.bind(this)),g.listen(n,'seeked',this._onSeeked.bind(this)),g.listen(n,'seeking',this._onSeeking.bind(this)),g.listen(n,'timeupdate',this._onTimeUpdate.bind(this)),g.listen(n,'volumechange',this._onVolumeChange.bind(this)));},_logOnce:function(event,l){if(this._loggedEvents[event])return;this._logEvent(event,l);},_logEvent:function(event,l){this._loggedEvents[event]=true;var m=l?l:{};m.video_id=this.getVideoID();m.player_version=i.HTML5;if(!m.hasOwnProperty('video_time_position'))m.video_time_position=this.getVideoElement().currentTime;m.time=Math.round(Date.now()/1000);if(this.getAdClientToken){var n=this.getAdClientToken();if(n)m.ad_client_token=n;}this._logFunction(event,m);},_logReadyToPlay:function(){this._logOnce(h.READY_TO_PLAY);},_onPause:function(){var l=this.getVideoElement(),event=l.ended?h.FINISHED_PLAYING:h.PAUSED;this._logEvent(event,{video_last_start_time_position:this._lastStartTimePosition,video_time_position:this._lastPlayedTime});this._lastStartTimePosition=j;},getLastStartTimePosition:function(){return this._lastStartTimePosition;},_onPlay:function(){var event=this._loggedEvents[h.STARTED_PLAYING]?h.UNPAUSED:h.STARTED_PLAYING;this._logEvent(event);this._lastStartTimePosition=this.getVideoElement().currentTime.toFixed(2);},_onSeeked:function(){var l={video_seek_source_time_position:this._seekSourceTimePosition};if(this._lastStartTimePosition!==j){l.video_last_start_time_position=this._lastStartTimePosition;}else l.video_last_start_time_position=this._seekSourceTimePosition;this._logEvent(h.SCRUBBED,l);var m=this.getVideoElement();if(m.paused){this._lastStartTimePosition=j;}else this._lastStartTimePosition=m.currentTime;this._seekSourceTimePosition=j;this._seeking=false;},_onSeeking:function(){if(!this._seeking){this._seekSourceTimePosition=this.getVideoElement().currentTime.toFixed(2);this._seeking=true;}},_onTimeUpdate:function(){var l=this.getVideoElement();if(!l.paused)this._lastPlayedTime=l.currentTime.toFixed(2);},_onVolumeChange:function(){var l=this.getVideoElement(),m={},event=null;if(l.muted!==this._muted&&l.volume===this._volume&&l.volume>0){event=l.muted?h.MUTED:h.UNMUTED;}else{event=l.volume>this._volume?h.VOLUME_INCREASE:h.VOLUME_DECREASE;m.current_volume=l.volume;}this._logEvent(event);this._muted=l.muted;this._volume=l.volume;}};e.exports=k;},null);
__d("VideoPlayerLoggerErrors",[],function(a,b,c,d,e,f){e.exports={ENTERED_FALLBACK:'entered_fallback',ERROR_CALLING_FLASH:'error_calling_flash'};},null);
__d("VideoPlayerLoggerErrorStates",[],function(a,b,c,d,e,f){e.exports={PLAYBACK_FAILURE:'playback_failure',PLAYER_FAILURE:'player_failure'};},null);
__d("VideoPlayerLoggerFallbackReasons",[],function(a,b,c,d,e,f){e.exports={TIMEOUT:'timeout',FLASH_ERROR:'flash_error',FLASH_UNAVAILABLE:'flash_unavailable'};},null);
__d("VideoPlayerLoggerPlayerStates",[],function(a,b,c,d,e,f){e.exports={STARTED:'started',UNPAUSED:'unpaused'};},null);
__d("VideoPlayerLogger",["Banzai","ErrorUtils","TimeSpentImmediateActiveSecondsLogger","VideoPlayerLoggerEvents","VideoPlayerLoggerErrors","VideoPlayerLoggerErrorStates","VideoPlayerLoggerFallbackReasons","VideoPlayerLoggerSources","VideoPlayerInitializationEvents","VideoPlayerLoggerPlayerStates","copyProperties","ex"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s='video_player';function t(u,v){"use strict";this.$VideoPlayerLogger0=u;this.$VideoPlayerLogger1=null;this.$VideoPlayerLogger2={};this.$VideoPlayerLogger3=v;this.$VideoPlayerLogger4();}t.prototype.logEvent=function(event,u){"use strict";q(u,this.$VideoPlayerLogger3);if(this.$VideoPlayerLogger2.hasOwnProperty(event)){u.initial_event=false;}else u.initial_event=this.$VideoPlayerLogger2[event]=true;if(!u.hasOwnProperty('time_ms'))u.time_ms=Date.now();if(!u.hasOwnProperty('time'))u.time=Math.round(u.time_ms/1000);if(this.$VideoPlayerLogger1)q(u,this.$VideoPlayerLogger1);switch(event){case o.PLAYER_INITIALIZATION:this.$VideoPlayerLogger5=u.time_ms;break;case o.REQUESTED_PLAYING:case o.STARTED_PLAYING:case o.PLAYER_ALLOCATED:case o.PLAYER_SENT_REQUEST:case o.PLAYER_RECEIVED_FIRST_BYTE:case o.BUFFER_READY:case o.METADATA_READY:if(!u.initial_event)break;u.elapsed_time_since_init=Date.now()-this.$VideoPlayerLogger5;break;}switch(event){case j.REQUESTED_PLAYING:this.$VideoPlayerLogger4();this.$VideoPlayerLogger6();this.$VideoPlayerLogger7=true;if(this.$VideoPlayerLogger2[j.STARTED_PLAYING]){u.state=p.UNPAUSED;}else u.state=p.STARTED;break;case j.STARTED_PLAYING:case j.UNPAUSED:case j.FINISHED_PLAYING:case j.CANCELLED_REQUESTED_PLAYING:case j.ERROR:case j.PAUSED:if(event===j.ERROR&&u.state!==l.PLAYBACK_FAILURE)break;if(event===j.CANCELLED_REQUESTED_PLAYING)if(this.$VideoPlayerLogger2[j.STARTED_PLAYING]){u.state=p.UNPAUSED;}else u.state=p.STARTED;if(this.$VideoPlayerLogger7)this.$VideoPlayerLogger8();this.$VideoPlayerLogger9(u);this.$VideoPlayerLogger4();break;}var v={logData:u,event:event,scriptPath:this.$VideoPlayerLoggera,source:this.$VideoPlayerLogger0};if(!event)h.reportError(new Error(r('VideoPlayerLogger: Missing event name')),false);if(u.ad_client_token){g.post(s,v,g.VITAL);}else g.post(s,v);if(event===j.FINISHED_PLAYING||event===j.PAUSED){var w=u.time_ms||Date.now(),x=u.video_time_position-u.video_last_start_time_position;if(x>=0)i.maybeReportActiveInterval('video',w-Math.floor(x*1000),w);}};t.prototype.setScriptPath=function(u){"use strict";this.$VideoPlayerLoggera=u;};t.prototype.setFTData=function(u){"use strict";this.$VideoPlayerLogger1=u;};t.prototype.startBuffering=function(){"use strict";this.$VideoPlayerLogger6();};t.prototype.endBuffering=function(){"use strict";if(this.$VideoPlayerLoggerb>0)this.$VideoPlayerLogger8();};t.prototype.$VideoPlayerLogger6=function(){"use strict";this.$VideoPlayerLoggerb=Date.now();};t.prototype.$VideoPlayerLogger8=function(){"use strict";this.$VideoPlayerLoggerc=this.$VideoPlayerLoggerc+(Date.now()-this.$VideoPlayerLoggerb);this.$VideoPlayerLoggerd++;};t.prototype.$VideoPlayerLogger9=function(u){"use strict";if(u.player_version==='silvercity'){u.stall_time=Math.max(0,this.$VideoPlayerLoggerc);u.stall_count=this.$VideoPlayerLoggerd;}};t.prototype.$VideoPlayerLogger4=function(){"use strict";this.$VideoPlayerLoggerc=0;this.$VideoPlayerLoggerb=0;this.$VideoPlayerLoggerd=0;this.$VideoPlayerLogger7=false;};q(t,{Sources:n,Errors:k,FallbackReasons:m,ErrorStates:l,PlayerStates:p});e.exports=t;},null);
__d("HVideoPlayerLoggerMixin",["HVideoPlayerMixin","VideoPlayerLogger","VideoPlayerLoggerEvents"],function(a,b,c,d,e,f,g,h,i){var j={},k={initLogger:function(){this._logger=new h(h.Sources.HTML5);var l=function(event,m){return this._logger.logEvent(event,m);}.bind(this);g.initLogger.call(this,l);},getLogger:function(){return this._logger;},getAdClientToken:function(){if(this.getConfig){var l=this.getConfig();if(l.ad_client_token)return l.ad_client_token;}},logDisplayed:function(){this._logEvent(i.DISPLAYED,{is_auto_played:true});}};Object.assign(j,g);Object.assign(j,k);e.exports=j;},null);
__d("MInlineVideoUnit",["HVideoPlayerLoggerMixin","Stratcom","StratcomManager","SubscriptionsHandler","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){var l=['canplay','loadedmetadata','pause','play','seeked','seeking','timeupdate','volumechange'],m=k(g);for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q,r){"use strict";this.$MInlineVideoUnit0=new j();this.$MInlineVideoUnit1=r;this.$MInlineVideoUnit2=q;l.forEach(function(event){i.enableDispatch(this.$MInlineVideoUnit1,event);}.bind(this));this.initLogger();h.listen('m:page:unload',null,function(){this.$MInlineVideoUnit0.release();h.removeCurrentListener();}.bind(this));}p.prototype.release=function(){"use strict";this.$MInlineVideoUnit0.release();};p.prototype.getSubscriptions=function(){"use strict";return this.$MInlineVideoUnit0;};p.prototype.getVideoElement=function(){"use strict";return this.$MInlineVideoUnit1;};p.prototype.getVideoID=function(){"use strict";return this.$MInlineVideoUnit2;};e.exports=p;},null);
__d("MInlineVideo",["CSS","CurrentUser","DataStore","DOM","FBJSON","MInlineVideoUnit","MRequest","Stratcom","cx","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q='playInlineVideo',r='inlineVideo',s="_4ru",t="_4rv",u={video:'mInlineVideoPlayer',iframe:'mInlineVideoFrame'},v={video:{autobuffer:'true',controls:'controls','x-webkit-airplay':'allow'},iframe:{frameBorder:0}},w,x,y,z=false,aa=false,ba=null;function ca(){if(aa)return;n.listen('click',q,ia);n.listen('m:page:unload',null,fa);n.listen(['m:jewel:flyout:open','m:popup:show','m:side-area:show'],null,ga);aa=true;}function da(ja){if(!ja)ja=x;return w&&w.parentNode===ja&&!z;}function ea(){var ja=i.get(y),ka=ja.src,la=ja.type;if(Array.isArray(ka)&&(la!=='video'||ka.length===1))ka=ka[0];if(la==='video'&&Array.isArray(ka)){ka.forEach(function(ma){w.appendChild(j.create('source',ma));});}else if(ka)w.setAttribute('src',ka);if(la==='video')w.load();}function fa(){if(!w||!w.parentNode)return;j.remove(w);while(w.hasChildNodes())w.removeChild(w.lastChild);w.removeAttribute('src');if(i.get(y).type==='video'&&w){w.pause();w=null;}g.conditionClass(y,s,false);z=false;y=null;x=null;}function ga(){if(!da())return;if(i.get(y).type!=='video'){fa();}else if(w){w.pause();g.conditionClass(y,s,false);z=true;}}function ha(){var ja=i.get(y).type,ka=document.getElementById(u[ja]);if(!ka){ka=j.create(ja,v[ja]);ka.id=u[ja];g.conditionClass(ka,t,true);}return ka;}function ia(ja){var ka=ja.getNode(q),la=n.hasSigil(ka,r)?ka:j.find(ka,'*',r);if(da(la))return;ja.prevent();var ma=i.get(ka);if(!z){fa();y=ka;x=la;w=ha();if(ba){ba.release();ba=null;}if(ma.videoID)ba=new l(ma.videoID,w);ea();x.appendChild(w);}g.conditionClass(y,s,true);z=false;if(ma.width)w.setAttribute('width',ma.width);if(ma.height)w.setAttribute('height',ma.height);if(ma.playOnClick&&ma.type==='video')p(function(){if(w)w.play();},100);if(h.isLoggedIn()){var na=ja.getNode('story-div');if(na){var oa=na.getAttribute('data-ft');if(oa){var pa={ft:JSON.parse(oa)},qa=ba.getLogger();qa.setFTData(pa);if(ma.fbid&&ma.ownerID){oa=k.parse(oa,e.id);oa.video_info={video_id:ma.fbid,owner_id:ma.ownerID};oa=k.stringify(oa);}new m('/feedtracking/').setMethod('POST').setData({ft_data:oa,clicked_uri:ma.src,tn:ma.trackingNodes}).send();}}}}f.setupListeners=ca;},null);