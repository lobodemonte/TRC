/*!CK:2045866194!*//*1416226711,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["c2HcE"]); }

__d("MEventChecklist",["DOM","Stratcom"],function(a,b,c,d,e,f,g,h){var i=function(j){var k=g.find(j,'input','checkmark'),l=g.listen(j,'click',null,function(event){k.checked=!k.checked;event.prevent();k.click();}),m=h.listen('m:page:unload',null,function(){m.remove();l.remove();});};f.setupListener=i;},null);
__d("MEventInviteSectionSync",["DOM","Stratcom","CSS"],function(a,b,c,d,e,f,g,h,i){var j={_updateSuggested:function(k){this._updateList(k);this._updateSection(k.value,!k.checked,this._all,'all_');},_updateAll:function(k){this._updateList(k);this._updateSection(k.value,!k.checked,this._suggestions,'suggested_');},updateSearch:function(k){this._updateList(k);this._updateSection(k.value,!k.checked,this._suggestions,'suggested_');this._updateSection(k.value,!k.checked,this._all,'all_');},getStatus:function(k){if(this._checklist.indexOf(k)<0)return false;return true;},isDisabled:function(k){if(this._disablelist.indexOf(k)<0)return false;return true;},_updateList:function(k){if(!k.checked){this._checklist.push(k.value);}else this._checklist.splice(this._checklist.indexOf(k.value),1);},_updateSection:function(k,l,m,n){var o=g.scry(m,'div',n+k);if(!o.length)return;var p=g.find(o[0],'input','checkmark');if(!p)return;p.checked=l;},_appendSection:function(k,l){g.scry(k,'input','checkmark').forEach(function(m){var n=g.listen(m,'change',null,function(){l(m);}.bind(this)),o=h.listen('m:page:unload',null,function(){o.remove();n.remove();});}.bind(this));},checkSuggested:function(k){this._checklist.forEach(function(l){this._updateSection(l,true,this._suggestions,'suggested_');}.bind(this));this._appendSection(k,this._updateSuggested.bind(this));},checkAll:function(k){this._checklist.forEach(function(l){this._updateSection(l,true,this._all,'all_');}.bind(this));this._appendSection(k,this._updateAll.bind(this));},resetList:function(){this._checklist.forEach(function(k){this._updateSection(k,false,this._all,'all_');this._updateSection(k,false,this._suggestions,'suggested_');}.bind(this));this._checklist=[];},getList:function(){return this._checklist;},disableList:function(){this._disablelist=this._disablelist.concat(this._checklist);this.resetList();this._cleanSuggestion();},_cleanSuggestion:function(){var k=g.scry(this._suggestions,'div','suggested_item');if(!k.length)i.hide(this._suggestionHeader);},init:function(k,l,m){this._checklist=[];this._disablelist=[];this._listener=[];this._suggestions=k;this._all=l;this._suggestionHeader=m;this._appendSection(this._suggestions,this._updateSuggested.bind(this));this._appendSection(this._all,this._updateAll.bind(this));}};e.exports=j;},null);
__d("MEventChecklistSource",["MTypeaheadTouchSource","createDeprecatedProperties","MEventChecklist","MEventInviteSectionSync","DOM","CSS","cx","Stratcom"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){for(var o in g)if(g.hasOwnProperty(o))q[o]=g[o];var p=g===null?null:g.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=g;function q(){"use strict";if(g!==null)g.apply(this,arguments);}q.prototype.createNode=function(r){"use strict";var s=[],t=k.create('i',{className:'darkTouch l img profpic',style:{background:'#d8dce6 no-repeat center','background-size':'100% 100%','-webkit-background-size':'100% 100%',width:'48px',height:'48px',backgroundImage:'url('+r.photo+')'}});l.addClass(t,"_1aj5");s.push(t);var u=k.create('div',{className:"_4mo"},k.create('strong',r.name)),v=k.create('div',{className:"_4mp"},r.subtitle),w=k.create('div',{className:'c'},[u,v]);l.addClass(w,"_4mn");s.push(w);var x=[],y=k.create('input',{type:'checkbox',value:r.id,sigil:'checkmark',checked:j.getStatus(r.id.toString())});x.push(y);var z=k.listen(y,'change',null,function(){j.updateSearch(y);}.bind(this)),aa=n.listen('m:page:unload',null,function(){aa.remove();z.remove();}),ba=k.create('div');l.addClass(ba,"_5f26");x.push(ba);var ca=k.create('div',x);l.addClass(ca,"_5s61");l.addClass(ca,"_5f2b");var da=k.create('div',ca);l.addClass(da,"_55wr");l.addClass(da,"_4g33");l.addClass(da,"_52we");l.addClass(da,"_5f2a");var ea=k.create('label',{className:'ext touchable'},da);l.addClass(ea,"_5f25");l.addClass(ea,"_4mq");l.addClass(ea,"_5f28");s.push(ea);var fa=k.create('div',{className:'ib cc'},s);l.addClass(fa,"_1aj4");i.setupListener(fa);var ga=k.create('a',{name:r.name,className:'primary touchable',sigil:'touchable typeahead-result',rel:r.id},fa),ha=k.create('div',{className:'item acw abt',id:r.id},[ga]);l.addClass(ha,"_cs2");l.conditionClass(ha,"_2qap",r.disabled||j.isDisabled(r.id.toString()));return ha;};h(q,{transformer:function(r){return {name:r.text,uri:r.path,id:r.uid,photo:r.photo,disabled:r.disabled,subtitle:r.subtitle,display:r.display||r.text};}});e.exports=q;},null);
__d("MEventSearchBar",["Typeahead","DOM","Stratcom"],function(a,b,c,d,e,f,g,h,i){for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m,n,o){"use strict";g.call(this,m,n);this.$MEventSearchBar0=o;this.$MEventSearchBar1=n;this.$MEventSearchBar2=this.listen('show',function(p){if(p&&this.$MEventSearchBar0)h.hide(this.$MEventSearchBar0);}.bind(this));this.$MEventSearchBar3=this.listen('hide',function(){if(this.$MEventSearchBar0)h.show(this.$MEventSearchBar0);}.bind(this));this.$MEventSearchBar4=this.listen('choose',function(){i.context().prevent();}.bind(this));this.$MEventSearchBar5=this.listen('blur',function(p){p.prevent();}.bind(this));this.$MEventSearchBar6=i.listen('m:page:unload',null,function(){this.$MEventSearchBar2.remove();this.$MEventSearchBar3.remove();this.$MEventSearchBar4.remove();this.$MEventSearchBar5.remove();this.$MEventSearchBar6.remove();this.removeListener();}.bind(this));}l.prototype.clearText=function(){"use strict";this.$MEventSearchBar1.value='';this.refresh();};e.exports=l;},null);
__d("MEventPublicPermalinkInvite",["$","FW","DOM","MAjaxify","Stratcom","MEventInviteSectionSync","MURI","MRequest"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o={init:function(p){this._isOpen=false;this._listeners=[];this._eventId=p.eventId;this._acontext=p.acontext;this._tagger=null;this._form=null;this._typeahead=null;this._textarea=null;if(!window.FW_ENABLED){this._tagger=p.tagger;this._listeners.push(i.listen(this._tagger,'click',null,this._handleClick.bind(this)));this._listeners.push(k.listen('click','event-permalink-invite-button',this._openFriendsTagger.bind(this)));if(p.isError)this._listeners.push(k.listen('click','error-message',this._returnFromErrorMessage.bind(this)));}else{this._excludeIds=p.excludeIds;this._listeners.push(k.listen('click','event-permalink-invite-button',this._openNativeTagger.bind(this)));}this._listeners.push(k.listen('m:page:unload',null,this._cleanup.bind(this)));},setForm:function(p,q){this._form=p;this._invitee=q;},setTypeahead:function(p){this._typeahead=p;},setTextarea:function(p){this._textarea=p;},_returnFromErrorMessage:function(){i.hide(this._tagger);i.show(g('viewport'));},_handleClick:function(event){if(event.getNode('cancel_with_tagger')){this._closeFriendsTagger();l.resetList();}else if(event.getNode('submit_with_tagger'))this._submit();},_submit:function(){this._closeFriendsTagger();if(this._form){if(this._invitee)this._invitee.value=l.getList();j.form(null,this._form,null,'nocache',null,false);}},_openFriendsTagger:function(){this._isOpen=true;i.hide(g('viewport'));i.show(this._tagger);},_openNativeTagger:function(){h.showFriendPicker(this._handleFriendsSelectedNative.bind(this),null,this._excludeIds);},_handleFriendsSelectedNative:function(p){if(p.action=='didPickFriends')this._submitInvites(p.pickedFriends);},_submitInvites:function(p){if(p.length===0)return;var q=new m('/a/events/invite').addQueryData({id:this._eventId,acontext:this._acontext}),r=new n(q);r.addData({users_with:p.join(',')});j.ajaxify(null,this._root,r);this._excludeIds=this._excludeIds.concat(p);},_closeFriendsTagger:function(){this._isOpen=false;i.show(g('viewport'));i.hide(this._tagger);if(this._typeahead)this._typeahead.clearText();this._textarea.blur();},_cleanup:function(){this._listeners.forEach(function(p){p.remove();});this._listeners=[];if(this._tagger)i.remove(this._tagger);}};e.exports=o;},null);
__d("MEventInviteSearch",["MEventSearchBar","MEventChecklistSource","MEventPublicPermalinkInvite"],function(a,b,c,d,e,f,g,h,i){var j=function(k,l,m,n){var o=new g(k,l,m),p=new h(n.src,n.source_key);o.setDatasource(p);o.start();i.setTypeahead(o);};f.initTypeahead=j;},null);
__d("MEventPermalink",["FW"],function(a,b,c,d,e,f,g){function h(){if(window.FW_ENABLED)g.setNavBarButton('','1;');}e.exports.clearHeaderButton=h;},null);
__d("MWeakReferencePopup",["setTimeoutAcrossTransitions","DOM","DataStore","MTouchHelper","Stratcom","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m='m-weak-reference-popup-opener',n='m-weak-reference-popup',o='popup-nub',p='weak-reference-view-timeline',q='weak-reference-add-to-group',r='weak-reference-invite-to-event',s=40,t,u,v;function w(z,aa){var ba=i.get(z);x(z,aa);y(h.find(aa,'a',p),ba.profileURI);y(h.find(aa,'a',q),ba.addMemberURI);y(h.find(aa,'a',r),ba.inviteEventURI);h.show(aa);}function x(z,aa){var ba=l.getPos(z),ca=l.getDim(z);aa.style.top=(ba.y-s)+'px';h.scry(aa,'i',o).forEach(function(da){da.style.left=(ba.x+(ca.x/2))+'px';});}function y(z,aa){z.href=aa;aa?h.show(z):h.hide(z);}e.exports={init:function(){if(t)return;t=true;var z=h.find(document.body,'div',n);h.hide(z);u=false;var aa=k.listen(j.EVT_TOUCHSTART,m,function(event){event.prevent();var da=event.getNode(m);w(da,z);u=true;v=da;}),ba=k.listen(j.EVT_TOUCHEND,null,function(event){if(u&&!event.getNode(m)&&!event.getNode(n)){h.hide(z);u=false;event.prevent();}}),ca=k.listen('m:viewport:orientation-change',null,function(){if(u)g(function(){x(v,z);});});k.listen('m:page:unload',null,function(){aa.remove();ba.remove();ca.remove();k.removeCurrentListener();});}};},null);